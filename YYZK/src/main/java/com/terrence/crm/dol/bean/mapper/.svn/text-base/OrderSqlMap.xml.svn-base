<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" 
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap>
    <resultMap id="RM.Order" class="com.terrence.crm.dol.bean.Order">
        <result property="orderId" column="orderId"/>
        <result property="orderCode" column="orderCode"/>
        <result property="userId" column="userId"/>
        <result property="userName" column="userName"/>
        <result property="orderTime" column="orderTime"/>
        <result property="orderCompanyName" column="orderCompanyName"/>
        <result property="userCompanyName" column="userCompanyName"/>
        <result property="userCompanyAdress" column="userCompanyAdress"/>
        <result property="userCompanyPerson" column="userCompanyPerson"/>
        <result property="userCompanyPhone" column="userCompanyPhone"/>
        <result property="projectName" column="projectName"/>
        <result property="projectId" column="projectId"/>
        <result property="bussinessType" column="bussinessType"/>
        <result property="gasSource" column="gasSource"/>
        <result property="systemConsumer" column="systemConsumer"/>
        <result property="systemConsumerId" column="systemConsumerId"/>
        <result property="payType" column="payType"/>
        <result property="deliveryAdress" column="deliveryAdress"/>
        <result property="freightSide" column="freightSide"/>
        <result property="transportType" column="transportType"/>
        <result property="productPackage" column="productPackage"/>
        <result property="billUserId" column="billUserId"/>
        <result property="billUserName" column="billUserName"/>
        <result property="otherNoticeThings" column="otherNoticeThings"/>
        <result property="marketManagerAdvice" column="marketManagerAdvice"/>
        <result property="orderStatus" column="orderStatus"/>
        <result property="printCount" column="printCount"/>
        <result property="pL3000Count" column="pL3000Count"/>
        <result property="pL3000Unit" column="pL3000Unit"/>
        <result property="pL4200Count" column="pL4200Count"/>
        <result property="pL4200Unit" column="pL4200Unit"/>
        <result property="sSV3500Count" column="sSV3500Count"/>
        <result property="sSV3500Unit" column="sSV3500Unit"/>
        <result property="sPL2000Count" column="sPL2000Count"/>
        <result property="sPL2000Unit" column="sPL2000Unit"/>
        <result property="plTotalFee" column="plTotalFee"/>
        
        <!--国产PL产品销售金额  
         <result property="pL3000SalePrice" column="pL3000SalePrice"/>
         <result property="pL4200SalePrice" column="pL4200SalePrice"/>
         <result property="sSV3500SalePrice" column="sSV3500SalePrice"/>
         <result property="sPL2000SalePrice" column="sPL2000SalePrice"/>-->
       	<!--国产PL产品列表价  -->
       	 <result property="pL3000ListPrice" column="pL3000ListPrice"/>
         <result property="pL4200ListPrice" column="pL4200ListPrice"/>
         <result property="sSV3500ListPrice" column="sSV3500ListPrice"/>
         <result property="sPL2000ListPrice" column="sPL2000ListPrice"/>
       	<!--销售模式-->
       	<result property="salemethod" column="salemethod"/>
       	<!--非直销系数-->
        <result property="nostraightcoeff" column="nostraightcoeff"/>
        <!--共计人民币（大写）-->
        <result property="rmTotal" column="rmTotal"/>
        <!--发票签收人-->
        <result property="billWriterName" column="billWriterName"/>
        <!--通知邮件PDF存放地址-->
        <result property="pdfFilePath" column="pdfFilePath"/>
        <!--订单关闭人员ID-->
        <result property="orderCloseUserId" column="orderCloseUserId"/>
        <!--审核人-->
        <result property="orderChecker" column="orderChecker"/>
        <!--审批人-->
        <result property="orderApprover" column="orderApprover"/>
        <!--业务费系数-->
        <result property="operatorrate" column="operatorrate"/>
        <!--是否年度合同-->
        <result property="isyearlycontract" column="isyearlycontract"/>
        <!--审核人2存区域经理-->
        <result property="orderChecker2" column="orderChecker2"/>
        
    </resultMap>
    <resultMap id="RM.Order.OrderCodes" class="com.terrence.crm.dol.bean.Order">
        <result property="orderId" column="orderId"/>
        <result property="orderCode" column="orderCode"/>
    </resultMap>
    
    <resultMap id="RM.OrderPage" class="com.terrence.crm.dol.bean.Order">
        <result property="orderId" column="orderId"/>
        <result property="orderCode" column="orderCode"/>
        <result property="userId" column="userId"/>
        <result property="userName" column="userName"/>
        <result property="orderTime" column="orderTime"/>
        <result property="orderCompanyName" column="orderCompanyName"/>
        <result property="userCompanyName" column="userCompanyName"/>
        <result property="userCompanyAdress" column="userCompanyAdress"/>
        <result property="userCompanyPerson" column="userCompanyPerson"/>
        <result property="userCompanyPhone" column="userCompanyPhone"/>
        <result property="projectName" column="projectName"/>
        <result property="projectId" column="projectId"/>
        <result property="bussinessType" column="bussinessType"/>
        <result property="gasSource" column="gasSource"/>
        <result property="systemConsumer" column="systemConsumer"/>
        <result property="systemConsumerId" column="systemConsumerId"/>
        <result property="payType" column="payType"/>
        <result property="deliveryAdress" column="deliveryAdress"/>
        <result property="freightSide" column="freightSide"/>
        <result property="transportType" column="transportType"/>
        <result property="productPackage" column="productPackage"/>
        <result property="billUserId" column="billUserId"/>
        <result property="billUserName" column="billUserName"/>
        <result property="otherNoticeThings" column="otherNoticeThings"/>
        <result property="marketManagerAdvice" column="marketManagerAdvice"/>
        <result property="orderStatus" column="orderStatus"/>
        <result property="printCount" column="printCount"/>
        <result property="pL3000Count" column="pL3000Count"/>
        <result property="pL3000Unit" column="pL3000Unit"/>
        <result property="pL4200Count" column="pL4200Count"/>
        <result property="pL4200Unit" column="pL4200Unit"/>
        <result property="sSV3500Count" column="sSV3500Count"/>
        <result property="sSV3500Unit" column="sSV3500Unit"/>
        <result property="sPL2000Count" column="sPL2000Count"/>
        <result property="sPL2000Unit" column="sPL2000Unit"/>
        <result property="plTotalFee" column="plTotalFee"/>
         <!--通知邮件PDF存放地址-->
        <result property="pdfFilePath" column="pdfFilePath"/>
        <!--订单关闭人员ID-->
        <result property="orderCloseUserId" column="orderCloseUserId"/>
        <!--审核人-->
        <result property="orderChecker" column="orderChecker"/>
        <!--审批人-->
        <result property="orderApprover" column="orderApprover"/>
        <!--业务费系数-->
        <result property="operatorrate" column="operatorrate"/>
        <!--是否年度合同-->
        <result property="isyearlycontract" column="isyearlycontract"/>
        <!--审核人2存区域经理-->
        <result property="orderChecker2" column="orderChecker2"/>
    </resultMap>
    
	<!-- 用于select查询公用抽取的列 -->
	<sql id="Order.columns">
	    <![CDATA[
        orderId ,orderCode, userId ,CONVERT(varchar(30),orderTime,120) orderTime ,orderCompanyName , userCompanyName,userCompanyAdress,userCompanyPerson,
        userCompanyPhone,projectId,bussinessType,gasSource,systemConsumerId,payType,deliveryAdress,freightSide,transportType,
        productPackage,billUserId,otherNoticeThings,marketManagerAdvice,orderStatus,printCount,pL3000Count,pL3000Unit,
        pL4200Count,pL4200Unit,sSV3500Count,sSV3500Unit,sPL2000Count,sPL2000Unit,plTotalFee,pdfFilePath,orderCloseUserId,orderChecker,orderApprover
        ,operatorrate,isyearlycontract,orderChecker2
	    ]]>
	</sql>
    <insert id="Order.insert" >
        INSERT INTO t_order (
        orderCode
		<dynamic prepend="">
       		<isNotEmpty prepend="," property="userId">userId</isNotEmpty>
       		<isNotEmpty prepend="," property="userName">userName</isNotEmpty>
       		<isNotEmpty prepend="," property="orderCompanyName">orderCompanyName</isNotEmpty>
       		<isNotEmpty prepend="," property="orderTime">orderTime</isNotEmpty>
       		<isNotEmpty prepend="," property="userCompanyName">userCompanyName</isNotEmpty>
       		<isNotEmpty prepend="," property="userCompanyAdress">userCompanyAdress</isNotEmpty>
       		<isNotEmpty prepend="," property="userCompanyPerson">userCompanyPerson</isNotEmpty>
       		<isNotEmpty prepend="," property="userCompanyPhone">userCompanyPhone</isNotEmpty>
       		<isNotEmpty prepend="," property="projectName">projectName</isNotEmpty>
       		<isNotEmpty prepend="," property="projectId">projectId</isNotEmpty>
       		<isNotEmpty prepend="," property="bussinessType">bussinessType</isNotEmpty>
       		<isNotEmpty prepend="," property="gasSource">gasSource</isNotEmpty>
       		<isNotEmpty prepend="," property="systemConsumer">systemConsumer</isNotEmpty>
       		<isNotEmpty prepend="," property="systemConsumerId">systemConsumerId</isNotEmpty>
       		<isNotEmpty prepend="," property="payType">payType</isNotEmpty>
       		<isNotEmpty prepend="," property="deliveryAdress">deliveryAdress</isNotEmpty>
       		<isNotEmpty prepend="," property="freightSide">freightSide</isNotEmpty>
       		<isNotEmpty prepend="," property="transportType">transportType</isNotEmpty>
       		<isNotEmpty prepend="," property="productPackage">productPackage</isNotEmpty>
       		<isNotEmpty prepend="," property="billUserId">billUserId</isNotEmpty>
       		<isNotEmpty prepend="," property="billUserName">billUserName</isNotEmpty>
       		<isNotEmpty prepend="," property="otherNoticeThings">otherNoticeThings</isNotEmpty>
       		<isNotEmpty prepend="," property="marketManagerAdvice">marketManagerAdvice</isNotEmpty>
       		<isNotEmpty prepend="," property="orderStatus">orderStatus</isNotEmpty>
       		<isNotEmpty prepend="," property="printCount">printCount</isNotEmpty>
       		<isNotEmpty prepend="," property="pL3000Count">pL3000Count</isNotEmpty>
       		<isNotEmpty prepend="," property="pL3000Unit">pL3000Unit</isNotEmpty>
       		<isNotEmpty prepend="," property="pL4200Count">pL4200Count</isNotEmpty>
       		<isNotEmpty prepend="," property="pL4200Unit">pL4200Unit</isNotEmpty>
       		<isNotEmpty prepend="," property="sSV3500Count">sSV3500Count</isNotEmpty>
       		<isNotEmpty prepend="," property="sSV3500Unit">sSV3500Unit</isNotEmpty>
       		<isNotEmpty prepend="," property="sPL2000Count">sPL2000Count</isNotEmpty>
       		<isNotEmpty prepend="," property="sPL2000Unit">sPL2000Unit</isNotEmpty>
       		<isNotEmpty prepend="," property="plTotalFee">plTotalFee</isNotEmpty>
       		
       		<!--国产PL产品销售金额  
       		<isNotEmpty prepend="," property="pL3000SalePrice">pL3000SalePrice</isNotEmpty>
       		<isNotEmpty prepend="," property="pL4200SalePrice">pL4200SalePrice</isNotEmpty>
       		<isNotEmpty prepend="," property="sSV3500SalePrice">sSV3500SalePrice</isNotEmpty>
       		<isNotEmpty prepend="," property="sPL2000SalePrice">sPL2000SalePrice</isNotEmpty>-->
       		<!--国产PL产品列表价  -->
       		<isNotEmpty prepend="," property="pL3000ListPrice">pL3000ListPrice</isNotEmpty>
       		<isNotEmpty prepend="," property="pL4200ListPrice">pL4200ListPrice</isNotEmpty>
       		<isNotEmpty prepend="," property="sSV3500ListPrice">sSV3500ListPrice</isNotEmpty>
       		<isNotEmpty prepend="," property="sPL2000ListPrice">sPL2000ListPrice</isNotEmpty>
       		<!--销售模式-->
       		<isNotEmpty prepend="," property="salemethod">salemethod</isNotEmpty>
       		<!--非直销系数-->
       		<isNotEmpty prepend="," property="nostraightcoeff">nostraightcoeff</isNotEmpty>
       		<!--共计人民币（大写）-->
       		<isNotEmpty prepend="," property="rmTotal">rmTotal</isNotEmpty>
       		<!--发票签收人-->
       		<isNotEmpty prepend="," property="billWriterName">billWriterName</isNotEmpty>
       		<!--是否含有E产品
       		<isNotEmpty prepend="," property="isHaveProductC">isHaveProductC</isNotEmpty>
       		-->
       		<!--订单中包含哪几种产品类型以,分割-->
       		<isNotEmpty prepend="," property="containProductType">containProductType</isNotEmpty>
       		<!--审核人-->
       		<isNotEmpty prepend="," property="orderChecker">orderChecker</isNotEmpty>
       		<!--审批人-->
       		<isNotEmpty prepend="," property="orderApprover">orderApprover</isNotEmpty>
        	<!--业务费系数-->
        	<isNotEmpty prepend="," property="operatorrate">operatorrate</isNotEmpty>
	        <!--是否年度合同-->
	        <isNotEmpty prepend="," property="isyearlycontract">isyearlycontract</isNotEmpty>
	        <!--审核人2存区域经理-->
	        <isNotEmpty prepend="," property="orderChecker2">orderChecker2</isNotEmpty>
       	</dynamic>
        ) VALUES (
        #orderCode#
		<dynamic prepend="">
			<isNotEmpty prepend="," property="userId">#userId#</isNotEmpty>
			<isNotEmpty prepend="," property="userName">#userName#</isNotEmpty>
			<isNotEmpty prepend="," property="orderCompanyName">#orderCompanyName#</isNotEmpty>
			<isNotEmpty prepend="," property="orderTime">#orderTime#</isNotEmpty>
			<isNotEmpty prepend="," property="userCompanyName">#userCompanyName#</isNotEmpty>
			<isNotEmpty prepend="," property="userCompanyAdress">#userCompanyAdress#</isNotEmpty>
			<isNotEmpty prepend="," property="userCompanyPerson">#userCompanyPerson#</isNotEmpty>
			<isNotEmpty prepend="," property="userCompanyPhone">#userCompanyPhone#</isNotEmpty>
			<isNotEmpty prepend="," property="projectName">#projectName#</isNotEmpty>
			<isNotEmpty prepend="," property="projectId">#projectId#</isNotEmpty>
			<isNotEmpty prepend="," property="bussinessType">#bussinessType#</isNotEmpty>
			<isNotEmpty prepend="," property="gasSource">#gasSource#</isNotEmpty>
			<isNotEmpty prepend="," property="systemConsumer">#systemConsumer#</isNotEmpty>
			<isNotEmpty prepend="," property="systemConsumerId">#systemConsumerId#</isNotEmpty>
			<isNotEmpty prepend="," property="payType">#payType#</isNotEmpty>
			<isNotEmpty prepend="," property="deliveryAdress">#deliveryAdress#</isNotEmpty>
			<isNotEmpty prepend="," property="freightSide">#freightSide#</isNotEmpty>
			<isNotEmpty prepend="," property="transportType">#transportType#</isNotEmpty>
			<isNotEmpty prepend="," property="productPackage">#productPackage#</isNotEmpty>
			<isNotEmpty prepend="," property="billUserId">#billUserId#</isNotEmpty>
			<isNotEmpty prepend="," property="billUserName">#billUserName#</isNotEmpty>
			<isNotEmpty prepend="," property="otherNoticeThings">#otherNoticeThings#</isNotEmpty>
			<isNotEmpty prepend="," property="marketManagerAdvice">#marketManagerAdvice#</isNotEmpty>
			<isNotEmpty prepend="," property="orderStatus">#orderStatus#</isNotEmpty>
			<isNotEmpty prepend="," property="printCount">#printCount#</isNotEmpty>
			<isNotEmpty prepend="," property="pL3000Count">#pL3000Count#</isNotEmpty>
			<isNotEmpty prepend="," property="pL3000Unit">#pL3000Unit#</isNotEmpty>
			<isNotEmpty prepend="," property="pL4200Count">#pL4200Count#</isNotEmpty>
			<isNotEmpty prepend="," property="pL4200Unit">#pL4200Unit#</isNotEmpty>
			<isNotEmpty prepend="," property="sSV3500Count">#sSV3500Count#</isNotEmpty>
			<isNotEmpty prepend="," property="sSV3500Unit">#sSV3500Unit#</isNotEmpty>
			<isNotEmpty prepend="," property="sPL2000Count">#sPL2000Count#</isNotEmpty>
			<isNotEmpty prepend="," property="sPL2000Unit">#sPL2000Unit#</isNotEmpty>
			<isNotEmpty prepend="," property="plTotalFee">#plTotalFee#</isNotEmpty>
			
			<!--国产PL产品销售金额  
       		<isNotEmpty prepend="," property="pL3000SalePrice">#pL3000SalePrice#</isNotEmpty>
       		<isNotEmpty prepend="," property="pL4200SalePrice">#pL4200SalePrice#</isNotEmpty>
       		<isNotEmpty prepend="," property="sSV3500SalePrice">#sSV3500SalePrice#</isNotEmpty>
       		<isNotEmpty prepend="," property="sPL2000SalePrice">#sPL2000SalePrice#</isNotEmpty>-->
       		<!--国产PL产品列表价  -->
       		<isNotEmpty prepend="," property="pL3000ListPrice">#pL3000ListPrice#</isNotEmpty>
       		<isNotEmpty prepend="," property="pL4200ListPrice">#pL4200ListPrice#</isNotEmpty>
       		<isNotEmpty prepend="," property="sSV3500ListPrice">#sSV3500ListPrice#</isNotEmpty>
       		<isNotEmpty prepend="," property="sPL2000ListPrice">#sPL2000ListPrice#</isNotEmpty>
       		<!--销售模式-->
       		<isNotEmpty prepend="," property="salemethod">#salemethod#</isNotEmpty>
       		<!--非直销系数-->
       		<isNotEmpty prepend="," property="nostraightcoeff">#nostraightcoeff#</isNotEmpty>
       		<!--共计人民币（大写）-->
       		<isNotEmpty prepend="," property="rmTotal">#rmTotal#</isNotEmpty>
       		<!--发票签收人-->
       		<isNotEmpty prepend="," property="billWriterName">#billWriterName#</isNotEmpty>
       		<!--是否含有E产品
       		<isNotEmpty prepend="," property="isHaveProductC">#isHaveProductC#</isNotEmpty>-->
       		
       		<!--订单中包含哪几种产品类型以,分割-->
       		<isNotEmpty prepend="," property="containProductType">#containProductType#</isNotEmpty>
       		<!--审核人-->
       		<isNotEmpty prepend="," property="orderChecker">#orderChecker#</isNotEmpty>
       		<!--审批人-->
       		<isNotEmpty prepend="," property="orderApprover">#orderApprover#</isNotEmpty>
       		<!--业务费系数-->
        	<isNotEmpty prepend="," property="operatorrate">#operatorrate#</isNotEmpty>
	        <!--是否年度合同-->
	        <isNotEmpty prepend="," property="isyearlycontract">#isyearlycontract#</isNotEmpty>
	        <!--审核人2存区域经理-->
	        <isNotEmpty prepend="," property="orderChecker2">#orderChecker2#</isNotEmpty>
		</dynamic>
        )
        <selectKey resultClass="java.lang.Long" type="post" keyProperty="orderId" >
            SELECT  @@identity  AS  ID
        </selectKey>
    </insert>
    <update id="Order.updateOrderStatus" >
        UPDATE t_order
        <dynamic prepend="SET">
        		<isNotEmpty prepend="," property="orderStatus">
        			orderStatus = #orderStatus# 
        		</isNotEmpty>
        		<!--订单关闭人员ID-->
       		    <isNotEmpty prepend="," property="orderCloseUserId">orderCloseUserId=#orderCloseUserId#</isNotEmpty>
       		    <!--审核人存财务经理-->
	       		<isNotEmpty prepend="," property="orderChecker">orderChecker=#orderChecker#</isNotEmpty>
	       		<!--审批人-->
	       		<isNotEmpty prepend="," property="orderApprover">orderApprover=#orderApprover#</isNotEmpty>
	       		<!--审核人2存区域经理-->
	       		<isNotEmpty prepend="," property="orderChecker2">orderChecker2=#orderChecker2#</isNotEmpty>
        </dynamic>
      WHERE 
	        orderId = #orderId# 
    </update>  
        
    <update id="Order.update" >
        UPDATE t_order
        	<dynamic prepend="SET">
        		<isNotEmpty prepend="," property="userName">
        			userName = #userName# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="userId">
        			userId = #userId# 
        		</isNotEmpty>
       			<isNotEmpty prepend="," property="orderCode">
        			orderCode = #orderCode# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="orderTime">
        			orderTime = #orderTime# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="orderCompanyName">
        			orderCompanyName = #orderCompanyName# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="userCompanyName">
        			userCompanyName = #userCompanyName# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="userCompanyAdress">
        			userCompanyAdress = #userCompanyAdress# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="userCompanyPerson">
        			userCompanyPerson = #userCompanyPerson# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="userCompanyPhone">
        			userCompanyPhone = #userCompanyPhone# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="projectName">
        			projectName = #projectName# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="projectId">
        			projectId = #projectId# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="bussinessType">
        			bussinessType = #bussinessType# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="gasSource">
        			gasSource = #gasSource# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="systemConsumer">
        			systemConsumer = #systemConsumer# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="systemConsumerId">
        			systemConsumerId = #systemConsumerId# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="payType">
        			payType = #payType# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="deliveryAdress">
        			deliveryAdress = #deliveryAdress# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="freightSide">
        			freightSide = #freightSide# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="transportType">
        			transportType = #transportType# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="productPackage">
        			productPackage = #productPackage# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="billUserName">
        			billUserName = #billUserName# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="billUserId">
        			billUserId = #billUserId# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="otherNoticeThings">
        			otherNoticeThings = #otherNoticeThings# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="orderStatus">
        			orderStatus = #orderStatus# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="pL3000Count">
        			pL3000Count = #pL3000Count# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="pL3000Unit">
        			pL3000Unit = #pL3000Unit# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="pL4200Count">
        			pL4200Count = #pL4200Count# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="pL4200Unit">
        			pL4200Unit = #pL4200Unit# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="sSV3500Count">
        			sSV3500Count = #sSV3500Count# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="sSV3500Unit">
        			sSV3500Unit = #sSV3500Unit# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="sPL2000Count">
        			sPL2000Count = #sPL2000Count# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="sPL2000Unit">
        			sPL2000Unit = #sPL2000Unit# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="plTotalFee">
        			plTotalFee = #plTotalFee# 
        		</isNotEmpty>
        		
        		
        		
        		<!--国产PL产品销售金额  
       		   	<isNotEmpty prepend="," property="pL3000SalePrice">pL3000SalePrice=#pL3000SalePrice#</isNotEmpty>
	       		<isNotEmpty prepend="," property="pL4200SalePrice">pL4200SalePrice=#pL4200SalePrice#</isNotEmpty>
	       		<isNotEmpty prepend="," property="sSV3500SalePrice">sSV3500SalePrice=#sSV3500SalePrice#</isNotEmpty>
	       		<isNotEmpty prepend="," property="sPL2000SalePrice">sPL2000SalePrice=#sPL2000SalePrice#</isNotEmpty>-->
	       		<!--国产PL产品列表价  -->
	       		<isNotEmpty prepend="," property="pL3000ListPrice">pL3000ListPrice=#pL3000ListPrice#</isNotEmpty>
	       		<isNotEmpty prepend="," property="pL4200ListPrice">pL4200ListPrice=#pL4200ListPrice#</isNotEmpty>
	       		<isNotEmpty prepend="," property="sSV3500ListPrice">sSV3500ListPrice=#sSV3500ListPrice#</isNotEmpty>
	       		<isNotEmpty prepend="," property="sPL2000ListPrice">sPL2000ListPrice=#sPL2000ListPrice#</isNotEmpty>
	       		<!--销售模式-->
	       		<isNotEmpty prepend="," property="salemethod">salemethod=#salemethod#</isNotEmpty>
	       		<!--非直销系数-->
	       		<isNotEmpty prepend="," property="nostraightcoeff">nostraightcoeff=#nostraightcoeff#</isNotEmpty>
        		<!--共计人民币（大写）-->
        		<isNotEmpty prepend="," property="rmTotal">
        			rmTotal = #rmTotal# 
        		</isNotEmpty>
        		<!--发票签收人-->
        		<isNotEmpty prepend="," property="billWriterName">
        			billWriterName = #billWriterName# 
        		</isNotEmpty>
        		<!--订单中包含哪几种产品类型以,分割-->
       		    <isNotEmpty prepend="," property="containProductType">containProductType=#containProductType#</isNotEmpty>
       		    <!--订单邮件通知附件的PDF存放地址-->
       		    <isNotEmpty prepend="," property="pdfFilePath">pdfFilePath=#pdfFilePath#</isNotEmpty>
       		    <!--订单关闭人员ID-->
       		    <isNotEmpty prepend="," property="orderCloseUserId">orderCloseUserId=#orderCloseUserId#</isNotEmpty>
        		<!--业务费系数-->
	        	<isNotEmpty prepend="," property="operatorrate">operatorrate=#operatorrate#</isNotEmpty>
		        <!--是否年度合同-->
		        <isNotEmpty prepend="," property="isyearlycontract">isyearlycontract=#isyearlycontract#</isNotEmpty>
		        <!--审核人2存区域经理-->
	       		<isNotEmpty prepend="," property="orderChecker2">orderChecker2=#orderChecker2#</isNotEmpty>
	        </dynamic>
        WHERE 
	        orderId = #orderId# 
    </update>

    <delete id="Order.delete">
    <![CDATA[
        DELETE FROM t_order WHERE
        orderId = #id# 
    ]]>
    </delete>
    
    <delete id="Order.deleteMultiple">
    <![CDATA[
        DELETE FROM t_order WHERE
        orderId in ($id$) 
    ]]>
    </delete>
    
    <delete id="Order.deleteOrderByOrderCode">
    <![CDATA[
        DELETE FROM t_order WHERE
        orderCode in ($id$) 
    ]]>
    </delete>
    <!-- 查询标准订单是否有待审核,或已经生效 -->
    <!-- 新流程基本订单状态:0 待提交 1 区域经理和财务经理待审核 2 区域经理驳回 3财务经理驳回 
			//4 售后服务部经理待审核5售后服务部经理驳回
			//6 副总经理及以上待审核    7 副总经理驳回8总经理驳回9 已生效  10 区域经理已审核 11 财务经理已审核 -->
    <select id="Order.findlistByOrderCodes" resultMap="RM.Order.OrderCodes">
	    select orderId,orderCode
	        from t_order
	        where 
	        (orderStatus=1 or orderStatus=4 or orderStatus=6 or orderStatus=9 or orderStatus=10 or orderStatus=11)
		         and orderCode in ($orderCodes$)
    </select>
    
    <!-- 标准订单工程项目名称改为手输入 -->
    <select id="Order.getById" resultMap="RM.Order">
	    SELECT <include refid="Order.columns"/>,
	    ta1.adminName userName,ta2.adminName billUserName,tb1.blocname systemConsumer,t_order.projectName,
	    t_order.salemethod ,t_order.nostraightcoeff,
	    t_order.pL3000ListPrice,t_order.pL4200ListPrice,
	    t_order.sSV3500ListPrice,t_order.sPL2000ListPrice,
	    t_order.rmTotal,
	    t_order.billWriterName
	    <![CDATA[
	        FROM t_order
	        left join t_admin ta1 on t_order.userId = ta1.adminId
	    	left join t_admin ta2 on t_order.billUserId = ta2.adminId
			left join t_bloc tb1 on t_order.systemConsumerId = tb1.blocid
			
	        WHERE 
		        orderId = #id# 
	    ]]>
    </select>
    
    <select id="Order.getByIdold" resultMap="RM.Order">
	    SELECT <include refid="Order.columns"/>,
	    ta1.adminName userName,ta2.adminName billUserName,tb1.blocname systemConsumer,tp1.pmname projectName 
	    <![CDATA[
	        FROM t_order
	        left join t_admin ta1 on t_order.userId = ta1.adminId
	    	left join t_admin ta2 on t_order.billUserId = ta2.adminId
			left join t_bloc tb1 on t_order.systemConsumerId = tb1.blocid
			left join t_pm tp1 on t_order.projectId = tp1.pmid
	        WHERE 
		        orderId = #id# 
	    ]]>
    </select>
	
	<sql id="Order.findPageInfos.where">
	    <dynamic prepend="WHERE">
	       <isNotEmpty prepend="AND" property="orderId">
	             orderId = #orderId#
	       </isNotEmpty>
	       
	       <isNotEmpty prepend="AND" property="projectName">
	             t_order.projectName like ('%$projectName$%') 
	       </isNotEmpty>
			<isNotEmpty prepend="AND" property="createdateBegin">
	             t_order.orderTime &gt;= #createdateBegin#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="createdateEnd">
	             t_order.orderTime &lt;= #createdateEnd#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="orderCode">
	             t_order.orderCode like ('%$orderCode$%') 
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="userName">
	             t_order.userName like ('%$userName$%') 
	       </isNotEmpty>
	       
	       <isNotEmpty prepend="AND" property="billUserIds">
	             t_order.billUserId in ($billUserIds$) 
	       </isNotEmpty>
	       
	      <isNotEmpty prepend="AND" property="userIds">
	             t_order.userId  in ($userIds$) 
	       </isNotEmpty>
	       
	       <isNotEmpty prepend="AND" property="billUserId">
	             billUserId = #billUserId#
	       </isNotEmpty>
	       
	       <isNotEmpty prepend="AND" property="orderStatus">
	             orderStatus = #orderStatus#
	       </isNotEmpty>
	       <!-- 是否包含C类产品 
	       <isNotEmpty prepend="AND" property="isHaveProductC">
	             isHaveProductC = #isHaveProductC#
	       </isNotEmpty>-->
	       
	       <!--订单中包含哪几种产品类型以,分割-->
       	   <isNotEmpty prepend="AND" property="containProductType">
       	   containProductType  like ('%$containProductType$%')  
       	   </isNotEmpty>
       		    
	    </dynamic>	
	</sql>
	
	<sql id="Order.findPage.where">
	    <dynamic prepend="WHERE">
	       <isNotEmpty prepend="AND" property="orderId">
	             orderId = #orderId#
	       </isNotEmpty>
	       
	       <isNotEmpty prepend="AND" property="projectName">
	             t_order.projectName like ('%$projectName$%') 
	       </isNotEmpty>
			<isNotEmpty prepend="AND" property="createdateBegin">
	             t_order.orderTime &gt;= #createdateBegin#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="createdateEnd">
	             t_order.orderTime &lt;= #createdateEnd#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="orderCode">
	             t_order.orderCode like ('%$orderCode$%') 
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="userName">
	             t_order.userName like ('%$userName$%') 
	       </isNotEmpty>
	       
	       <isNotEmpty prepend="AND" property="billUserIds">
	             t_order.billUserId in ($billUserIds$) 
	       </isNotEmpty>
	       
	       <isNotEmpty prepend="AND" property="userId">
	             userId = #userId#
	       </isNotEmpty>
	       
	       <isNotEmpty prepend="AND" property="billUserId">
	             billUserId = #billUserId#
	       </isNotEmpty>
	       
	       <isNotEmpty prepend="AND" property="orderStatus">
	             orderStatus = #orderStatus#
	       </isNotEmpty>
	       <!-- 是否包含C类产品 
	       <isNotEmpty prepend="AND" property="isHaveProductC">
	             isHaveProductC = #isHaveProductC#
	       </isNotEmpty>-->
	       
	       <!--订单中包含哪几种产品类型以,分割-->
       	   <isNotEmpty prepend="AND" property="containProductType">
       	   containProductType  like ('%$containProductType$%')  
       	   </isNotEmpty>
       		    
	    </dynamic>	
	</sql>
	<sql id="Order.findPage.and">
	       <isNotEmpty prepend="AND" property="orderId">
	             orderId = #orderId#
	       </isNotEmpty>
	       
	       <isNotEmpty prepend="AND" property="projectName">
	             t_order.projectName like ('%$projectName$%') 
	       </isNotEmpty>
			<isNotEmpty prepend="AND" property="createdateBegin">
	             t_order.orderTime &gt;= #createdateBegin#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="createdateEnd">
	             t_order.orderTime &lt;= #createdateEnd#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="orderCode">
	             t_order.orderCode like ('%$orderCode$%') 
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="userName">
	             t_order.userName like ('%$userName$%') 
	       </isNotEmpty>
	       
	       <isNotEmpty prepend="AND" property="billUserIds">
	             t_order.billUserId in ($billUserIds$) 
	       </isNotEmpty>
	       
	       <isNotEmpty prepend="AND" property="userId">
	             userId = #userId#
	       </isNotEmpty>
	       
	       <isNotEmpty prepend="AND" property="billUserId">
	             billUserId = #billUserId#
	       </isNotEmpty>
	       
	       <isNotEmpty prepend="AND" property="orderStatus">
	             orderStatus = #orderStatus#
	       </isNotEmpty>
	       <!-- 是否包含C类产品
	       <isNotEmpty prepend="AND" property="isHaveProductC">
	             isHaveProductC = #isHaveProductC#
	       </isNotEmpty> -->
	       
	       <!--订单中包含哪几种产品类型以,分割-->
       	   <isNotEmpty prepend="AND" property="containProductType">
       	   containProductType  like ('%$containProductType$%')  
       	   </isNotEmpty>
       		 
       		 
	</sql>
	<sql id="Order.findPageInfos.and">
	       <isNotEmpty prepend="AND" property="orderId">
	             orderId = #orderId#
	       </isNotEmpty>
	       
	       <isNotEmpty prepend="AND" property="projectName">
	             t_order.projectName like ('%$projectName$%') 
	       </isNotEmpty>
			<isNotEmpty prepend="AND" property="createdateBegin">
	             t_order.orderTime &gt;= #createdateBegin#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="createdateEnd">
	             t_order.orderTime &lt;= #createdateEnd#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="orderCode">
	             t_order.orderCode like ('%$orderCode$%') 
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="userName">
	             t_order.userName like ('%$userName$%') 
	       </isNotEmpty>
	       
	       <isNotEmpty prepend="AND" property="billUserIds">
	             t_order.billUserId in ($billUserIds$) 
	       </isNotEmpty>
	       
	       <isNotEmpty prepend="AND" property="userIds">
	             t_order.userId  in ($userIds$) 
	       </isNotEmpty>
	       
	       <isNotEmpty prepend="AND" property="billUserId">
	             billUserId = #billUserId#
	       </isNotEmpty>
	       
	       <isNotEmpty prepend="AND" property="orderStatus">
	             orderStatus = #orderStatus#
	       </isNotEmpty>
	       <!-- 是否包含C类产品
	       <isNotEmpty prepend="AND" property="isHaveProductC">
	             isHaveProductC = #isHaveProductC#
	       </isNotEmpty> -->
	       
	       <!--订单中包含哪几种产品类型以,分割-->
       	   <isNotEmpty prepend="AND" property="containProductType">
       	   containProductType  like ('%$containProductType$%')  
       	   </isNotEmpty>
       		 
       		 
	</sql>
	
	<sql id="Order.findPageInfo.or">
	       <isNotEmpty prepend="AND" property="userId">
	             userId = #userId#
	       </isNotEmpty>
	</sql>
	<sql id="Order.findPageInfo.and">
	       <isNotEmpty prepend="AND" property="orderId">
	             orderId = #orderId#
	       </isNotEmpty>
	       
	       <isNotEmpty prepend="AND" property="projectName">
	             t_order.projectName like ('%$projectName$%') 
	       </isNotEmpty>
			<isNotEmpty prepend="AND" property="createdateBegin">
	             t_order.orderTime &gt;= #createdateBegin#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="createdateEnd">
	             t_order.orderTime &lt;= #createdateEnd#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="orderCode">
	             t_order.orderCode like ('%$orderCode$%') 
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="userName">
	             t_order.userName like ('%$userName$%') 
	       </isNotEmpty>
	       
	       <isNotEmpty prepend="AND" property="billUserIds">
	             t_order.billUserId in ($billUserIds$) 
	       </isNotEmpty>
	       
	       
	       <isNotEmpty prepend="AND" property="billUserId">
	             billUserId = #billUserId#
	       </isNotEmpty>
	       
	       <isNotEmpty prepend="AND" property="orderStatus">
	             orderStatus = #orderStatus#
	       </isNotEmpty>
	       <!-- 是否包含C类产品
	       <isNotEmpty prepend="AND" property="isHaveProductC">
	             isHaveProductC = #isHaveProductC#
	       </isNotEmpty> -->
	       
	       <!--订单中包含哪几种产品类型以,分割-->
       	   <isNotEmpty prepend="AND" property="containProductType">
       	   containProductType  like ('%$containProductType$%')  
       	   </isNotEmpty>
	</sql>
	
    <select id="Order.findPage.count" resultClass="long">
        <!--SELECT count(*) FROM t_order <include refid="Order.findPage.where"/>-->
        SELECT count(*) FROM t_order <include refid="Order.findPageInfos.where"/>    
    </select>
    
    
    <select id="Order.findPagenew" resultMap="RM.Order">
    	SELECT <include refid="Order.columns"/> ,
    	ta1.adminName userName,ta2.adminName billUserName,tb1.blocname systemConsumer,t_order.projectName,
    	t_order.salemethod ,t_order.nostraightcoeff,
	    t_order.pL3000ListPrice,t_order.pL4200ListPrice,
	    t_order.sSV3500ListPrice,t_order.sPL2000ListPrice 
    	FROM t_order 
    	left join t_admin ta1 on t_order.userId = ta1.adminId
    	left join t_admin ta2 on t_order.billUserId = ta2.adminId
		left join t_bloc tb1 on t_order.systemConsumerId = tb1.blocid
		
    	where 1=1 
    	<isNotEmpty property="notTop">  and 
       	orderId not in(select $notTop$ orderId from t_order <include refid="Order.findPage.where"/>
	   	   <isNotEmpty property="sortColumns"> ORDER BY $sortColumns$	</isNotEmpty>) 
	   	</isNotEmpty>  
		<isNotEmpty property="sortColumns">
			ORDER BY $sortColumns$
		</isNotEmpty>
    </select>
    <!--  
    <select id="Order.findByInfo" resultMap="RM.OrderPage">
    	SELECT <include refid="Order.columns"/> ,
    	ta1.adminName userName,ta2.adminName billUserName,tb1.blocname systemConsumer,t_order.projectName 
    	FROM t_order 
    	left join t_admin ta1 on t_order.userId = ta1.adminId
    	left join t_admin ta2 on t_order.billUserId = ta2.adminId
		left join t_bloc tb1 on t_order.systemConsumerId = tb1.blocid
    	where 1=1 
	   	<include refid="Order.findPage.and"/>  
		<isNotEmpty property="sortColumns">
			ORDER BY $sortColumns$
		</isNotEmpty>
    </select>
    -->
    <select id="Order.findPage" resultMap="RM.OrderPage">
    	SELECT <include refid="Order.columns"/> ,
    	ta1.adminName userName,ta2.adminName billUserName,tb1.blocname systemConsumer,t_order.projectName 
    	FROM t_order 
    	left join t_admin ta1 on t_order.userId = ta1.adminId
    	left join t_admin ta2 on t_order.billUserId = ta2.adminId
		left join t_bloc tb1 on t_order.systemConsumerId = tb1.blocid
		
    	where 1=1 
    	<isNotEmpty property="notTop">  and 
       	orderId not in(select $notTop$ orderId from t_order
       	   <!--<include refid="Order.findPage.where"/>--> 
       	   <include refid="Order.findPageInfos.where"/>
	   	   <isNotEmpty property="sortColumns"> ORDER BY $sortColumns$	</isNotEmpty>) 
	   	</isNotEmpty>
	   	<!--<include refid="Order.findPage.and"/>-->
	   	<include refid="Order.findPageInfos.and"/> 
	   	
		<isNotEmpty property="sortColumns">
			ORDER BY $sortColumns$
		</isNotEmpty>
    </select>
    
    <select id="Order.findListPageInfo" resultMap="RM.OrderPage">
    	SELECT <include refid="Order.columns"/> ,
    	ta1.adminName userName,ta2.adminName billUserName,tb1.blocname systemConsumer,t_order.projectName 
    	FROM t_order 
    	left join t_admin ta1 on t_order.userId = ta1.adminId
    	left join t_admin ta2 on t_order.billUserId = ta2.adminId
		left join t_bloc tb1 on t_order.systemConsumerId = tb1.blocid
		
    	where 1=1
    	<isNotEmpty property="notTop">  and 
       	orderId not in(select $notTop$ orderId from t_order <include refid="Order.findPage.where"/>
	   	   <isNotEmpty property="sortColumns"> ORDER BY $sortColumns$	</isNotEmpty>) 
	   	</isNotEmpty>
	   	<include refid="Order.findPageInfo.and"/> 
	   	or (1=1
	   	<include refid="Order.findPageInfo.or"/>
	   	 )
		<isNotEmpty property="sortColumns">
			ORDER BY $sortColumns$
		</isNotEmpty>
    </select>
    
    
    <select id="Order.findPageold2" resultMap="RM.OrderPage">
    	SELECT <include refid="Order.columns"/> ,
    	ta1.adminName userName,ta2.adminName billUserName,tb1.blocname systemConsumer,tp1.pmname projectName 
    	FROM t_order 
    	left join t_admin ta1 on t_order.userId = ta1.adminId
    	left join t_admin ta2 on t_order.billUserId = ta2.adminId
		left join t_bloc tb1 on t_order.systemConsumerId = tb1.blocid
		left join t_pm tp1 on t_order.projectId = tp1.pmid
    	where 1=1 
    	<isNotEmpty property="notTop">  and 
       	orderId not in(select $notTop$ orderId from t_order <include refid="Order.findPage.where"/>
	   	   <isNotEmpty property="sortColumns"> ORDER BY $sortColumns$	</isNotEmpty>) 
	   	</isNotEmpty>  
		<isNotEmpty property="sortColumns">
			ORDER BY $sortColumns$
		</isNotEmpty>
    </select>
    
    
    <select id="Order.findListAll" resultMap="RM.OrderPage">
    	SELECT <include refid="Order.columns"/> ,
    	ta1.adminName userName,ta2.adminName billUserName,tb1.blocname systemConsumer,t_order.projectName 
    	FROM t_order 
    	left join t_admin ta1 on t_order.userId = ta1.adminId
    	left join t_admin ta2 on t_order.billUserId = ta2.adminId
		left join t_bloc tb1 on t_order.systemConsumerId = tb1.blocid
		 
		<include refid="Order.findPage.where"/>
		<isNotEmpty property="sortColumns">
			ORDER BY $sortColumns$
		</isNotEmpty>
    </select>
    
    <select id="Order.findList" resultMap="RM.Order">
    	SELECT <include refid="Order.columns"/> ,
    	ta1.adminName userName,ta2.adminName billUserName,tb1.blocname systemConsumer,tp1.pmname projectName 
    	FROM t_order 
    	left join t_admin ta1 on t_order.userId = ta1.adminId
    	left join t_admin ta2 on t_order.billUserId = ta2.adminId
		left join t_bloc tb1 on t_order.systemConsumerId = tb1.blocid
		left join t_pm tp1 on t_order.projectId = tp1.pmid
		<include refid="Order.findPage.where"/>
		<isNotEmpty property="sortColumns">
			ORDER BY $sortColumns$
		</isNotEmpty>
    </select>
</sqlMap>