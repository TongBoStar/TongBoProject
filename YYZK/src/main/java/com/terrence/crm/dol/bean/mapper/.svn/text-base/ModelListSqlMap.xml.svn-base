<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" 
	"http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="ModelList">

<resultMap id="RM.ModelList" class="com.terrence.crm.dol.bean.ModelList">
	<result property="id" column="id"/>
	<result property="itemcode" column="itemcode"/>
	<result property="itemname" column="itemname"/>
	<result property="fmodel" column="fmodel"/>
	<result property="fcount" column="fcount"/>
	<result property="manualfcount" column="manualfcount"/>
	<result property="fmatrial" column="fmatrial"/>
	<result property="fmark" column="fmark"/>
	<result property="slen" column="slen"/>
	<result property="alen" column="alen"/>
	<result property="sweight" column="sweight"/>
	<result property="aweight" column="aweight"/>
	<result property="checkno" column="checkno"/>
	<result property="dispenserId" column="dispenserId"/>
	<result property="dispenserName" column="dispenserName"/>
	<result property="receiverId" column="receiverId"/>
	<result property="receiverName" column="receiverName"/>
	<result property="checkerId" column="checkerId"/>
	<result property="checkerName" column="checkerName"/>
	<result property="baitDate" column="baitDate"/>
	<result property="planreachTime" column="planreachTime"/>
	<result property="createTime" column="createTime"/>
	<result property="createrId" column="createrId"/>
	<result property="createrName" column="createrName"/>
	<result property="designassistId" column="designassistId"/>
	<result property="bdtId" column="bdtId"/>
	<result property="isdispatch" column="isdispatch"/>
	<result property="modelId" column="modelId"/>
	<result property="fileName" column="fileName"/>
	<result property="sourceType" column="sourceType"/>
	<result property="bomversion" column="bomversion"/>
	<result property="changestatus" column="changestatus"/>
	<result property="changemark" column="changemark"/>
	<result property="modifycount" column="modifycount"/>
</resultMap>
<resultMap id="RM.ModelList.findList" class="com.terrence.crm.dol.bean.ModelList">
	<result property="id" column="id"/>
	<result property="itemcode" column="itemcode"/>
	<result property="itemname" column="itemname"/>
	<result property="fmodel" column="fmodel"/>
	<result property="fcount" column="fcount"/>
	<result property="fmatrial" column="fmatrial"/>
	<result property="fmark" column="fmark"/>
	<result property="slen" column="slen"/>
	<result property="alen" column="alen"/>
	<result property="sweight" column="sweight"/>
	<result property="aweight" column="aweight"/>
	<result property="checkno" column="checkno"/>
	<result property="dispenserId" column="dispenserId"/>
	<result property="dispenserName" column="dispenserName"/>
	<result property="receiverId" column="receiverId"/>
	<result property="receiverName" column="receiverName"/>
	<result property="checkerId" column="checkerId"/>
	<result property="checkerName" column="checkerName"/>
	<result property="baitDate" column="baitDate"/>
	<result property="planreachTime" column="planreachTime"/>
	<result property="createTime" column="createTime"/>
	<result property="createrId" column="createrId"/>
	<result property="createrName" column="createrName"/>
	<result property="designassistId" column="designassistId"/>
	<result property="bdtId" column="bdtId"/>
	<result property="isdispatch" column="isdispatch"/>
	<result property="modelId" column="modelId"/>
	<result property="fileName" column="fileName"/>
	<result property="unitname" column="unitname"/>
	<result property="sourceType" column="sourceType"/>
	<result property="bomversion" column="bomversion"/>
	<result property="manualfcount" column="manualfcount"/>
	<result property="changestatus" column="changestatus"/>
	<result property="changemark" column="changemark"/>
	<result property="modifycount" column="modifycount"/>
	<result property="drawitemcode" column="drawitemcode"/>
	<result property="drawitemname" column="drawitemname"/>
	<result property="drawitemmode" column="drawitemmode"/>
	<result property="drawtype" column="drawtype"/>
	<result property="mfcount" column="mfcount"/>
</resultMap>

<resultMap id="RM.ModelList.Callslip" class="com.terrence.crm.dol.bean.ModelList">
	<result property="id" column="id"/>
	<result property="itemcode" column="itemcode"/>
	<result property="itemname" column="itemname"/>
	<result property="fmodel" column="fmodel"/>
	<result property="fcount" column="fcount"/>
	<result property="fmatrial" column="fmatrial"/>
	<result property="fmark" column="fmark"/>
	<result property="slen" column="slen"/>
	<result property="alen" column="alen"/>
	<result property="sweight" column="sweight"/>
	<result property="aweight" column="aweight"/>
	<result property="checkno" column="checkno"/>
	<result property="dispenserId" column="dispenserId"/>
	<result property="dispenserName" column="dispenserName"/>
	<result property="receiverId" column="receiverId"/>
	<result property="receiverName" column="receiverName"/>
	<result property="checkerId" column="checkerId"/>
	<result property="checkerName" column="checkerName"/>
	<result property="baitDate" column="baitDate"/>
	<result property="planreachTime" column="planreachTime"/>
	<result property="createTime" column="createTime"/>
	<result property="createrId" column="createrId"/>
	<result property="createrName" column="createrName"/>
	<result property="designassistId" column="designassistId"/>
	<!-- <result property="stocks" column="stocks"/> -->
	<result property="isserialize" column="isserialize"/>
	<result property="unitname" column="unitname"/>
	<result property="ischeckno" column="ischeckno"/>
	<!-- <result property="batchno" column="batchno"/> -->
</resultMap>
<resultMap id="RM.ModelList.changeallinfo" class="com.terrence.crm.dol.bean.ModelList">
	<result property="id" column="id"/>
	<result property="itemcode" column="itemcode"/>
	<result property="itemname" column="itemname"/>
	<result property="fmodel" column="fmodel"/>
	<result property="fcount" column="fcount"/>
	<result property="manualfcount" column="manualfcount"/>
	<result property="modifycount" column="modifycount"/>
	<result property="fmatrial" column="fmatrial"/>
	<result property="fmark" column="fmark"/>
	<result property="changemark" column="changemark"/>
	<result property="stocks" column="stocks"/>
	<result property="createTime" column="createTime"/>
</resultMap>
<!-- 用于select查询公用抽取的列 -->
<sql id="ModelList.columns">
	$modelMark$.id ,
	$modelMark$.itemcode ,
	$modelMark$.itemname ,
	$modelMark$.fmodel ,
	$modelMark$.fcount ,
	$modelMark$.manualfcount ,
	$modelMark$.fmatrial ,
	$modelMark$.fmark ,
	$modelMark$.slen ,
	$modelMark$.alen ,
	$modelMark$.sweight ,
	$modelMark$.aweight ,
	$modelMark$.checkno ,
	$modelMark$.dispenserId ,
	$modelMark$.dispenserName ,
	$modelMark$.receiverId ,
	$modelMark$.receiverName ,
	$modelMark$.checkerId ,
	$modelMark$.checkerName ,
	$modelMark$.baitDate ,
	$modelMark$.planreachTime ,
	$modelMark$.createTime ,
	$modelMark$.createrId ,
	$modelMark$.createrName ,
	$modelMark$.designassistId,
	$modelMark$.bdtId ,
	$modelMark$.modelId ,
	$modelMark$.isdispatch  ,
	$modelMark$.sourceType ,
	$modelMark$.bomversion ,
	$modelMark$.changestatus,
	$modelMark$.changemark,
	$modelMark$.modifycount  
</sql>

<insert id="ModelList.insert" >
	<![CDATA[
	INSERT INTO $modelMark$ (
		itemcode,
		itemname,
		fmodel,
		fcount,
		manualfcount,
		fmatrial,
		fmark,
		slen,
		alen,
		sweight,
		aweight,
		checkno,
		dispenserId,
		dispenserName,
		receiverId,
		receiverName,
		checkerId,
		checkerName,
		baitDate,
		planreachTime,
		createTime,
		createrId,
		createrName,
		designassistId,
		bdtId ,
		isdispatch ,
		modelId ,
		sourceType ,
		bomversion ,
		changestatus ,
		changemark ,
		modifycount  
	) VALUES (
		#itemcode#,
		#itemname#,
		#fmodel#,
		#fcount#,
		#manualfcount#,
		#fmatrial#,
		#fmark#,
		#slen#,
		#alen#,
		#sweight#,
		#aweight#,
		#checkno#,
		#dispenserId#,
		#dispenserName#,
		#receiverId#,
		#receiverName#,
		#checkerId#,
		#checkerName#,
		#baitDate#,
		#planreachTime#,
		#createTime#,
		#createrId#,
		#createrName#,
		#designassistId#,
		#bdtId# ,
		#isdispatch# ,
		#modelId# ,
		#sourceType# ,
		#bomversion# ,
		#changestatus#,
		#changemark#,
		#modifycount# 
	)
	]]>
	<selectKey resultClass="java.lang.Long" type="post" keyProperty="id" >
		SELECT  @@identity  AS  ID
	</selectKey>
</insert>

<update id="ModelList.update" parameterClass="com.terrence.crm.dol.bean.ModelList"> 
	UPDATE $modelMark$ 
	<dynamic prepend="SET">
		<isNotEmpty prepend="," property="itemcode">
			itemcode = #itemcode# 
		</isNotEmpty>
		<isNotEmpty prepend="," property="itemname">
			itemname = #itemname# 
		</isNotEmpty>
		<isNotEmpty prepend="," property="fmodel">
			fmodel = #fmodel# 
		</isNotEmpty>
		<isNotEmpty prepend="," property="fcount">
			fcount = #fcount# 
		</isNotEmpty>
		<isNotEmpty prepend="," property="manualfcount">
			manualfcount = #manualfcount# 
		</isNotEmpty>
		<isNotEmpty prepend="," property="fmatrial">
			fmatrial = #fmatrial# 
		</isNotEmpty>
		<isNotEmpty prepend="," property="fmark">
			fmark = #fmark# 
		</isNotEmpty>
		<isNotEmpty prepend="," property="slen">
			slen = #slen# 
		</isNotEmpty>
		<isNotEmpty prepend="," property="alen">
			alen = #alen# 
		</isNotEmpty>
		<isNotEmpty prepend="," property="sweight">
			sweight = #sweight# 
		</isNotEmpty>
		<isNotEmpty prepend="," property="aweight">
			aweight = #aweight# 
		</isNotEmpty>
		<isNotEmpty prepend="," property="checkno">
			checkno = #checkno# 
		</isNotEmpty>
		<isNotEmpty prepend="," property="dispenserId">
			dispenserId = #dispenserId# 
		</isNotEmpty>
		<isNotEmpty prepend="," property="dispenserName">
			dispenserName = #dispenserName# 
		</isNotEmpty>
		<isNotEmpty prepend="," property="receiverId">
			receiverId = #receiverId# 
		</isNotEmpty>
		<isNotEmpty prepend="," property="receiverName">
			receiverName = #receiverName# 
		</isNotEmpty>
		<isNotEmpty prepend="," property="checkerId">
			checkerId = #checkerId# 
		</isNotEmpty>
		<isNotEmpty prepend="," property="checkerName">
			checkerName = #checkerName# 
		</isNotEmpty>
		<isNotEmpty prepend="," property="baitDate">
			baitDate = #baitDate# 
		</isNotEmpty>
		<isNotEmpty prepend="," property="planreachTime">
			planreachTime = #planreachTime# 
		</isNotEmpty>
		<isNotEmpty prepend="," property="createTime">
			createTime = #createTime# 
		</isNotEmpty>
		<isNotEmpty prepend="," property="createrId">
			createrId = #createrId# 
		</isNotEmpty>
		<isNotEmpty prepend="," property="createrName">
			createrName = #createrName# 
		</isNotEmpty>
		<isNotEmpty prepend="," property="designassistId">
			designassistId = #designassistId# 
		</isNotEmpty>
		<isNotEmpty prepend="," property="bdtId">
			bdtId = #bdtId# 
		</isNotEmpty>
		<isNotEmpty prepend="," property="modelId">
			modelId = #modelId# 
		</isNotEmpty>
		<isNotEmpty prepend="," property="isdispatch">
			isdispatch = #isdispatch# 
		</isNotEmpty>
		<isEmpty prepend="," property="isdispatch">
			isdispatch = null 
		</isEmpty>
		<isNotEmpty prepend="," property="sourceType">
			sourceType = #sourceType# 
		</isNotEmpty>
		<isNotEmpty prepend="," property="bomversion">
			bomversion = #bomversion# 
		</isNotEmpty>
		<isNotEmpty prepend="," property="changestatus">
			changestatus = #changestatus# 
		</isNotEmpty>
		<isEmpty prepend="," property="changestatus">
			changestatus = null 
		</isEmpty>
		<isNotEmpty prepend="," property="changemark">
			changemark = #changemark# 
		</isNotEmpty>
		<isNotEmpty prepend="," property="modifycount">
			modifycount = #modifycount# 
		</isNotEmpty>
		<isEmpty prepend="," property="modifycount">
			modifycount = null 
		</isEmpty>
	</dynamic>
 	WHERE id=#id# 
</update>

<sql id="ModelList.findPage.where">
	<dynamic prepend="WHERE">
		<isNotEmpty prepend="AND" property="id">
			$modelMark$.id = #id# 
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="itemcode">
			$modelMark$.itemcode = #itemcode# 
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="itemname">
			$modelMark$.itemname like ('%$itemname$%')
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="fmodel">
			$modelMark$.fmodel = #fmodel# 
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="fcount">
			$modelMark$.fcount = #fcount# 
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="manualfcount">
			$modelMark$.manualfcount = #manualfcount# 
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="fmatrial">
			$modelMark$.fmatrial = #fmatrial# 
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="fmark">
			$modelMark$.fmark = #fmark# 
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="slen">
			$modelMark$.slen = #slen# 
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="alen">
			$modelMark$.alen = #alen# 
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="sweight">
			$modelMark$.sweight = #sweight# 
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="aweight">
			$modelMark$.aweight = #aweight# 
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="checkno">
			$modelMark$.checkno = #checkno# 
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="dispenserId">
			$modelMark$.dispenserId = #dispenserId# 
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="dispenserName">
			$modelMark$.dispenserName = #dispenserName# 
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="receiverId">
			$modelMark$.receiverId = #receiverId# 
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="receiverName">
			$modelMark$.receiverName = #receiverName# 
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="checkerId">
			$modelMark$.checkerId = #checkerId# 
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="checkerName">
			$modelMark$.checkerName = #checkerName# 
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="baitDate">
			$modelMark$.baitDate = #baitDate# 
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="planreachTime">
			$modelMark$.planreachTime = #planreachTime# 
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="createTime">
			$modelMark$.createTime = #createTime# 
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="createrId">
			$modelMark$.createrId = #createrId# 
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="createrName">
			$modelMark$.createrName = #createrName# 
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="designassistId">
			$modelMark$.designassistId = #designassistId# 
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="bdtId">
			$modelMark$.bdtId = #bdtId# 
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="modelId">
			$modelMark$.modelId = #modelId# 
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="isdispatch">
			$modelMark$.isdispatch = #isdispatch# 
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="sourceType">
			$modelMark$.sourceType = #sourceType# 
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="bomversion">
			$modelMark$.bomversion = #bomversion# 
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="manualfcount">
			$modelMark$.manualfcount = #manualfcount# 
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="changestatus">
			$modelMark$.changestatus = #changestatus# 
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="changemark">
			$modelMark$.changemark = #changemark# 
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="modifycount">
			$modelMark$.modifycount = #modifycount# 
		</isNotEmpty>
	</dynamic>
</sql>

<sql id="ModelList.findPage.and">
	<isNotEmpty prepend="AND" property="id">
		$modelMark$.id = #id# 
	</isNotEmpty>
	<!-- <isNotEmpty prepend="AND" property="modelMark">
		$modelMark$.modelMark = $modelMark$ 
	</isNotEmpty> -->
	<isNotEmpty prepend="AND" property="itemcode">
		$modelMark$.itemcode = #itemcode# 
	</isNotEmpty>
	<isNotEmpty prepend="AND" property="itemname">
		$modelMark$.itemname like ('%$itemname$%')
	</isNotEmpty>
	<isNotEmpty prepend="AND" property="fmodel">
		$modelMark$.fmodel = #fmodel# 
	</isNotEmpty>
	<isNotEmpty prepend="AND" property="fcount">
		$modelMark$.fcount = #fcount# 
	</isNotEmpty>
	<isNotEmpty prepend="AND" property="manualfcount">
		$modelMark$.manualfcount = #manualfcount# 
	</isNotEmpty>
	<isNotEmpty prepend="AND" property="fmatrial">
		$modelMark$.fmatrial = #fmatrial# 
	</isNotEmpty>
	<isNotEmpty prepend="AND" property="fmark">
		$modelMark$.fmark = #fmark# 
	</isNotEmpty>
	<isNotEmpty prepend="AND" property="slen">
		$modelMark$.slen = #slen# 
	</isNotEmpty>
	<isNotEmpty prepend="AND" property="alen">
		$modelMark$.alen = #alen# 
	</isNotEmpty>
	<isNotEmpty prepend="AND" property="sweight">
		$modelMark$.sweight = #sweight# 
	</isNotEmpty>
	<isNotEmpty prepend="AND" property="aweight">
		$modelMark$.aweight = #aweight# 
	</isNotEmpty>
	<isNotEmpty prepend="AND" property="checkno">
		$modelMark$.checkno = #checkno# 
	</isNotEmpty>
	<isNotEmpty prepend="AND" property="dispenserId">
		$modelMark$.dispenserId = #dispenserId# 
	</isNotEmpty>
	<isNotEmpty prepend="AND" property="dispenserName">
		$modelMark$.dispenserName = #dispenserName# 
	</isNotEmpty>
	<isNotEmpty prepend="AND" property="receiverId">
		$modelMark$.receiverId = #receiverId# 
	</isNotEmpty>
	<isNotEmpty prepend="AND" property="receiverName">
		$modelMark$.receiverName = #receiverName# 
	</isNotEmpty>
	<isNotEmpty prepend="AND" property="checkerId">
		$modelMark$.checkerId = #checkerId# 
	</isNotEmpty>
	<isNotEmpty prepend="AND" property="checkerName">
		$modelMark$.checkerName = #checkerName# 
	</isNotEmpty>
	<isNotEmpty prepend="AND" property="baitDate">
		$modelMark$.baitDate = #baitDate# 
	</isNotEmpty>
	<isNotEmpty prepend="AND" property="planreachTime">
		$modelMark$.planreachTime = #planreachTime# 
	</isNotEmpty>
	<isNotEmpty prepend="AND" property="createTime">
		$modelMark$.createTime = #createTime# 
	</isNotEmpty>
	<isNotEmpty prepend="AND" property="createrId">
		$modelMark$.createrId = #createrId# 
	</isNotEmpty>
	<isNotEmpty prepend="AND" property="createrName">
		$modelMark$.createrName = #createrName# 
	</isNotEmpty>
	<isNotEmpty prepend="AND" property="designassistId">
		$modelMark$.designassistId = #designassistId# 
	</isNotEmpty>
	<isNotEmpty prepend="AND" property="bdtId">
		$modelMark$.bdtId = #bdtId# 
	</isNotEmpty>
	<isNotEmpty prepend="AND" property="modelId">
		$modelMark$.modelId = #modelId# 
	</isNotEmpty>
	<isNotEmpty prepend="AND" property="isdispatch">
		$modelMark$.isdispatch = #isdispatch# 
	</isNotEmpty>
	<isNotEmpty prepend="AND" property="sourceType">
		$modelMark$.sourceType = #sourceType# 
	</isNotEmpty>
	<isNotEmpty prepend="AND" property="bomversion">
		$modelMark$.bomversion = #bomversion# 
	</isNotEmpty>
	<isNotEmpty prepend="AND" property="manualfcount">
		$modelMark$.manualfcount = #manualfcount# 
	</isNotEmpty>
	<isNotEmpty prepend="AND" property="changestatus">
		$modelMark$.changestatus = #changestatus# 
	</isNotEmpty>
	<isNotEmpty prepend="AND" property="changemark">
		$modelMark$.changemark = #changemark# 
	</isNotEmpty>
	<isNotEmpty prepend="AND" property="modifycount">
		$modelMark$.modifycount = #modifycount# 
	</isNotEmpty>
</sql>

<select id="ModelList.getById" resultMap="RM.ModelList">
	select <include refid="ModelList.columns"/> ,tbt.fileName fileName 
	FROM $modelMark$ 
	left join t_bomdraw_title tbt on $modelMark$.bdtId = tbt.id  where $modelMark$.id=#id#
</select>

<select id="ModelList.getByProperty" resultMap="RM.ModelList">
	select <include refid="ModelList.columns"/>,tbt.fileName fileName 
	FROM $modelMark$ 
	left join t_bomdraw_title tbt on $modelMark$.bdtId = tbt.id  where $propertyName$=#propertyValue#
</select>

<delete id="ModelList.delete">
	<![CDATA[
		DELETE FROM $modelMark$ WHERE id=#id#
	]]>
</delete>
<delete id="ModelList.deleteMultiple">
	<![CDATA[
		DELETE FROM $modelMark$ WHERE id in ($id$)
	]]>
</delete>
<delete id="ModelList.delete.bybomdrawId">
	<![CDATA[
		DELETE FROM $modelMark$ WHERE bdtId=#bdtId# and sourceType = 2 
	]]>
</delete>
<delete id="ModelList.delete.byId">
	<![CDATA[
		DELETE FROM $modelMark$ WHERE id=#id# 
	]]>
</delete>
<select id="ModelList.findPage.count" resultClass="long">
	select count(*) from $modelMark$ <include refid="ModelList.findPage.where"/>
</select>

<select id="ModelList.findPage" resultMap="RM.ModelList">
	select <include refid="ModelList.columns"/> ,tbt.fileName fileName 
	FROM $modelMark$  
	left join t_bomdraw_title tbt on $modelMark$.bdtId = tbt.id 
 		where 1=1
	<isNotEmpty property="notTop">  
		and $modelMark$.id not in(
			select $notTop$ $modelMark$.id from $modelMark$ <include refid="ModelList.findPage.where"/>
			<isNotEmpty property="sortColumns"> 
				ORDER BY $sortColumns$
			</isNotEmpty> 
		)
	</isNotEmpty> 
	<include refid="ModelList.findPage.and"/>
	<isNotEmpty property="sortColumns">
		ORDER BY $sortColumns$
	</isNotEmpty>
</select>

<select id="ModelList.findList" resultMap="RM.ModelList.findList">
	SELECT <include refid="ModelList.columns"/> ,tbt.fileName fileName,t_base_item.unitname,
	tbt.itemcode drawitemcode,tbt.fname drawitemname,tbt.fmodel drawitemmode,tbt.bomDrawType drawtype,tbt.mfcount mfcount  
	FROM $modelMark$  
	left join t_bomdraw_title tbt on $modelMark$.bdtId = tbt.id 
	left join t_base_item on $modelMark$.itemcode=t_base_item.itemcode
	<include refid="ModelList.findPage.where"/>
	<isNotEmpty property="sortColumns">
		ORDER BY $sortColumns$
	</isNotEmpty>
</select>

<select id="ModelList.findList.Callslip" resultMap="RM.ModelList.Callslip">
	SELECT 
		tm.id ,
		tm.itemcode ,
		tm.itemname,
		tm.fmodel ,
		tm.fcount ,
		tm.fmatrial ,
		tm.fmark ,
		tm.slen ,
		tm.alen ,
		tm.sweight ,
		tm.aweight ,
		tm.checkno ,
		tm.dispenserId ,
		tm.dispenserName ,
		tm.receiverId ,
		tm.receiverName ,
		tm.checkerId ,
		tm.checkerName ,
		tm.baitDate ,
		tm.planreachTime ,
		tm.createTime ,
		tm.createrId ,
		tm.createrName ,
		tm.designassistId,
		<!-- tib.fqty stocks, -->
		tbi.unitname unitname ,
		0 isserialize,
		1 ischeckno
		<!-- ,tib.batchno -->
	 FROM $modelMark$ tm 
	 <!-- left join t_inventory_batch tib on tm.itemcode = tib.itemcode  -->
	 left join t_base_item tbi on tm.itemcode = tbi.itemcode 
	where tm.designassistId = #designassistId# 
</select>
<select id="ModelList.find.bygroupid" resultMap="RM.ModelList">
	SELECT <include refid="ModelList.columns"/> ,tbt.fileName fileName 
	FROM $modelMark$  
	left join t_bomdraw_title tbt on $modelMark$.bdtId = tbt.id 
	<isEqual property="modelMark" compareValue="t_model_list">
		where $modelMark$.id in($ids$)
	</isEqual>
	<isNotEqual property="modelMark" compareValue="t_model_list">
		where $modelMark$.modelId in($ids$)
	</isNotEqual>
</select>
<select id="ModelList.find.bychangeallinfo" resultMap="RM.ModelList.changeallinfo"><!-- 此处manualcount:已审的出库单数量，modifycount：未审的出库单数量，stocks：计划中的数量 -->
	select tbl.id,tbl.fcount,tbl.itemcode itemcode,itemname,fmodel,fmatrial,tt.fqty manualfcount,tt1.fqty modifycount ,tcd.planoutcount stocks,tbl.changemark,tbl.createTime,tbl.fmark 
	 from t_bomchange_list tbl 
        left join (select sum(planoutcount) planoutcount,itemcode from t_callslip_detail where callslipId in (select id from t_callslip where storeroomId=(select id from t_storeroom_task where sourceId=#designassistId#)) group by planoutcount,itemcode) tcd on tbl.itemcode = tcd.itemcode
        left join (select ttemp.itemcode,sum(fqtytemp) fqty from t_picking 
			left join (select pickingid,itemcode,SUM(fqty) fqtytemp from t_picking_detail group by pickingid,itemcode) ttemp 
        on t_picking.pickingid=ttemp.pickingid where callslipcode in (select callslipcode from t_callslip where storeroomId=(select id from t_storeroom_task where sourceId=#designassistId#) and fstatus=100)
        group by ttemp.itemcode,fstatus) tt on tbl.itemcode = tt.itemcode  
        left join (select ttemp.itemcode,sum(fqtytemp) fqty from t_picking 
			left join (select pickingid,itemcode,SUM(fqty) fqtytemp from t_picking_detail group by pickingid,itemcode) ttemp 
        on t_picking.pickingid=ttemp.pickingid where callslipcode in (select callslipcode from t_callslip where storeroomId=(select id from t_storeroom_task where sourceId=#designassistId#) and fstatus!=100)
        group by ttemp.itemcode) tt1 on tbl.itemcode = tt1.itemcode  
        where tbl.designassistId=#designassistId# 
</select>
</sqlMap>