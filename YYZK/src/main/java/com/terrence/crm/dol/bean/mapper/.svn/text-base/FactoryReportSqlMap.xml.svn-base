<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" 
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="FactoryReport">

        
	<resultMap id="RM.FactoryReport" class="com.terrence.crm.dol.bean.FactoryReport">
        <result property="reportid" column="reportid"/>
        <result property="itemcode" column="itemcode"/>
        <result property="itemname" column="itemname"/>
        <result property="itemmode" column="itemmode"/>
        <result property="serial" column="serial"/>
        <result property="fname" column="fname"/>
        <result property="fpath" column="fpath"/>
        <result property="createdate" column="createdate"/>
        <result property="reportno" column="reportno"/>
        <result property="reportdate" column="reportdate"/>
        <result property="orderno" column="orderno"/>
        <result property="customername" column="customername"/>
        <result property="fmodel1" column="fmodel1"/>
        <result property="fmodel2" column="fmodel2"/>
        <result property="fmodel3" column="fmodel3"/>
        <result property="fserial1" column="fserial1"/>
        <result property="fserial2" column="fserial2"/>
        <result property="fserial3" column="fserial3"/>
        <result property="billno" column="billno"/>
        <result property="pdtype" column="pdtype"/>
        <result property="empid" column="empid"/>
        <result property="qc" column="qc"/>
        <result property="qcdate" column="qcdate"/>
        <result property="viewemp" column="viewemp"/>
        <result property="viewdate" column="viewdate"/>
        <result property="picpath" column="picpath"/>
        <result property="picpath2" column="picpath2"/>
        <result property="quantity" column="quantity"/>
        <result property="productmode" column="productmode"/>			
        <result property="productName" column="productName"/>	
    </resultMap>
	
		<resultMap id="RM.FactoryReport.and.valveParts.data" class="com.terrence.crm.dol.bean.FactoryReport">
        <result property="reportid" column="reportid"/>
        <result property="itemcode" column="itemcode"/>
        <result property="itemname" column="itemname"/>
        <result property="itemmode" column="itemmode"/>
        <result property="serial" column="serial"/>
        <result property="fname" column="fname"/>
        <result property="fpath" column="fpath"/>
        <result property="createdate" column="createdate"/>
        <result property="reportno" column="reportno"/>
        <result property="reportdate" column="reportdate"/>
        <result property="orderno" column="orderno"/>
        <result property="customername" column="customername"/>
        <result property="fmodel1" column="fmodel1"/>
        <result property="fmodel2" column="fmodel2"/>
        <result property="fmodel3" column="fmodel3"/>
        <result property="fserial1" column="fserial1"/>
        <result property="fserial2" column="fserial2"/>
        <result property="fserial3" column="fserial3"/>
        <result property="billno" column="billno"/>
        <result property="pdtype" column="pdtype"/>
        <result property="empid" column="empid"/>
        <result property="qc" column="qc"/>
        <result property="qcdate" column="qcdate"/>
        <result property="viewemp" column="viewemp"/>
        <result property="viewdate" column="viewdate"/>
        
        <result property="picpath" column="picpath"/>
        <result property="picpath2" column="picpath2"/>
        
        <result property="vpartsList" column="reportid" select="select.valveParts.data.in.FactoryReport"/>
        
        <result property="freportList" column="serial" select="select.factoryreport.data"/>
        <result property="quantity" column="quantity"/>
        <result property="productmode" column="productmode"/>			
        <result property="productName" column="productName"/>	
    </resultMap>
	
	  <resultMap id="valveParts.data.FactoryReport" class="com.terrence.crm.dol.bean.ValveParts">
        <result property="id" column="id"/>
        <result property="reportid" column="reportid"/>
        <result property="itemcode" column="itemcode"/>
        <result property="itemname" column="itemname"/>
        <result property="itemmode" column="itemmode"/>
        <result property="material" column="material"/>
        <result property="batchno" column="batchno"/>
        <result property="type" column="type"/>
        <result property="stockemp" column="stockemp"/> 
        <result property="checkname" column="checkname"/>  
    </resultMap>
	
	<resultMap id="RM.FactoryReport.showByOrderno" class="com.terrence.crm.dol.bean.FactoryReport">
        
        <result property="reportid" column="reportid"/>
        <result property="itemcode" column="itemcode"/>
        <result property="itemname" column="itemname"/>
        <result property="itemmode" column="itemmode"/>
        <result property="serial" column="serial"/>
        <result property="fname" column="fname"/>
        <result property="fpath" column="fpath"/>
        <result property="createdate" column="createdate"/>
        <result property="reportno" column="reportno"/>
        <result property="reportdate" column="reportdate"/>
        <result property="orderno" column="orderno"/>
        <result property="customername" column="customername"/>
        <result property="fmodel1" column="fmodel1"/>
        <result property="fmodel2" column="fmodel2"/>
        <result property="fmodel3" column="fmodel3"/>
        <result property="fserial1" column="fserial1"/>
        <result property="fserial2" column="fserial2"/>
        <result property="fserial3" column="fserial3"/>
        <result property="billno" column="billno"/>
        <result property="pdtype" column="pdtype"/>
        <result property="empid" column="empid"/>
        <result property="qc" column="qc"/>
        <result property="qcdate" column="qcdate"/>
        <result property="viewemp" column="viewemp"/>
        <result property="viewdate" column="viewdate"/>
        <result property="tecid" column="tecid"/>
        <result property="tplid" column="tplid"/>
        
        <result property="ordersproductlist" column="{itemcode=itemcode,orderno=orderno}" select="FactoryReport.ordersproductlist.showByOrderno"/>
        <result property="quantity" column="quantity"/>	
        <result property="productmode" column="productmode"/>			
        <result property="productName" column="productName"/>					
    </resultMap>
	 
	<resultMap id="maxreportno.data.FactoryReport" class="com.terrence.crm.dol.bean.FactoryReport">
        <result property="reportno" column="reportno"/>  
    </resultMap>
	<resultMap id="RM.FactoryReport.ordersproductlist.showByOrderno" class="com.terrence.crm.dol.bean.OrdersProduct">
		  <result property="id" column="id"/>
			<result property="orderid" column="orderid"/>
			<result property="fbillno" column="fbillno"/>
			<result property="createtime" column="createtime"/>
			<result property="priority" column="priority"/>
			<result property="itemcode" column="itemcode"/>
			<result property="itemname" column="itemname"/>
			<result property="itemmode" column="itemmode"/>
			<result property="amount" column="amount"/>
			<result property="mininpressure" column="mininpressure"/>
			<result property="maxinpressure" column="maxinpressure"/>
			<result property="minoutpressure" column="minoutpressure"/>
			<result property="maxoutpressure" column="maxoutpressure"/>
			<result property="outpressure" column="outpressure"/>
			<result property="turnpressue" column="turnpressue"/>
			<result property="blowpressure" column="blowpressure"/>
			<result property="fclose" column="fclose"/>
			<result property="unitname" column="unitname"/>
			<result property="deleverydate" column="deleverydate"/>
			<result property="innum" column="innum"/>
			<result property="existednums" column="existednums"/>
			<result property="planednum" column="planednum"/>
			<result property="making" column="making"/>
			<result property="youtput" column="youtput"/>
			<result property="cyclename" column="cyclename"/>
			<result property="ratio" column="ratio"/>
			<result property="lastinnum" column="lastinnum"/>
			<result property="morehighpressure" column="morehighpressure"/>
			<result property="morelowpressure" column="morelowpressure"/>
			<result property="ftaxprice" column="ftaxprice"/>
			<result property="fprice" column="fprice"/>
			<result property="fallamount" column="fallamount"/>
			<result property="famount" column="famount"/>
			<result property="fcess" column="fcess"/>
			<result property="ftaxamount" column="ftaxamount"/>
			<result property="fpricediscount" column="fpricediscount"/>
			<result property="fstockqty" column="fstockqty"/>
			<result property="unitid" column="unitid"/>
			<result property="notes" column="notes"/>
   
    </resultMap>  
	  
	  
	  

	<!-- 用于select查询公用抽取的列 -->
	<sql id="FactoryReport.columns">
	    <![CDATA[
        	t_factory_report.reportid ,
        	t_factory_report.itemcode ,
        	t_factory_report.itemname ,
        	t_factory_report.itemmode ,
        	t_factory_report.serial ,
        	t_factory_report.fname ,
        	t_factory_report.fpath ,
        	t_factory_report.createdate ,
        	t_factory_report.reportno ,
        	t_factory_report.reportdate ,
        	t_factory_report.orderno ,
        	t_factory_report.customername ,
        	t_factory_report.fmodel1 ,
        	t_factory_report.fmodel2 ,
        	t_factory_report.fmodel3 ,
        	t_factory_report.fserial1 ,
        	t_factory_report.fserial2 ,
        	t_factory_report.fserial3 ,
        	t_factory_report.billno ,
        	t_factory_report.pdtype ,
        	t_factory_report.empid ,
        	t_factory_report.qc ,
        	t_factory_report.qcdate ,
        	t_factory_report.viewemp ,
        	t_factory_report.viewdate,
        	t_factory_report.picpath,
        	t_factory_report.picpath2,
        	t_factory_report.quantity,
        	t_factory_report.productmode,
        	t_factory_report.productName
	    ]]>
	</sql>
	
   <insert id="FactoryReport.insert" >
    <![CDATA[
        INSERT INTO
        t_factory_report (
        	itemcode ,
        	itemname ,
        	itemmode ,
        	serial ,
        	fname ,
        	fpath ,
        	createdate ,
        	reportno ,
        	reportdate ,
        	orderno ,
        	customername ,
        	fmodel1 ,
        	fmodel2 ,
        	fmodel3 ,
        	fserial1 ,
        	fserial2 ,
        	fserial3 ,
        	billno ,
        	pdtype ,
        	empid ,
        	qc ,
        	qcdate ,
        	viewemp ,
        	viewdate ,
        	picpath2,
        	picpath,
        	quantity,
        	productmode,
        	productName
        ) VALUES (
        	#itemcode# ,
        	#itemname# ,
        	#itemmode# ,
        	#serial# ,
        	#fname# ,
        	#fpath# ,
        	#createdate# ,
        	#reportno# ,
        	#reportdate# ,
        	#orderno# ,
        	#customername# ,
        	#fmodel1# ,
        	#fmodel2# ,
        	#fmodel3# ,
        	#fserial1# ,
        	#fserial2# ,
        	#fserial3# ,
        	#billno# ,
        	#pdtype# ,
        	#empid# ,
        	#qc# ,
        	#qcdate# ,
        	#viewemp# ,
        	#viewdate#,
        	#picpath2#,
        	#picpath# ,
        	#quantity#,
        	#productmode#,
        	#productName#
        )
    ]]> 
    <!--
    mysql:		type="post" SELECT  select last_insert_id()
    sqlserver:	type="post" SELECT  @@identity  AS  ID
    oracle:		type="pre" 	SELECT  sequenceName.nextval AS ID FROM DUAL
    DB2:		type="pre"	values nextval for sequenceName
    -->
        <selectKey resultClass="java.lang.Long" type="post" keyProperty="reportid" >
            SELECT  @@identity  AS  ID
        </selectKey>
    </insert>
    
    
    <insert id="factoryReport.insert.save.data.new" >
    
        INSERT INTO
        t_factory_report (itemcode
        	
	        <isNotEmpty prepend="," property="itemname">
	        	itemname
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="itemmode">
	        	itemmode
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="serial">
	        	serial
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="fname">
	        	fname 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="fpath">
	        	fpath
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="createdate">
	        	createdate
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="reportno">
	        	reportno
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="reportdate">
	        	reportdate
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="orderno">
	        	orderno
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="customername">
	        	customername
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="fmodel1">
	        	fmodel1
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="fmodel2">
	        	fmodel2
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="fmodel3">
	        	fmodel3
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="fserial1">
	        	fserial1
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="fserial2">
	        	fserial2 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="fserial3">
	        	fserial3
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="billno">
	        	billno
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="pdtype">
	        	pdtype
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="empid">
	        	empid
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="qc">
	        	qc
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="qcdate">
	        	qcdate
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="viewemp">
	        	viewemp
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="viewdate">
	        	viewdate
	        </isNotEmpty>
	        
	         <isNotEmpty prepend="," property="picpath">
	        	picpath
	        </isNotEmpty>
	         <isNotEmpty prepend="," property="picpath2">
	        	picpath2
	        </isNotEmpty>
	         <isNotEmpty prepend="," property="quantity">
	        	quantity
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="productmode">
	        	productmode
	        </isNotEmpty>
	         <isNotEmpty prepend="," property="productName">
	        	productName
	        </isNotEmpty>
        ) VALUES (#itemcode# 
        	
	        <isNotEmpty prepend="," property="itemname">
	        	#itemname# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="itemmode">
	        	#itemmode# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="serial">
	        	#serial# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="fname">
	        	#fname# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="fpath">
	        	#fpath# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="createdate">
	        	#createdate# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="reportno">
	        	#reportno# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="reportdate">
	        	#reportdate# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="orderno">
	        	#orderno# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="customername">
	        	#customername# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="fmodel1">
	        	#fmodel1# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="fmodel2">
	        	#fmodel2# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="fmodel3">
	        	#fmodel3# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="fserial1">
	        	#fserial1# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="fserial2">
	        	#fserial2# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="fserial3">
	        	#fserial3# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="billno">
	        	#billno# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="pdtype">
	        	#pdtype# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="empid">
	        	#empid# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="qc">
	        	#qc# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="qcdate">
	        	#qcdate# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="viewemp">
	        	#viewemp# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="viewdate">
	        	#viewdate# 
	        </isNotEmpty>
	         <isNotEmpty prepend="," property="picpath">
	        	#picpath#
	        </isNotEmpty>
	         <isNotEmpty prepend="," property="picpath2">
	        	#picpath2#
	        </isNotEmpty>
	         <isNotEmpty prepend="," property="quantity">
	        	#quantity#
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="productmode">
	        	#productmode#
	        </isNotEmpty>
	         <isNotEmpty prepend="," property="productName">
	        	#productName#
	        </isNotEmpty>
        )
   
    <!--
    mysql:		type="post" SELECT  select last_insert_id()
    sqlserver:	type="post" SELECT  @@identity  AS  ID
    oracle:		type="pre" 	SELECT  sequenceName.nextval AS ID FROM DUAL
    DB2:		type="pre"	values nextval for sequenceName
    -->
        <selectKey resultClass="java.lang.Long" type="post" keyProperty="reportid" >
            SELECT  @@identity  AS  ID
        </selectKey>
    </insert>
    
    <insert id="FactoryReport.insert.newreport" ><!-- 保存数据 -->
   
        INSERT INTO
        t_factory_report (
       		createdate
        	<isNotEmpty prepend="," property="itemcode">
	        	itemcode
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="itemname">
	        	itemname
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="itemmode">
	        	itemmode
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="serial">
	        	serial
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="fname">
	        	fname
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="fpath">
	        	fpath
	        </isNotEmpty>
	           <isNotEmpty prepend="," property="picpath">
	        	picpath
	        </isNotEmpty>
	         <isNotEmpty prepend="," property="picpath2">
	        	picpath2
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="quantity">
	        	quantity
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="productmode">
	        	productmode
	        </isNotEmpty>
	         <isNotEmpty prepend="," property="productName">
	        	productName
	        </isNotEmpty>
        ) VALUES (
       	 CONVERT(VARCHAR(24),GETDATE(),120)
        	<isNotEmpty prepend="," property="itemcode">
	        	#itemcode# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="itemname">
	        	#itemname# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="itemmode">
	        	#itemmode# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="serial">
	        	#serial# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="fname">
	        	#fname# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="fpath">
	        	#fpath# 
	        </isNotEmpty>
	           <isNotEmpty prepend="," property="picpath">
	        	#picpath#
	        </isNotEmpty>
	         <isNotEmpty prepend="," property="picpath2">
	        	#picpath2#
	        </isNotEmpty>
	      <isNotEmpty prepend="," property="quantity">
	        	#quantity#
	        </isNotEmpty>
	         <isNotEmpty prepend="," property="productmode">
	        	#productmode#
	        </isNotEmpty>
	         <isNotEmpty prepend="," property="productName">
	        	#productName#
	        </isNotEmpty>
	        
        )
   
    <!--
    mysql:		type="post" SELECT  select last_insert_id()
    sqlserver:	type="post" SELECT  @@identity  AS  ID
    oracle:		type="pre" 	SELECT  sequenceName.nextval AS ID FROM DUAL
    DB2:		type="pre"	values nextval for sequenceName
    -->
        <selectKey resultClass="java.lang.Long" type="post" keyProperty="reportid" >
            SELECT  @@identity  AS  ID
        </selectKey>
    </insert>
    

	<update id="FactoryReport.update" parameterClass="com.terrence.crm.dol.bean.FactoryReport">         
        UPDATE t_factory_report 
        <dynamic prepend="SET">
	        <isNotEmpty prepend="," property="itemcode">
	        	itemcode = #itemcode# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="itemname">
	        	itemname = #itemname# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="itemmode">
	        	itemmode = #itemmode# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="serial">
	        	serial = #serial# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="fname">
	        	fname = #fname# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="fpath">
	        	fpath = #fpath# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="createdate">
	        	createdate = #createdate# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="reportno">
	        	reportno = #reportno# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="reportdate">
	        	reportdate = #reportdate# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="orderno">
	        	orderno = #orderno# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="customername">
	        	customername = #customername# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="fmodel1">
	        	fmodel1 = #fmodel1# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="fmodel2">
	        	fmodel2 = #fmodel2# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="fmodel3">
	        	fmodel3 = #fmodel3# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="fserial1">
	        	fserial1 = #fserial1# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="fserial2">
	        	fserial2 = #fserial2# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="fserial3">
	        	fserial3 = #fserial3# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="billno">
	        	billno = #billno# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="pdtype">
	        	pdtype = #pdtype# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="empid">
	        	empid = #empid# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="qc">
	        	qc = #qc# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="qcdate">
	        	qcdate = #qcdate# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="viewemp">
	        	viewemp = #viewemp# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="viewdate">
	        	viewdate = #viewdate# 
	        </isNotEmpty>
	          <isNotEmpty prepend="," property="picpath">
	        	picpath=#picpath#
	        </isNotEmpty>
	         <isNotEmpty prepend="," property="picpath2">
	        	picpath2=#picpath2#
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="quantity">
	        	quantity=#quantity#
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="productmode">
	        	productmode=#productmode#
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="productName">
	        	productName=#productName#
	        </isNotEmpty>
	    </dynamic>
        WHERE 
	        reportid = #reportid# 
    </update>
    
	<delete id="FactoryReport.delete" parameterClass="java.lang.Long">
    <![CDATA[
        delete from t_factory_report where
       reportid = #reportid# 
    ]]>
    </delete>
    
    <delete id="FactoryReport.deleteMultiple">
    <![CDATA[
        DELETE FROM 
        	t_factory_report 
        WHERE
       reportid in ($reportid$) 
    ]]>
    </delete>
    
    <select id="FactoryReport.getById" resultMap="RM.FactoryReport">
	    select <include refid="FactoryReport.columns"/>
	    
	        from t_factory_report 
	        where 
		        reportid = #reportid# 
	    
    </select>
    
	<select id="FactoryReport.getByProperty" resultMap="RM.FactoryReport">
		select <include refid="FactoryReport.columns"/> from t_factory_report where $propertyName$=#propertyValue#
	</select>
	
	<sql id="FactoryReport.findPage.where">
	    <dynamic prepend="WHERE">
			<isNotEmpty prepend="AND" property="reportid">
	             t_factory_report.reportid = #reportid#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="itemcode">
	             t_factory_report.itemcode = #itemcode#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="itemname">
	             t_factory_report.itemname = #itemname#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="itemmode">
	             t_factory_report.itemmode = #itemmode#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="serial">
	             t_factory_report.serial = #serial#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="fname">
	             t_factory_report.fname = #fname#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="fpath">
	             t_factory_report.fpath = #fpath#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="createdate">
	             t_factory_report.createdate = #createdate#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="reportno">
	             t_factory_report.reportno = #reportno#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="reportdate">
	             t_factory_report.reportdate = #reportdate#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="orderno">
	             t_factory_report.orderno = #orderno#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="customername">
	             t_factory_report.customername = #customername#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="fmodel1">
	             t_factory_report.fmodel1 = #fmodel1#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="fmodel2">
	             t_factory_report.fmodel2 = #fmodel2#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="fmodel3">
	             t_factory_report.fmodel3 = #fmodel3#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="fserial1">
	             t_factory_report.fserial1 = #fserial1#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="fserial2">
	             t_factory_report.fserial2 = #fserial2#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="fserial3">
	             t_factory_report.fserial3 = #fserial3#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="billno">
	             t_factory_report.billno = #billno#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="pdtype">
	             t_factory_report.pdtype = #pdtype#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="empid">
	             t_factory_report.empid = #empid#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="qc">
	             t_factory_report.qc = #qc#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="qcdate">
	             t_factory_report.qcdate = #qcdate#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="viewemp">
	             t_factory_report.viewemp = #viewemp#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="viewdateBegin">
	             t_factory_report.viewdate &gt;= #viewdateBegin#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="viewdateEnd">
	             t_factory_report.viewdate &lt;= #viewdateEnd#
	       </isNotEmpty>
	        <isNotEmpty prepend="AND" property="picpath">
	        	t_factory_report.picpath=#picpath#
	        </isNotEmpty>
	         <isNotEmpty prepend="AND" property="picpath2">
	        	t_factory_report.picpath2=#picpath2#
	        </isNotEmpty>
	    </dynamic>	
	</sql>
	 
    <sql id="FactoryReport.findPage.and">
			<isNotEmpty prepend="AND" property="reportid">
	             t_factory_report.reportid = #reportid#
	       </isNotEmpty>
			<isNotEmpty prepend="AND" property="itemcode">
	             t_factory_report.itemcode = #itemcode#
	       </isNotEmpty>
			<isNotEmpty prepend="AND" property="itemname">
	             t_factory_report.itemname = #itemname#
	       </isNotEmpty>
			<isNotEmpty prepend="AND" property="itemmode">
	             t_factory_report.itemmode = #itemmode#
	       </isNotEmpty>
			<isNotEmpty prepend="AND" property="serial">
	             t_factory_report.serial = #serial#
	       </isNotEmpty>
			<isNotEmpty prepend="AND" property="fname">
	             t_factory_report.fname = #fname#
	       </isNotEmpty>
			<isNotEmpty prepend="AND" property="fpath">
	             t_factory_report.fpath = #fpath#
	       </isNotEmpty>
			<isNotEmpty prepend="AND" property="createdate">
	             t_factory_report.createdate = #createdate#
	       </isNotEmpty>
			<isNotEmpty prepend="AND" property="reportno">
	             t_factory_report.reportno = #reportno#
	       </isNotEmpty>
			<isNotEmpty prepend="AND" property="reportdate">
	             t_factory_report.reportdate = #reportdate#
	       </isNotEmpty>
			<isNotEmpty prepend="AND" property="orderno">
	             t_factory_report.orderno = #orderno#
	       </isNotEmpty>
			<isNotEmpty prepend="AND" property="customername">
	             t_factory_report.customername = #customername#
	       </isNotEmpty>
			<isNotEmpty prepend="AND" property="fmodel1">
	             t_factory_report.fmodel1 = #fmodel1#
	       </isNotEmpty>
			<isNotEmpty prepend="AND" property="fmodel2">
	             t_factory_report.fmodel2 = #fmodel2#
	       </isNotEmpty>
			<isNotEmpty prepend="AND" property="fmodel3">
	             t_factory_report.fmodel3 = #fmodel3#
	       </isNotEmpty>
			<isNotEmpty prepend="AND" property="fserial1">
	             t_factory_report.fserial1 = #fserial1#
	       </isNotEmpty>
			<isNotEmpty prepend="AND" property="fserial2">
	             t_factory_report.fserial2 = #fserial2#
	       </isNotEmpty>
			<isNotEmpty prepend="AND" property="fserial3">
	             t_factory_report.fserial3 = #fserial3#
	       </isNotEmpty>
			<isNotEmpty prepend="AND" property="billno">
	             t_factory_report.billno = #billno#
	       </isNotEmpty>
			<isNotEmpty prepend="AND" property="pdtype">
	             t_factory_report.pdtype = #pdtype#
	       </isNotEmpty>
			<isNotEmpty prepend="AND" property="empid">
	             t_factory_report.empid = #empid#
	       </isNotEmpty>
			<isNotEmpty prepend="AND" property="qc">
	             t_factory_report.qc = #qc#
	       </isNotEmpty>
			<isNotEmpty prepend="AND" property="qcdate">
	             t_factory_report.qcdate = #qcdate#
	       </isNotEmpty>
			<isNotEmpty prepend="AND" property="viewemp">
	             t_factory_report.viewemp = #viewemp#
	       </isNotEmpty>
			<isNotEmpty prepend="AND" property="viewdateBegin">
	             t_factory_report.viewdate &gt;= #viewdateBegin#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="viewdateEnd">
	             t_factory_report.viewdate &lt;= #viewdateEnd#
	       </isNotEmpty>
	        <isNotEmpty prepend="AND" property="picpath">
	        	t_factory_report.picpath=#picpath#
	        </isNotEmpty>
	         <isNotEmpty prepend="AND" property="picpath2">
	        	t_factory_report.picpath2=#picpath2#
	        </isNotEmpty>
	</sql>
	
    <select id="FactoryReport.Entity" resultMap="RM.FactoryReport">
    	SELECT 	<include refid="FactoryReport.columns"/> FROM t_factory_report <include refid="FactoryReport.findPage.where"/>
    </select>
    
    <select id="FactoryReport.findList" resultMap="RM.FactoryReport">
    	SELECT 
    		<include refid="FactoryReport.columns"/> 
    	FROM 
    		t_factory_report
		<include refid="FactoryReport.findPage.where"/>
		<isNotEmpty property="sortColumns">
			ORDER BY $sortColumns$
		</isNotEmpty>
    </select>
    
    <select id="FactoryReport.findPage.count" resultClass="long">
    <![CDATA[
        select 
        count(*)
        from t_factory_report
    ]]>
		<include refid="FactoryReport.findPage.where"/>    
    </select>
    <!--
    	分页查询已经使用Dialect进行分页,也可以不使用Dialect直接编写分页
    	因为分页查询将传 #offset#,#pageSize#,#lastRows# 三个参数,不同的数据库可以根于此三个参数属性应用不同的分页实现
    -->
    <select id="Sql.FactoryReport.findPage" resultMap="RM.FactoryReport">
    	select <include refid="FactoryReport.columns"/>	    
	        from t_factory_report 	   
		<include refid="FactoryReport.findPage.where"/>		
		<isNotEmpty property="sortColumns">ORDER BY $sortColumns$</isNotEmpty>
		
    </select>
    
	<select id="FactoryReport.findPage" resultMap="RM.FactoryReport">
    	select <include refid="FactoryReport.columns"/>	    
	        from t_factory_report where 1=1 
	   <isNotEmpty property="notTop">  and 
       reportid 
	   not in(select $notTop$ 
       reportid 
	   from t_factory_report <include refid="FactoryReport.findPage.where"/>
	   	   <isNotEmpty property="sortColumns"> ORDER BY $sortColumns$	</isNotEmpty>) 
	   	</isNotEmpty>    
	   	<include refid="FactoryReport.findPage.and"/>
    	<isNotEmpty property="sortColumns">
			ORDER BY $sortColumns$
		</isNotEmpty>
    </select>
    
    
     <select id="FactoryReport.find.findpage.list.count" resultClass="long"><!-- 出厂报告列表查询 -->
	    <![CDATA[
	        select 
	        count(*)
	        from t_factory_report
	    ]]>
			<include refid="FactoryReport.findPage.where"/>    
    </select>
    <select id="FactoryReport.find.findpage.list" resultMap="RM.FactoryReport"><!-- 出厂报告列表查询 -->
    	select <include refid="FactoryReport.columns"/>	    
	        from t_factory_report where 1=1 
	   <isNotEmpty property="notTop">  and 
       reportid 
	   not in(select $notTop$ 
       reportid 
	   from t_factory_report <include refid="FactoryReport.findPage.where"/>
	   	   <isNotEmpty property="sortColumns"> ORDER BY $sortColumns$	</isNotEmpty>) 
	   	</isNotEmpty>    
	   	<include refid="FactoryReport.findPage.and"/>
    	<isNotEmpty property="sortColumns">
			ORDER BY $sortColumns$
		</isNotEmpty>
    </select>


	<select id="FactoryReport.showByOrderno" resultMap="RM.FactoryReport.showByOrderno">
		select
			t_factory_report.reportid ,
			t_factory_report.tplid,
        	t_factory_report.itemcode ,
        	t_factory_report.itemname ,
        	t_factory_report.itemmode ,
        	t_factory_report.serial ,
        	t_factory_report.fname ,
        	t_factory_report.fpath ,
        	t_factory_report.createdate ,
        	t_factory_report.reportno ,
        	t_factory_report.reportdate ,
        	t_factory_report.orderno ,
        	t_factory_report.customername ,
        	t_factory_report.fmodel1 ,
        	t_factory_report.fmodel2 ,
        	t_factory_report.fmodel3 ,
        	t_factory_report.fserial1 ,
        	t_factory_report.fserial2 ,
        	t_factory_report.fserial3 ,
        	t_factory_report.billno ,
        	t_factory_report.pdtype ,
        	t_factory_report.empid ,
        	t_factory_report.qc ,
        	t_factory_report.qcdate ,
        	t_factory_report.viewemp ,
        	t_factory_report.viewdate,
        	t_factory_report.quantity,  
        	t_factory_report.productmode,  
        	t_factory_report.productName,    
			t_report_tec.id tecid
			
			
			
		from 
			t_factory_report left join t_report_tec on t_report_tec.reportid= t_factory_report.reportid
		where
			 t_factory_report.serial=#serial#
		
				
		
		
	</select>




	
	
	
	<select id="FactoryReport.find.data.and.valveParts" resultMap="RM.FactoryReport.and.valveParts.data">
    	SELECT 
    		<include refid="FactoryReport.columns"/> 
    	FROM 
    		t_factory_report
		<include refid="FactoryReport.findPage.where"/>
    </select>
	<select id="select.valveParts.data.in.FactoryReport" resultMap="valveParts.data.FactoryReport">
    	SELECT 
    		t_valveParts.id,
        	t_valveParts.reportid,
        	t_valveParts.itemcode,
        	t_valveParts.itemname,
        	t_valveParts.itemmode,
        	t_valveParts.material,
        	t_valveParts.batchno,
        	t_valveParts.type,
        	t_valveParts.checkname,
        	t_valveParts.stockemp
    	FROM 
    		t_valveParts where reportid=#reportid#
    </select>
	<select id="select_maxreportno.in.FactoryReport" resultMap="maxreportno.data.FactoryReport">
    	SELECT max(reportno) reportno from t_factory_report 
    </select>
	<select id="select.factoryreport.data" resultMap="RM.FactoryReport">
    	SELECT 
    		<include refid="FactoryReport.columns"/> 
    	FROM 
    		t_factory_report
		where fmodel1=#serial# or fmodel2=#serial# or fmodel3=#serial#
    </select>
	
	
	<select id="FactoryReport.find.thedata.serial" resultMap="RM.FactoryReport">
    	SELECT 
    		<include refid="FactoryReport.columns"/> 
    	FROM 
    		t_factory_report
		where serial=#serial#
    </select>
	
	
	
	<select id="FactoryReport.find.entity.data" resultMap="RM.FactoryReport">
    	SELECT 
    		t_factory_report.reportid ,
        	t_factory_report.itemcode ,
        	t_factory_report.itemname ,
        	t_factory_report.itemmode ,
        	t_factory_report.serial ,
        	t_factory_report.fname ,
        	t_factory_report.fpath ,
        	t_factory_report.createdate ,
        	t_factory_report.reportno ,
        	t_factory_report.reportdate ,
        	t_factory_report.orderno ,
        	t_factory_report.customername ,
        	t_factory_report.fmodel1 ,
        	t_factory_report.fmodel2 ,
        	t_factory_report.fmodel3 ,
        	t_factory_report.fserial1 ,
        	t_factory_report.fserial2 ,
        	t_factory_report.fserial3 ,
        	t_factory_report.billno ,
        	t_factory_report.pdtype ,
        	t_factory_report.empid ,
        	t_factory_report.qc ,
        	t_factory_report.qcdate ,
        	t_factory_report.viewemp ,
        	t_factory_report.viewdate,
        	 isnull(t_factory_report.picpath,t_base_item.installdiagram) picpath,
        	 isnull(t_factory_report.picpath2,t_base_item.maintainpartdiagram) picpath2,
        	 t_factory_report.quantity,  
        	t_factory_report.productmode,  
        	t_factory_report.productName
    	FROM 
    		t_factory_report
    		left join t_base_item on t_factory_report.itemcode=t_base_item.itemcode
		<include refid="FactoryReport.findPage.where"/>
		
    </select>
    
    
    
    
     <!-- {itemcode=itemcode,orderno=orderno} -->
    <select id="FactoryReport.ordersproductlist.showByOrderno" resultMap="RM.FactoryReport.ordersproductlist.showByOrderno">
    	SELECT 
    		id,
    		orderid ,
        	fbillno ,
        	createtime ,
        	priority ,
        	itemcode ,
        	itemname ,
        	itemmode ,
        	amount ,
        	mininpressure ,
        	maxinpressure ,
        	minoutpressure ,
        	maxoutpressure ,
        	outpressure ,
        	turnpressue ,
        	blowpressure ,
        	fclose ,
        	unitname ,
        	deleverydate ,
        	innum ,
        	existednums ,
        	planednum ,
        	making ,
        	youtput ,
        	cyclename ,
        	ratio ,
        	lastinnum ,
        	morehighpressure,
			morelowpressure,
			ftaxprice,
			fprice,
			fallamount,
			famount,
			fcess,
			ftaxamount,
			fpricediscount,
			fstockqty ,
			unitid ,
        	notes
    				 
    	FROM 
    		t_orders_product
    	where 
			t_orders_product.itemcode=#itemcode# and t_orders_product.fbillno=#orderno#
		
    </select>
    
     
    
    
   <select id="FactoryReport.find.fr.data.select" resultMap="RM.FactoryReport">
    	SELECT 
    		<include refid="FactoryReport.columns"/> 
    	FROM 
    		t_factory_report
		<include refid="FactoryReport.findPage.where"/>
		
    </select>
      
    
    
    
    
    
    
</sqlMap>
