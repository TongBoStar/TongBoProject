<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" 
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap>
    <resultMap id="RM.Product" class="com.terrence.crm.dol.bean.Product">
        <result property="productId" column="productId"/>
        <result property="productName" column="productName"/>
        <result property="orderCode" column="orderCode"/>
        <result property="specifications" column="specifications"/>
        <result property="productCount" column="productCount"/>
        <result property="productType" column="productType"/>
        <result property="unitPrice" column="unitPrice"/>
        <result property="discount" column="discount"/>
        <result property="totalFee" column="totalFee"/>
        <result property="deliveryTime" column="deliveryTime"/>
        <result property="productVersion" column="productVersion"/>
        <result property="productCode" column="productCode"/>
        <result property="baseUnitName" column="baseUnitName"/>
        <result property="baseUnitCount" column="baseUnitCount"/>
        <result property="productUnit" column="productUnit"/>
        <result property="productAssistCount" column="productAssistCount"/>
        <result property="unitRemoveTax" column="unitRemoveTax"/>
        <result property="convertRate" column="convertRate"/>
        <result property="taxRate" column="taxRate"/>
        <result property="discountRate" column="discountRate"/>
        <result property="factUnitPrice" column="factUnitPrice"/>
        <result property="saleTax" column="saleTax"/>
        <result property="priceTaxTotal" column="priceTaxTotal"/>
        <result property="makeNumberCode" column="makeNumberCode"/>
        <result property="taskCode" column="taskCode"/>
        <result property="referCount" column="referCount"/>
        <result property="assistUnitReferCount" column="assistUnitReferCount"/>
        <result property="assistUnitOutHouseCount" column="assistUnitOutHouseCount"/>
        <result property="outHouseCount" column="outHouseCount"/>
        <result property="customBOM" column="customBOM"/>
        <result property="costObj" column="costObj"/>
        <result property="addOrDel" column="addOrDel"/>
        <result property="lockHouseMark" column="lockHouseMark"/>
        <result property="adviceDeliveryTime" column="adviceDeliveryTime"/>
        <result property="sourceOrderCode" column="sourceOrderCode"/>
        <result property="sourceOrderType" column="sourceOrderType"/>
        <result property="sourceOrderInnerCode" column="sourceOrderInnerCode"/>
        <result property="sourceOrderSplit" column="sourceOrderSplit"/>
        <result property="contactCode" column="contactCode"/>
        <result property="contactInnerCode" column="contactInnerCode"/>
        <result property="contactSplit" column="contactSplit"/>
        <result property="billCount" column="billCount"/>
        <result property="customOrderCode" column="customOrderCode"/>
        <result property="assistCompanyBillCount" column="assistCompanyBillCount"/>
        <result property="assistCompanyFitCount" column="assistCompanyFitCount"/>
        <result property="orderTrNumber" column="orderTrNumber"/>
        <result property="baseCompanyFitCount" column="baseCompanyFitCount"/>
        <result property="fitCount" column="fitCount"/>
        <result property="assistAttributeType" column="assistAttributeType"/>
        <result property="priceTaxTotalRM" column="priceTaxTotalRM"/>
        <result property="markForMRP" column="markForMRP"/>
        <result property="markIsForMRP" column="markIsForMRP"/>
        <result property="collectPayReferFee" column="collectPayReferFee"/>
        <result property="qualityFeeRate" column="qualityFeeRate"/>
        <result property="qualityFee" column="qualityFee"/>
        <result property="material" column="material"/>
        <result property="outSaleName" column="outSaleName"/>
        <result property="proProjectName" column="proProjectName"/>
        <result property="assistAttribute" column="assistAttribute"/>
        <result property="excuteStandard" column="excuteStandard"/>
        <result property="assistUnit" column="assistUnit"/>
        <result property="remarks" column="remarks"/>
        <!--销售单价
        <result property="saleprice" column="saleprice"/>--> 	 	 	 	 	
        <!--服务费-->
        <result property="servicecharge" column="servicecharge"/>
        <!--列表价-->
        <result property="listprice" column="listprice"/>
        <!--结算价-->
        <result property="balanceprice" column="balanceprice"/>
        <!--计量单位名-->
        <result property="measureunitname" column="measureunitname"/>
        <!--材质-->
        <result property="materialname" column="materialname"/>
        <!--web端统计用的折扣率-->
        <result property="fdiscountrate" column="fdiscountrate"/>
        <!--结算金额-->
        <result property="balancefee" column="balancefee"/>
        <!--//折扣额(本位币)fbusinessdiscount-->
        <result property="fbusinessdiscount" column="fbusinessdiscount"/> 
        <!--//税额(本币)ftax-->
        <result property="ftax" column="ftax"/> 
        <!--//金额(本币)famountfor-->
        <result property="famountfor" column="famountfor"/>
        <!--//含税单价(本币)ftaxprice-->
        <result property="ftaxprice" column="ftaxprice"/>
        
        <!--销售金额
        <result property="salefee" column="salefee"/>-->
    </resultMap>
    
    <resultMap class="com.terrence.crm.dol.bean.Product" id="RM.Product.Sum">
    	 <result property="productType" column="productType"/>
    	 <result property="balanceprice" column="balanceprice"/>
    </resultMap>
	<!-- 用于select查询公用抽取的列 -->
	<sql id="Product.columns">
	    <![CDATA[
        productId ,productName, orderCode ,specifications ,productCount , productType,unitPrice,discount,
        totalFee,deliveryTime,productVersion,baseUnitName,baseUnitCount,productUnit,productCode,productAssistCount,
        unitRemoveTax,convertRate,taxRate,discountRate,factUnitPrice,saleTax,priceTaxTotal,makeNumberCode,taskCode,referCount,
        assistUnitReferCount,assistUnitOutHouseCount,outHouseCount,customBOM,costObj,addOrDel,lockHouseMark,adviceDeliveryTime,
        sourceOrderCode,sourceOrderType,sourceOrderInnerCode,sourceOrderSplit,contactCode,contactInnerCode,contactSplit,
        billCount,customOrderCode,assistCompanyBillCount,assistCompanyFitCount,orderTrNumber,baseCompanyFitCount,fitCount,
        assistAttributeType,priceTaxTotalRM,markForMRP,markIsForMRP,collectPayReferFee,qualityFeeRate,qualityFee,material,
        outSaleName,proProjectName,assistAttribute,excuteStandard,assistUnit,remarks,
      servicecharge 
      ,listprice 
      ,balanceprice,measureunitname,materialname,fdiscountrate,balancefee,
      fbusinessdiscount,ftax,famountfor,ftaxprice
	    ]]>
	</sql>
    <insert id="Product.insert" >
        INSERT INTO t_product (
        productCode
        <dynamic prepend="">
			<isNotEmpty prepend="," property="productName">productName</isNotEmpty>
			<isNotEmpty prepend="," property="orderCode">orderCode</isNotEmpty>
			<isNotEmpty prepend="," property="specifications">specifications</isNotEmpty>
			<isNotEmpty prepend="," property="productCount">productCount</isNotEmpty>
			<isNotEmpty prepend="," property="productType">productType</isNotEmpty>
			<isNotEmpty prepend="," property="unitPrice">unitPrice</isNotEmpty>
			<isNotEmpty prepend="," property="discount">discount</isNotEmpty>
			<isNotEmpty prepend="," property="totalFee">totalFee</isNotEmpty>
			<isNotEmpty prepend="," property="productVersion">productVersion</isNotEmpty>
			<isNotEmpty prepend="," property="baseUnitName">baseUnitName</isNotEmpty>
			<isNotEmpty prepend="," property="baseUnitCount">baseUnitCount</isNotEmpty>
			<isNotEmpty prepend="," property="productUnit">productUnit</isNotEmpty>
			<isNotEmpty prepend="," property="deliveryTime">deliveryTime</isNotEmpty>
			<isNotEmpty prepend="," property="productAssistCount">productAssistCount</isNotEmpty>
			<isNotEmpty prepend="," property="unitRemoveTax">unitRemoveTax</isNotEmpty>
			<isNotEmpty prepend="," property="convertRate">convertRate</isNotEmpty>
			<isNotEmpty prepend="," property="taxRate">taxRate</isNotEmpty>
			<isNotEmpty prepend="," property="discountRate">discountRate</isNotEmpty>
			<isNotEmpty prepend="," property="factUnitPrice">factUnitPrice</isNotEmpty>
			<isNotEmpty prepend="," property="saleTax">saleTax</isNotEmpty>
			<isNotEmpty prepend="," property="priceTaxTotal">priceTaxTotal</isNotEmpty>
			<isNotEmpty prepend="," property="makeNumberCode">makeNumberCode</isNotEmpty>
			<isNotEmpty prepend="," property="taskCode">taskCode</isNotEmpty>
			<isNotEmpty prepend="," property="referCount">referCount</isNotEmpty>
			<isNotEmpty prepend="," property="assistUnitReferCount">assistUnitReferCount</isNotEmpty>
			<isNotEmpty prepend="," property="assistUnitOutHouseCount">assistUnitOutHouseCount</isNotEmpty>
			<isNotEmpty prepend="," property="outHouseCount">outHouseCount</isNotEmpty>
			<isNotEmpty prepend="," property="customBOM">customBOM</isNotEmpty>
			<isNotEmpty prepend="," property="costObj">costObj</isNotEmpty>
			<isNotEmpty prepend="," property="addOrDel">addOrDel</isNotEmpty>
			<isNotEmpty prepend="," property="lockHouseMark">lockHouseMark</isNotEmpty>
			<isNotEmpty prepend="," property="adviceDeliveryTime">adviceDeliveryTime</isNotEmpty>
			<isNotEmpty prepend="," property="sourceOrderCode">sourceOrderCode</isNotEmpty>
			<isNotEmpty prepend="," property="sourceOrderType">sourceOrderType</isNotEmpty>
			<isNotEmpty prepend="," property="sourceOrderInnerCode">sourceOrderInnerCode</isNotEmpty>
			<isNotEmpty prepend="," property="sourceOrderSplit">sourceOrderSplit</isNotEmpty>
			<isNotEmpty prepend="," property="contactCode">contactCode</isNotEmpty>
			<isNotEmpty prepend="," property="contactInnerCode">contactInnerCode</isNotEmpty>
			<isNotEmpty prepend="," property="contactSplit">contactSplit</isNotEmpty>
			<isNotEmpty prepend="," property="billCount">billCount</isNotEmpty>
			<isNotEmpty prepend="," property="customOrderCode">customOrderCode</isNotEmpty>
			<isNotEmpty prepend="," property="assistCompanyBillCount">assistCompanyBillCount</isNotEmpty>
			<isNotEmpty prepend="," property="assistCompanyFitCount">assistCompanyFitCount</isNotEmpty>
			<isNotEmpty prepend="," property="orderTrNumber">orderTrNumber</isNotEmpty>
			<isNotEmpty prepend="," property="baseCompanyFitCount">baseCompanyFitCount</isNotEmpty>
			<isNotEmpty prepend="," property="fitCount">fitCount</isNotEmpty>
			<isNotEmpty prepend="," property="assistAttributeType">assistAttributeType</isNotEmpty>
			<isNotEmpty prepend="," property="priceTaxTotalRM">priceTaxTotalRM</isNotEmpty>
			<isNotEmpty prepend="," property="markForMRP">markForMRP</isNotEmpty>
			<isNotEmpty prepend="," property="markIsForMRP">markIsForMRP</isNotEmpty>
			<isNotEmpty prepend="," property="collectPayReferFee">collectPayReferFee</isNotEmpty>
			<isNotEmpty prepend="," property="qualityFeeRate">qualityFeeRate</isNotEmpty>
			<isNotEmpty prepend="," property="qualityFee">qualityFee</isNotEmpty>
			<isNotEmpty prepend="," property="material">material</isNotEmpty>
			<isNotEmpty prepend="," property="outSaleName">outSaleName</isNotEmpty>
			<isNotEmpty prepend="," property="proProjectName">proProjectName</isNotEmpty>
			<isNotEmpty prepend="," property="assistAttribute">assistAttribute</isNotEmpty>
			<isNotEmpty prepend="," property="excuteStandard">excuteStandard</isNotEmpty>
			<isNotEmpty prepend="," property="assistUnit">assistUnit</isNotEmpty>
			<isNotEmpty prepend="," property="remarks">remarks</isNotEmpty>
			<!--  销售单价
			<isNotEmpty prepend="," property="saleprice">saleprice</isNotEmpty>-->
			<!--  服务费-->
			<isNotEmpty prepend="," property="servicecharge">servicecharge</isNotEmpty>
			<!--  列表价-->
			<isNotEmpty prepend="," property="listprice">listprice</isNotEmpty>
			<!--  结算价-->
			<isNotEmpty prepend="," property="balanceprice">balanceprice</isNotEmpty>
			<!--  计量单位名-->
			<isNotEmpty prepend="," property="measureunitname">measureunitname</isNotEmpty>
			<!--  材质-->
			<isNotEmpty prepend="," property="materialname">materialname</isNotEmpty>
			<!--  WEB端统计用折扣率-->
			<isNotEmpty prepend="," property="fdiscountrate">fdiscountrate</isNotEmpty>
			<!--  结算金额 -->
			<isNotEmpty prepend="," property="balancefee">balancefee</isNotEmpty>
	        <!--//折扣额(本位币)fbusinessdiscount-->
	        <isNotEmpty prepend="," property="fbusinessdiscount">fbusinessdiscount</isNotEmpty>
	        <!--//税额(本币)ftax-->
	        <isNotEmpty prepend="," property="ftax">ftax</isNotEmpty>
	        <!--//金额(本币)famountfor-->
	        <isNotEmpty prepend="," property="famountfor">famountfor</isNotEmpty>
	        <!--//含税单价(本币)ftaxprice-->
         	<isNotEmpty prepend="," property="ftaxprice">ftaxprice</isNotEmpty>
			<!--  销售金额
			<isNotEmpty prepend="," property="salefee">salefee</isNotEmpty>-->
		</dynamic>
        ) VALUES (
        #productCode#
		<dynamic prepend="">
			<isNotEmpty prepend="," property="productName">#productName#</isNotEmpty>
			<isNotEmpty prepend="," property="orderCode">#orderCode#</isNotEmpty>
			<isNotEmpty prepend="," property="specifications">#specifications#</isNotEmpty>
			<isNotEmpty prepend="," property="productCount">#productCount#</isNotEmpty>
			<isNotEmpty prepend="," property="productType">#productType#</isNotEmpty>
			<isNotEmpty prepend="," property="unitPrice">#unitPrice#</isNotEmpty>
			<isNotEmpty prepend="," property="discount">#discount#</isNotEmpty>
			<isNotEmpty prepend="," property="totalFee">#totalFee#</isNotEmpty>
			<isNotEmpty prepend="," property="productVersion">#productVersion#</isNotEmpty>
			<isNotEmpty prepend="," property="baseUnitName">#baseUnitName#</isNotEmpty>
			<isNotEmpty prepend="," property="baseUnitCount">#baseUnitCount#</isNotEmpty>
			<isNotEmpty prepend="," property="productUnit">#productUnit#</isNotEmpty>
			<isNotEmpty prepend="," property="deliveryTime">#deliveryTime#</isNotEmpty>
			<isNotEmpty prepend="," property="productAssistCount">#productAssistCount#</isNotEmpty>
			<isNotEmpty prepend="," property="unitRemoveTax">#unitRemoveTax#</isNotEmpty>
			<isNotEmpty prepend="," property="convertRate">#convertRate#</isNotEmpty>
			<isNotEmpty prepend="," property="taxRate">#taxRate#</isNotEmpty>
			<isNotEmpty prepend="," property="discountRate">#discountRate#</isNotEmpty>
			<isNotEmpty prepend="," property="factUnitPrice">#factUnitPrice#</isNotEmpty>
			<isNotEmpty prepend="," property="saleTax">#saleTax#</isNotEmpty>
			<isNotEmpty prepend="," property="priceTaxTotal">#priceTaxTotal#</isNotEmpty>
			<isNotEmpty prepend="," property="makeNumberCode">#makeNumberCode#</isNotEmpty>
			<isNotEmpty prepend="," property="taskCode">#taskCode#</isNotEmpty>
			<isNotEmpty prepend="," property="referCount">#referCount#</isNotEmpty>
			<isNotEmpty prepend="," property="assistUnitReferCount">#assistUnitReferCount#</isNotEmpty>
			<isNotEmpty prepend="," property="assistUnitOutHouseCount">#assistUnitOutHouseCount#</isNotEmpty>
			<isNotEmpty prepend="," property="outHouseCount">#outHouseCount#</isNotEmpty>
			<isNotEmpty prepend="," property="customBOM">#customBOM#</isNotEmpty>
			<isNotEmpty prepend="," property="costObj">#costObj#</isNotEmpty>
			<isNotEmpty prepend="," property="addOrDel">#addOrDel#</isNotEmpty>
			<isNotEmpty prepend="," property="lockHouseMark">#lockHouseMark#</isNotEmpty>
			<isNotEmpty prepend="," property="adviceDeliveryTime">#adviceDeliveryTime#</isNotEmpty>
			<isNotEmpty prepend="," property="sourceOrderCode">#sourceOrderCode#</isNotEmpty>
			<isNotEmpty prepend="," property="sourceOrderType">#sourceOrderType#</isNotEmpty>
			<isNotEmpty prepend="," property="sourceOrderInnerCode">#sourceOrderInnerCode#</isNotEmpty>
			<isNotEmpty prepend="," property="sourceOrderSplit">#sourceOrderSplit#</isNotEmpty>
			<isNotEmpty prepend="," property="contactCode">#contactCode#</isNotEmpty>
			<isNotEmpty prepend="," property="contactInnerCode">#contactInnerCode#</isNotEmpty>
			<isNotEmpty prepend="," property="contactSplit">#contactSplit#</isNotEmpty>
			<isNotEmpty prepend="," property="billCount">#billCount#</isNotEmpty>
			<isNotEmpty prepend="," property="customOrderCode">#customOrderCode#</isNotEmpty>
			<isNotEmpty prepend="," property="assistCompanyBillCount">#assistCompanyBillCount#</isNotEmpty>
			<isNotEmpty prepend="," property="assistCompanyFitCount">#assistCompanyFitCount#</isNotEmpty>
			<isNotEmpty prepend="," property="orderTrNumber">#orderTrNumber#</isNotEmpty>
			<isNotEmpty prepend="," property="baseCompanyFitCount">#baseCompanyFitCount#</isNotEmpty>
			<isNotEmpty prepend="," property="fitCount">#fitCount#</isNotEmpty>
			<isNotEmpty prepend="," property="assistAttributeType">#assistAttributeType#</isNotEmpty>
			<isNotEmpty prepend="," property="priceTaxTotalRM">#priceTaxTotalRM#</isNotEmpty>
			<isNotEmpty prepend="," property="markForMRP">#markForMRP#</isNotEmpty>
			<isNotEmpty prepend="," property="markIsForMRP">#markIsForMRP#</isNotEmpty>
			<isNotEmpty prepend="," property="collectPayReferFee">#collectPayReferFee#</isNotEmpty>
			<isNotEmpty prepend="," property="qualityFeeRate">#qualityFeeRate#</isNotEmpty>
			<isNotEmpty prepend="," property="qualityFee">#qualityFee#</isNotEmpty>
			<isNotEmpty prepend="," property="material">#material#</isNotEmpty>
			<isNotEmpty prepend="," property="outSaleName">#outSaleName#</isNotEmpty>
			<isNotEmpty prepend="," property="proProjectName">#proProjectName#</isNotEmpty>
			<isNotEmpty prepend="," property="assistAttribute">#assistAttribute#</isNotEmpty>
			<isNotEmpty prepend="," property="excuteStandard">#excuteStandard#</isNotEmpty>
			<isNotEmpty prepend="," property="assistUnit">#assistUnit#</isNotEmpty>
			<isNotEmpty prepend="," property="remarks">#remarks#</isNotEmpty>
			<!--  销售单价
			<isNotEmpty prepend="," property="saleprice">#saleprice#</isNotEmpty>-->
			<!--  服务费-->
			<isNotEmpty prepend="," property="servicecharge">#servicecharge#</isNotEmpty>
			<!--  列表价-->
			<isNotEmpty prepend="," property="listprice">#listprice#</isNotEmpty>
			<!--  结算价-->
			<isNotEmpty prepend="," property="balanceprice">#balanceprice#</isNotEmpty>
			<!--  计量单位名-->
			<isNotEmpty prepend="," property="measureunitname">#measureunitname#</isNotEmpty>
			<!--  材质-->
			<isNotEmpty prepend="," property="materialname">#materialname#</isNotEmpty>
			<!--  WEB端统计用折扣率-->
			<isNotEmpty prepend="," property="fdiscountrate">#fdiscountrate#</isNotEmpty>
			<!--  结算金额 -->
			<isNotEmpty prepend="," property="balancefee">#balancefee#</isNotEmpty>
			
	        <!--//折扣额(本位币)fbusinessdiscount-->
	        <isNotEmpty prepend="," property="fbusinessdiscount">#fbusinessdiscount#</isNotEmpty>
	        <!--//税额(本币)ftax-->
	        <isNotEmpty prepend="," property="ftax">#ftax#</isNotEmpty>
	        <!--//金额(本币)famountfor-->
	        <isNotEmpty prepend="," property="famountfor">#famountfor#</isNotEmpty>
	        <!--//含税单价(本币)ftaxprice-->
         	<isNotEmpty prepend="," property="ftaxprice">#ftaxprice#</isNotEmpty>
			<!--  销售金额
			<isNotEmpty prepend="," property="salefee">#salefee#</isNotEmpty>-->
		</dynamic>
        )
        <selectKey resultClass="java.lang.Long" type="post" keyProperty="productId" >
            SELECT  @@identity  AS  ID
        </selectKey>
    </insert>
	<insert id="Product.insert.history" >
        INSERT INTO t_product_history (
        productCode
		<dynamic prepend="">
			<isNotEmpty prepend="," property="productName">productName</isNotEmpty>
			<isNotEmpty prepend="," property="orderCode">orderCode</isNotEmpty>
			<isNotEmpty prepend="," property="specifications">specifications</isNotEmpty>
			<isNotEmpty prepend="," property="productCount">productCount</isNotEmpty>
			<isNotEmpty prepend="," property="productType">productType</isNotEmpty>
			<isNotEmpty prepend="," property="unitPrice">unitPrice</isNotEmpty>
			<isNotEmpty prepend="," property="discount">discount</isNotEmpty>
			<isNotEmpty prepend="," property="totalFee">totalFee</isNotEmpty>
			<isNotEmpty prepend="," property="productVersion">productVersion</isNotEmpty>
			<isNotEmpty prepend="," property="baseUnitName">baseUnitName</isNotEmpty>
			<isNotEmpty prepend="," property="baseUnitCount">baseUnitCount</isNotEmpty>
			<isNotEmpty prepend="," property="productUnit">productUnit</isNotEmpty>
			<isNotEmpty prepend="," property="deliveryTime">deliveryTime</isNotEmpty>
			<isNotEmpty prepend="," property="productAssistCount">productAssistCount</isNotEmpty>
			<isNotEmpty prepend="," property="unitRemoveTax">unitRemoveTax</isNotEmpty>
			<isNotEmpty prepend="," property="convertRate">convertRate</isNotEmpty>
			<isNotEmpty prepend="," property="taxRate">taxRate</isNotEmpty>
			<isNotEmpty prepend="," property="discountRate">discountRate</isNotEmpty>
			<isNotEmpty prepend="," property="factUnitPrice">factUnitPrice</isNotEmpty>
			<isNotEmpty prepend="," property="saleTax">saleTax</isNotEmpty>
			<isNotEmpty prepend="," property="priceTaxTotal">priceTaxTotal</isNotEmpty>
			<isNotEmpty prepend="," property="makeNumberCode">makeNumberCode</isNotEmpty>
			<isNotEmpty prepend="," property="taskCode">taskCode</isNotEmpty>
			<isNotEmpty prepend="," property="referCount">referCount</isNotEmpty>
			<isNotEmpty prepend="," property="assistUnitReferCount">assistUnitReferCount</isNotEmpty>
			<isNotEmpty prepend="," property="assistUnitOutHouseCount">assistUnitOutHouseCount</isNotEmpty>
			<isNotEmpty prepend="," property="outHouseCount">outHouseCount</isNotEmpty>
			<isNotEmpty prepend="," property="customBOM">customBOM</isNotEmpty>
			<isNotEmpty prepend="," property="costObj">costObj</isNotEmpty>
			<isNotEmpty prepend="," property="addOrDel">addOrDel</isNotEmpty>
			<isNotEmpty prepend="," property="lockHouseMark">lockHouseMark</isNotEmpty>
			<isNotEmpty prepend="," property="adviceDeliveryTime">adviceDeliveryTime</isNotEmpty>
			<isNotEmpty prepend="," property="sourceOrderCode">sourceOrderCode</isNotEmpty>
			<isNotEmpty prepend="," property="sourceOrderType">sourceOrderType</isNotEmpty>
			<isNotEmpty prepend="," property="sourceOrderInnerCode">sourceOrderInnerCode</isNotEmpty>
			<isNotEmpty prepend="," property="sourceOrderSplit">sourceOrderSplit</isNotEmpty>
			<isNotEmpty prepend="," property="contactCode">contactCode</isNotEmpty>
			<isNotEmpty prepend="," property="contactInnerCode">contactInnerCode</isNotEmpty>
			<isNotEmpty prepend="," property="contactSplit">contactSplit</isNotEmpty>
			<isNotEmpty prepend="," property="billCount">billCount</isNotEmpty>
			<isNotEmpty prepend="," property="customOrderCode">customOrderCode</isNotEmpty>
			<isNotEmpty prepend="," property="assistCompanyBillCount">assistCompanyBillCount</isNotEmpty>
			<isNotEmpty prepend="," property="assistCompanyFitCount">assistCompanyFitCount</isNotEmpty>
			<isNotEmpty prepend="," property="orderTrNumber">orderTrNumber</isNotEmpty>
			<isNotEmpty prepend="," property="baseCompanyFitCount">baseCompanyFitCount</isNotEmpty>
			<isNotEmpty prepend="," property="fitCount">fitCount</isNotEmpty>
			<isNotEmpty prepend="," property="assistAttributeType">assistAttributeType</isNotEmpty>
			<isNotEmpty prepend="," property="priceTaxTotalRM">priceTaxTotalRM</isNotEmpty>
			<isNotEmpty prepend="," property="markForMRP">markForMRP</isNotEmpty>
			<isNotEmpty prepend="," property="markIsForMRP">markIsForMRP</isNotEmpty>
			<isNotEmpty prepend="," property="collectPayReferFee">collectPayReferFee</isNotEmpty>
			<isNotEmpty prepend="," property="qualityFeeRate">qualityFeeRate</isNotEmpty>
			<isNotEmpty prepend="," property="qualityFee">qualityFee</isNotEmpty>
			<isNotEmpty prepend="," property="material">material</isNotEmpty>
			<isNotEmpty prepend="," property="outSaleName">outSaleName</isNotEmpty>
			<isNotEmpty prepend="," property="proProjectName">proProjectName</isNotEmpty>
			<isNotEmpty prepend="," property="assistAttribute">assistAttribute</isNotEmpty>
			<isNotEmpty prepend="," property="excuteStandard">excuteStandard</isNotEmpty>
			<isNotEmpty prepend="," property="assistUnit">assistUnit</isNotEmpty>
			<isNotEmpty prepend="," property="remarks">remarks</isNotEmpty>
			
			<!--  销售单价
			<isNotEmpty prepend="," property="saleprice">saleprice</isNotEmpty>-->
			<!--  服务费-->
			<isNotEmpty prepend="," property="servicecharge">servicecharge</isNotEmpty>
			<!--  列表价-->
			<isNotEmpty prepend="," property="listprice">listprice</isNotEmpty>
			<!--  结算价-->
			<isNotEmpty prepend="," property="balanceprice">balanceprice</isNotEmpty>
			<!--  计量单位名-->
			<isNotEmpty prepend="," property="measureunitname">measureunitname</isNotEmpty>
			<!--  材质-->
			<isNotEmpty prepend="," property="materialname">materialname</isNotEmpty>
			<!--  WEB端统计用折扣率-->
			<isNotEmpty prepend="," property="fdiscountrate">fdiscountrate</isNotEmpty>
			<!--  结算金额 -->
			<isNotEmpty prepend="," property="balancefee">balancefee</isNotEmpty>
	        <!--//折扣额(本位币)fbusinessdiscount-->
	        <isNotEmpty prepend="," property="fbusinessdiscount">fbusinessdiscount</isNotEmpty>
	        <!--//税额(本币)ftax-->
	        <isNotEmpty prepend="," property="ftax">ftax</isNotEmpty>
	        <!--//金额(本币)famountfor-->
	        <isNotEmpty prepend="," property="famountfor">famountfor</isNotEmpty>
	        <!--//含税单价(本币)ftaxprice-->
         	<isNotEmpty prepend="," property="ftaxprice">ftaxprice</isNotEmpty>
		</dynamic>
        ) VALUES (
        #productCode#
		<dynamic prepend="">
			<isNotEmpty prepend="," property="productName">#productName#</isNotEmpty>
			<isNotEmpty prepend="," property="orderCode">#orderCode#</isNotEmpty>
			<isNotEmpty prepend="," property="specifications">#specifications#</isNotEmpty>
			<isNotEmpty prepend="," property="productCount">#productCount#</isNotEmpty>
			<isNotEmpty prepend="," property="productType">#productType#</isNotEmpty>
			<isNotEmpty prepend="," property="unitPrice">#unitPrice#</isNotEmpty>
			<isNotEmpty prepend="," property="discount">#discount#</isNotEmpty>
			<isNotEmpty prepend="," property="totalFee">#totalFee#</isNotEmpty>
			<isNotEmpty prepend="," property="productVersion">#productVersion#</isNotEmpty>
			<isNotEmpty prepend="," property="baseUnitName">#baseUnitName#</isNotEmpty>
			<isNotEmpty prepend="," property="baseUnitCount">#baseUnitCount#</isNotEmpty>
			<isNotEmpty prepend="," property="productUnit">#productUnit#</isNotEmpty>
			<isNotEmpty prepend="," property="deliveryTime">#deliveryTime#</isNotEmpty>
			<isNotEmpty prepend="," property="productAssistCount">#productAssistCount#</isNotEmpty>
			<isNotEmpty prepend="," property="unitRemoveTax">#unitRemoveTax#</isNotEmpty>
			<isNotEmpty prepend="," property="convertRate">#convertRate#</isNotEmpty>
			<isNotEmpty prepend="," property="taxRate">#taxRate#</isNotEmpty>
			<isNotEmpty prepend="," property="discountRate">#discountRate#</isNotEmpty>
			<isNotEmpty prepend="," property="factUnitPrice">#factUnitPrice#</isNotEmpty>
			<isNotEmpty prepend="," property="saleTax">#saleTax#</isNotEmpty>
			<isNotEmpty prepend="," property="priceTaxTotal">#priceTaxTotal#</isNotEmpty>
			<isNotEmpty prepend="," property="makeNumberCode">#makeNumberCode#</isNotEmpty>
			<isNotEmpty prepend="," property="taskCode">#taskCode#</isNotEmpty>
			<isNotEmpty prepend="," property="referCount">#referCount#</isNotEmpty>
			<isNotEmpty prepend="," property="assistUnitReferCount">#assistUnitReferCount#</isNotEmpty>
			<isNotEmpty prepend="," property="assistUnitOutHouseCount">#assistUnitOutHouseCount#</isNotEmpty>
			<isNotEmpty prepend="," property="outHouseCount">#outHouseCount#</isNotEmpty>
			<isNotEmpty prepend="," property="customBOM">#customBOM#</isNotEmpty>
			<isNotEmpty prepend="," property="costObj">#costObj#</isNotEmpty>
			<isNotEmpty prepend="," property="addOrDel">#addOrDel#</isNotEmpty>
			<isNotEmpty prepend="," property="lockHouseMark">#lockHouseMark#</isNotEmpty>
			<isNotEmpty prepend="," property="adviceDeliveryTime">#adviceDeliveryTime#</isNotEmpty>
			<isNotEmpty prepend="," property="sourceOrderCode">#sourceOrderCode#</isNotEmpty>
			<isNotEmpty prepend="," property="sourceOrderType">#sourceOrderType#</isNotEmpty>
			<isNotEmpty prepend="," property="sourceOrderInnerCode">#sourceOrderInnerCode#</isNotEmpty>
			<isNotEmpty prepend="," property="sourceOrderSplit">#sourceOrderSplit#</isNotEmpty>
			<isNotEmpty prepend="," property="contactCode">#contactCode#</isNotEmpty>
			<isNotEmpty prepend="," property="contactInnerCode">#contactInnerCode#</isNotEmpty>
			<isNotEmpty prepend="," property="contactSplit">#contactSplit#</isNotEmpty>
			<isNotEmpty prepend="," property="billCount">#billCount#</isNotEmpty>
			<isNotEmpty prepend="," property="customOrderCode">#customOrderCode#</isNotEmpty>
			<isNotEmpty prepend="," property="assistCompanyBillCount">#assistCompanyBillCount#</isNotEmpty>
			<isNotEmpty prepend="," property="assistCompanyFitCount">#assistCompanyFitCount#</isNotEmpty>
			<isNotEmpty prepend="," property="orderTrNumber">#orderTrNumber#</isNotEmpty>
			<isNotEmpty prepend="," property="baseCompanyFitCount">#baseCompanyFitCount#</isNotEmpty>
			<isNotEmpty prepend="," property="fitCount">#fitCount#</isNotEmpty>
			<isNotEmpty prepend="," property="assistAttributeType">#assistAttributeType#</isNotEmpty>
			<isNotEmpty prepend="," property="priceTaxTotalRM">#priceTaxTotalRM#</isNotEmpty>
			<isNotEmpty prepend="," property="markForMRP">#markForMRP#</isNotEmpty>
			<isNotEmpty prepend="," property="markIsForMRP">#markIsForMRP#</isNotEmpty>
			<isNotEmpty prepend="," property="collectPayReferFee">#collectPayReferFee#</isNotEmpty>
			<isNotEmpty prepend="," property="qualityFeeRate">#qualityFeeRate#</isNotEmpty>
			<isNotEmpty prepend="," property="qualityFee">#qualityFee#</isNotEmpty>
			<isNotEmpty prepend="," property="material">#material#</isNotEmpty>
			<isNotEmpty prepend="," property="outSaleName">#outSaleName#</isNotEmpty>
			<isNotEmpty prepend="," property="proProjectName">#proProjectName#</isNotEmpty>
			<isNotEmpty prepend="," property="assistAttribute">#assistAttribute#</isNotEmpty>
			<isNotEmpty prepend="," property="excuteStandard">#excuteStandard#</isNotEmpty>
			<isNotEmpty prepend="," property="assistUnit">#assistUnit#</isNotEmpty>
			<isNotEmpty prepend="," property="remarks">#remarks#</isNotEmpty>
			
			<!--  销售单价
			<isNotEmpty prepend="," property="saleprice">#saleprice#</isNotEmpty>-->
			<!--  服务费-->
			<isNotEmpty prepend="," property="servicecharge">#servicecharge#</isNotEmpty>
			<!--  列表价-->
			<isNotEmpty prepend="," property="listprice">#listprice#</isNotEmpty>
			<!--  结算价-->
			<isNotEmpty prepend="," property="balanceprice">#balanceprice#</isNotEmpty>
			<!--  计量单位名-->
			<isNotEmpty prepend="," property="measureunitname">#measureunitname#</isNotEmpty>
			<!--  材质-->
			<isNotEmpty prepend="," property="materialname">#materialname#</isNotEmpty>
			<!--  WEB端统计用折扣率-->
			<isNotEmpty prepend="," property="fdiscountrate">#fdiscountrate#</isNotEmpty>
			<!--  结算金额 -->
			<isNotEmpty prepend="," property="balancefee">#balancefee#</isNotEmpty>
			
	        <!--//折扣额(本位币)fbusinessdiscount-->
	        <isNotEmpty prepend="," property="fbusinessdiscount">#fbusinessdiscount#</isNotEmpty>
	        <!--//税额(本币)ftax-->
	        <isNotEmpty prepend="," property="ftax">#ftax#</isNotEmpty>
	        <!--//金额(本币)famountfor-->
	        <isNotEmpty prepend="," property="famountfor">#famountfor#</isNotEmpty>
	        <!--//含税单价(本币)ftaxprice-->
         	<isNotEmpty prepend="," property="ftaxprice">#ftaxprice#</isNotEmpty>
		</dynamic>
        )
        <selectKey resultClass="java.lang.Long" type="post" keyProperty="productId" >
            SELECT  @@identity  AS  ID
        </selectKey>
    </insert>
    <update id="Product.update" >
        UPDATE t_product
        	<dynamic prepend="SET">
        		productCode = #productCode#,
        		productName = #productName#, 
        		specifications = #specifications#,
        		material = #material#, 
       			assistAttributeType = #assistAttributeType#,
        		priceTaxTotalRM = #priceTaxTotalRM#,
        		markForMRP = #markForMRP#,
        		collectPayReferFee = #collectPayReferFee#,
        		qualityFeeRate = #qualityFeeRate#,
        		qualityFee = #qualityFee#,
        		outSaleName = #outSaleName#,
        		proProjectName = #proProjectName#,
        		assistAttribute = #assistAttribute#,
        		excuteStandard = #excuteStandard#,
        		assistUnit = #assistUnit#,
        		remarks = #remarks#,
        		customBOM = #customBOM# , 
        		costObj = #costObj# ,
        		sourceOrderCode = #sourceOrderCode# ,
       			<isNotEmpty prepend="," property="orderCode">
        			orderCode = #orderCode# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="productCount">
        			productCount = #productCount# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="productType">
        			productType = #productType# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="unitPrice">
        			unitPrice = #unitPrice# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="discount">
        			discount = #discount# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="totalFee">
        			totalFee = #totalFee# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="deliveryTime">
        			deliveryTime = #deliveryTime# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="productVersion">
        			productVersion = #productVersion# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="baseUnitName">
        			baseUnitName = #baseUnitName# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="baseUnitCount">
        			baseUnitCount = #baseUnitCount# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="productUnit">
        			productUnit = #productUnit# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="productAssistCount">
        			productAssistCount = #productAssistCount# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="adviceDeliveryTime">
        			adviceDeliveryTime = #adviceDeliveryTime# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="unitRemoveTax">
        			unitRemoveTax = #unitRemoveTax# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="convertRate">
        			convertRate = #convertRate# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="taxRate">
        			taxRate = #taxRate# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="discountRate">
        			discountRate = #discountRate# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="factUnitPrice">
        			factUnitPrice = #factUnitPrice# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="saleTax">
        			saleTax = #saleTax# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="priceTaxTotal">
        			priceTaxTotal = #priceTaxTotal# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="makeNumberCode">
        			makeNumberCode = #makeNumberCode# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="taskCode">
        			taskCode = #taskCode# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="referCount">
        			referCount = #referCount# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="assistUnitReferCount">
        			assistUnitReferCount = #assistUnitReferCount# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="assistUnitOutHouseCount">
        			assistUnitOutHouseCount = #assistUnitOutHouseCount# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="outHouseCount">
        			outHouseCount = #outHouseCount# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="contactCode">
        			contactCode = #contactCode# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="billCount">
        			billCount = #billCount# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="assistCompanyBillCount">
        			assistCompanyBillCount = #assistCompanyBillCount# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="assistCompanyFitCount">
        			assistCompanyFitCount = #assistCompanyFitCount# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="baseCompanyFitCount">
        			baseCompanyFitCount = #baseCompanyFitCount# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="fitCount">
        			fitCount = #fitCount# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="orderTrNumber">
        			orderTrNumber = #orderTrNumber# 
        		</isNotEmpty>
        		
        		<!--销售单价 
        		<isNotEmpty prepend="," property="saleprice">
        			saleprice = #saleprice# 
        		</isNotEmpty> -->	
        		<!--服务费 -->
        		<isNotEmpty prepend="," property="servicecharge">
        			servicecharge = #servicecharge# 
        		</isNotEmpty> 	
        		<!--列表价listprice -->
        		<isNotEmpty prepend="," property="listprice">
        			listprice = #listprice# 
        		</isNotEmpty> 	
        		<!--结算价balanceprice -->
        		<isNotEmpty prepend="," property="balanceprice">
        			balanceprice = #balanceprice# 
        		</isNotEmpty> 
        		<!--计量单位名 -->
        		<isNotEmpty prepend="," property="measureunitname">
        			measureunitname = #measureunitname# 
        		</isNotEmpty> 
        		<!--材质 -->
        		<isNotEmpty prepend="," property="materialname">
        			materialname = #materialname# 
        		</isNotEmpty>
        		<!--  WEB端统计用折扣率-->
			    <isNotEmpty prepend="," property="fdiscountrate">
			    fdiscountrate=#fdiscountrate#</isNotEmpty>
			    <!--  结算金额 -->
			    <isNotEmpty prepend="," property="balancefee">
			    balancefee=#balancefee#</isNotEmpty>
			    
	        <!--//折扣额(本位币)fbusinessdiscount-->
	        <isNotEmpty prepend="," property="fbusinessdiscount">fbusinessdiscount=#fbusinessdiscount#</isNotEmpty>
	        <!--//税额(本币)ftax-->
	        <isNotEmpty prepend="," property="ftax">ftax=#ftax#</isNotEmpty>
	        <!--//金额(本币)famountfor-->
	        <isNotEmpty prepend="," property="famountfor">famountfor=#famountfor#</isNotEmpty>
			<!--//含税单价(本币)ftaxprice-->
         	<isNotEmpty prepend="," property="ftaxprice">ftaxprice=#ftaxprice#</isNotEmpty>	  	
        		<!--销售金额salefee 
        		<isNotEmpty prepend="," property="salefee">
        			salefee = #salefee# 
        		</isNotEmpty>-->
        		
	        </dynamic>	
        WHERE 
	        productId = #productId#
    </update>

    <delete id="Product.delete">
    <![CDATA[
        DELETE FROM t_product WHERE
        productId = #productId# 
    ]]>
    </delete>
    <delete id="Product.deleteProductByOrderCode">
    <![CDATA[
        DELETE FROM t_product WHERE
        orderCode in ($id$)
    ]]>
    </delete>
    
    <delete id="Product.deleteMultiple">
    <![CDATA[
        DELETE FROM t_product WHERE
        productId in ($id$) 
    ]]>
    </delete>
	
	<sql id="Product.findPage.where">
	    <dynamic prepend="WHERE">
	       <isNotEmpty prepend="AND" property="orderCode">
	             orderCode = #orderCode#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="productVersion">
	             productVersion = #productVersion#
	       </isNotEmpty>
	    </dynamic>	
	</sql>
	<select id="Product.findSum.List" resultMap="RM.Product.Sum">
	select productType,sum(balanceprice*productCount) balanceprice  from t_product where orderCode=#orderCode# 
	group by producttype
	</select>
    <select id="Product.findPage.count" resultClass="long">
        SELECT count(*) FROM t_product <include refid="Product.findPage.where"/>    
    </select>
   
    <select id="Product.findPage" resultMap="RM.Product">
    	SELECT <include refid="Product.columns"/> FROM t_product where 1=1 
    	<isNotEmpty property="notTop">  and 
       id not in(select $notTop$ id from t_product <include refid="Product.findPage.where"/>
	   	   <isNotEmpty property="sortColumns"> ORDER BY $sortColumns$	</isNotEmpty>) 
	   	</isNotEmpty>  
		<isNotEmpty property="sortColumns">
			ORDER BY $sortColumns$
		</isNotEmpty>
    </select>
   
    <select id="Product.findList" resultMap="RM.Product">
    	SELECT <include refid="Product.columns"/> FROM t_product
		<include refid="Product.findPage.where"/>
		<isNotEmpty property="sortColumns">
			ORDER BY $sortColumns$
		</isNotEmpty>
    </select>
    <select id="Product.findList.History" resultMap="RM.Product">
    	SELECT <include refid="Product.columns"/> FROM t_product_history
		<include refid="Product.findPage.where"/>
		<isNotEmpty property="sortColumns">
			ORDER BY $sortColumns$
		</isNotEmpty>
    </select>
    <select id="Product.findByQuarter" resultClass="java.lang.Double">
    	<![CDATA[
    	select sum(ftaxprice) from t_product tp
		left join t_sysorder ts on tp.orderCode = ts.orderCode
		where ts.contractTime>=$startTime$ and ts.contractTime<=$endTime$ 
		and businessUserId=$userId$ and tp.productType=$type$
		]]>
    </select>
</sqlMap>