<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" 
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap>
	<resultMap id="RM.Sysorder2" class="com.terrence.crm.dol.bean.SysOrder">
        <result property="sysOrderId" column="sysOrderId"/>
        <result property="orderCode" column="orderCode"/>
        <result property="contractCode" column="contractCode"/>
        <result property="contractName" column="contractName"/>
        <result property="userName" column="userName"/>
        <result property="userId" column="userId"/>
        <result property="contractTime" column="contractTime"/>
        <result property="checkProject" column="checkProject"/>
        <result property="checkProjectId" column="checkProjectId"/>
        <result property="contractTxt" column="contractTxt"/>
        <result property="contractType" column="contractType"/>
        <result property="model" column="model"/>
        <result property="biddingNotice" column="biddingNotice"/>
        <result property="coinType" column="coinType"/>
        <result property="bussinessType" column="bussinessType"/>
        <result property="contractReview" column="contractReview"/>
        <result property="exchangeRate" column="exchangeRate"/>
        <result property="systemConsumer" column="systemConsumer"/>
        <result property="systemConsumerId" column="systemConsumerId"/>
        <result property="finalConsumer" column="finalConsumer"/>
        <result property="finalConsumerId" column="finalConsumerId"/>
        <result property="contractVersion" column="contractVersion"/>
        <result property="changeReason" column="changeReason"/>
        <result property="changeTime" column="changeTime"/>
        <result property="billUserId" column="billUserId"/>
        <result property="billUserName" column="billUserName"/>
        <result property="changeUserId" column="changeUserId"/>
        <result property="changeUserName" column="changeUserName"/>
        <result property="marketManagerAdvice" column="marketManagerAdvice"/>
        <result property="businessUserId" column="businessUserId"/>
        <result property="businessUser" column="businessUser"/>
        <result property="printCount" column="printCount"/>
        <result property="manager" column="manager"/>
        <result property="managerId" column="managerId"/>
        <result property="payCondition" column="payCondition"/>
        <result property="department" column="department"/>
        <result property="departmentId" column="departmentId"/>
        <result property="examineUserId" column="examineUserId"/>
        <result property="examineUserName" column="examineUserName"/>
        <result property="warrantyTime" column="warrantyTime"/>
        <result property="province" column="province"/>
        <result property="provinceId" column="provinceId"/>
        <result property="examineTime" column="examineTime"/>
        <result property="remarks" column="remarks"/>
        <result property="sysOrderStatus" column="sysOrderStatus"/>
        <result property="customContractCode" column="customContractCode"/>
        <result property="saleType" column="saleType"/>
        <result property="saleArea" column="saleArea"/>
        <result property="changeAreaType" column="changeAreaType"/>
        <result property="fheadSelfS0156" column="fheadSelfS0156"/>
        <result property="disCoefficient" column="disCoefficient"/>
        <result property="dealerName" column="dealerName"/>
        <result property="pL3000Count" column="pL3000Count"/>
        <result property="pL3000Unit" column="pL3000Unit"/>
        <result property="pL4200Count" column="pL4200Count"/>
        <result property="pL4200Unit" column="pL4200Unit"/>
        <result property="sSV3500Count" column="sSV3500Count"/>
        <result property="sSV3500Unit" column="sSV3500Unit"/>
        <result property="sPL2000Count" column="sPL2000Count"/>
        <result property="sPL2000Unit" column="sPL2000Unit"/>
        <result property="pL3000ListPrice" column="pL3000ListPrice"/>
        <result property="pL4200ListPrice" column="pL4200ListPrice"/>
        <result property="sSV3500ListPrice" column="sSV3500ListPrice"/>
        <result property="sPL2000ListPrice" column="sPL2000ListPrice"/>
        <result property="containProductType" column="containProductType"/>
        <result property="operatorrate" column="operatorrate"/>
        <result property="isbill" column="isbill"/>
        <result property="issummary" column="issummary"/>
    </resultMap>
    <resultMap id="RM.SysOrderNew" class="com.terrence.crm.dol.bean.SysOrder">
        <result property="sysOrderId" column="sysOrderId"/>
        <result property="orderCode" column="orderCode"/>
        <result property="contractCode" column="contractCode"/>
        <result property="contractName" column="contractName"/>
        <result property="userId" column="userId"/>
        <result property="userName" column="userName"/>
        <result property="contractTime" column="contractTime"/>
        <result property="checkProject" column="checkProject"/>
        <result property="contractTxt" column="contractTxt"/>
        <result property="contractType" column="contractType"/>
        <result property="model" column="model"/>
        <result property="biddingNotice" column="biddingNotice"/>
        <result property="coinType" column="coinType"/>
        <result property="bussinessType" column="bussinessType"/>
        <result property="contractReview" column="contractReview"/>
        <result property="exchangeRate" column="exchangeRate"/>
        <result property="systemConsumer" column="systemConsumer"/>
        <result property="finalConsumer" column="finalConsumer"/>
        <result property="contractVersion" column="contractVersion"/>
        <result property="changeReason" column="changeReason"/>
        <result property="changeTime" column="changeTime"/>
        <result property="billUserId" column="billUserId"/>
        <result property="billUserName" column="billUserName"/>
        <result property="changeUserId" column="changeUserId"/>
        <result property="changeUserName" column="changeUserName"/>
        <result property="marketManagerAdvice" column="marketManagerAdvice"/>
        <result property="businessUser" column="businessUser"/>
        <result property="printCount" column="printCount"/>
        <result property="manager" column="manager"/>
        <result property="payCondition" column="payCondition"/>
        <result property="department" column="department"/>
        <result property="examineUserId" column="examineUserId"/>
        <result property="examineUserName" column="examineUserName"/>
        <result property="warrantyTime" column="warrantyTime"/>
        <result property="province" column="province"/>
        <result property="examineTime" column="examineTime"/>
        <result property="remarks" column="remarks"/>
        <result property="sysOrderStatus" column="sysOrderStatus"/>
        <result property="customContractCode" column="customContractCode"/>
        <result property="saleType" column="saleType"/>
        <result property="saleArea" column="saleArea"/>
        <result property="changeAreaType" column="changeAreaType"/>
        <result property="checkProjectId" column="checkProjectId"/>
        <result property="systemConsumerId" column="systemConsumerId"/>
        <result property="finalConsumerId" column="finalConsumerId"/>
        <result property="businessUserId" column="businessUserId"/>
        <result property="managerId" column="managerId"/>
        <result property="departmentId" column="departmentId"/>
        <result property="provinceId" column="provinceId"/>
        <result property="fheadSelfS0156" column="fheadSelfS0156"/>
        <!-- 经销系数 改为奖励系数-->
        <result property="disCoefficient" column="disCoefficient"/>
        <!-- 经销商 -->
        <result property="dealerName" column="dealerName"/>
        
        <result property="pL3000Count" column="pL3000Count"/>
        <result property="pL3000Unit" column="pL3000Unit"/>
        
        <result property="pL4200Count" column="pL4200Count"/>
        <result property="pL4200Unit" column="pL4200Unit"/>
        
        <result property="sSV3500Count" column="sSV3500Count"/>
        <result property="sSV3500Unit" column="sSV3500Unit"/>
        
        <result property="sPL2000Count" column="sPL2000Count"/>
        <result property="sPL2000Unit" column="sPL2000Unit"/>
        
        <!--国产PL产品列表价  -->
       	 <result property="pL3000ListPrice" column="pL3000ListPrice"/>
         <result property="pL4200ListPrice" column="pL4200ListPrice"/>
         <result property="sSV3500ListPrice" column="sSV3500ListPrice"/>
         <result property="sPL2000ListPrice" column="sPL2000ListPrice"/>
         <!--业务费系数  -->
         <result property="operatorrate" column="operatorrate"/>
         <!--是否已汇总  -->
         <result property="issummary" column="issummary"/>
         <result property="changeordercode" column="changeordercode"/>
         <result property="fstatusDesc" column="fstatusDesc"/>
		 
         <result property="businessratio" column="businessratio"/>
         <result property="salemanagerId" column="salemanagerId"/>
         <result property="salemanagerName" column="salemanagerName"/>
         <result property="salemanagerratio" column="salemanagerratio"/>
         <result property="areamanagerId" column="areamanagerId"/>
         <result property="areamanagerName" column="areamanagerName"/>
         <result property="areamanagerratio" column="areamanagerratio"/>
         <result property="fbselfratio" column="fbselfratio"/>
         <result property="fbsmratio" column="fbsmratio"/>
         <result property="fbamratio" column="fbamratio"/>
         
         <result property="relativestatus" column="relativestatus"/>
         
    </resultMap>
    <resultMap id="RM.SysOrder" class="com.terrence.crm.dol.bean.SysOrder">
        <result property="sysOrderId" column="sysOrderId"/>
        <result property="orderCode" column="orderCode"/>
        <result property="contractCode" column="contractCode"/>
        <result property="contractName" column="contractName"/>
        <result property="userId" column="userId"/>
        <result property="userName" column="userName"/>
        <result property="contractTime" column="contractTime"/>
        <result property="checkProject" column="checkProject"/>
        <result property="contractTxt" column="contractTxt"/>
        <result property="contractType" column="contractType"/>
        <result property="model" column="model"/>
        <result property="biddingNotice" column="biddingNotice"/>
        <result property="coinType" column="coinType"/>
        <result property="bussinessType" column="bussinessType"/>
        <result property="contractReview" column="contractReview"/>
        <result property="exchangeRate" column="exchangeRate"/>
        <result property="systemConsumer" column="systemConsumer"/>
        <result property="finalConsumer" column="finalConsumer"/>
        <result property="contractVersion" column="contractVersion"/>
        <result property="changeReason" column="changeReason"/>
        <result property="changeTime" column="changeTime"/>
        <result property="billUserId" column="billUserId"/>
        <result property="billUserName" column="billUserName"/>
        <result property="changeUserId" column="changeUserId"/>
        <result property="changeUserName" column="changeUserName"/>
        <result property="marketManagerAdvice" column="marketManagerAdvice"/>
        <result property="businessUser" column="businessUser"/>
        <result property="printCount" column="printCount"/>
        <result property="manager" column="manager"/>
        <result property="payCondition" column="payCondition"/>
        <result property="department" column="department"/>
        <result property="examineUserId" column="examineUserId"/>
        <result property="examineUserName" column="examineUserName"/>
        <result property="warrantyTime" column="warrantyTime"/>
        <result property="province" column="province"/>
        <result property="examineTime" column="examineTime"/>
        <result property="remarks" column="remarks"/>
        <result property="sysOrderStatus" column="sysOrderStatus"/>
        <result property="customContractCode" column="customContractCode"/>
        <result property="saleType" column="saleType"/>
        <result property="saleArea" column="saleArea"/>
        <result property="changeAreaType" column="changeAreaType"/>
        <result property="checkProjectId" column="checkProjectId"/>
        <result property="systemConsumerId" column="systemConsumerId"/>
        <result property="finalConsumerId" column="finalConsumerId"/>
        <result property="businessUserId" column="businessUserId"/>
        <result property="managerId" column="managerId"/>
        <result property="departmentId" column="departmentId"/>
        <result property="provinceId" column="provinceId"/>
        <result property="fheadSelfS0156" column="fheadSelfS0156"/>
        <!-- 经销系数 改为奖励系数-->
        <result property="disCoefficient" column="disCoefficient"/>
        <!-- 经销商 -->
        <result property="dealerName" column="dealerName"/>
        
        <result property="pL3000Count" column="pL3000Count"/>
        <result property="pL3000Unit" column="pL3000Unit"/>
        
        <result property="pL4200Count" column="pL4200Count"/>
        <result property="pL4200Unit" column="pL4200Unit"/>
        
        <result property="sSV3500Count" column="sSV3500Count"/>
        <result property="sSV3500Unit" column="sSV3500Unit"/>
        
        <result property="sPL2000Count" column="sPL2000Count"/>
        <result property="sPL2000Unit" column="sPL2000Unit"/>
        
        <!--国产PL产品列表价  -->
       	 <result property="pL3000ListPrice" column="pL3000ListPrice"/>
         <result property="pL4200ListPrice" column="pL4200ListPrice"/>
         <result property="sSV3500ListPrice" column="sSV3500ListPrice"/>
         <result property="sPL2000ListPrice" column="sPL2000ListPrice"/>
         <!--业务费系数  -->
         <result property="operatorrate" column="operatorrate"/>
         <!--是否已汇总  -->
         <result property="issummary" column="issummary"/>
         <result property="changeordercode" column="changeordercode"/>
         <result property="fstatusDesc" column="fstatusDesc"/>
		 
         <result property="businessratio" column="businessratio"/>
         <result property="salemanagerId" column="salemanagerId"/>
         <result property="salemanagerName" column="salemanagerName"/>
         <result property="salemanagerratio" column="salemanagerratio"/>
         <result property="areamanagerId" column="areamanagerId"/>
         <result property="areamanagerName" column="areamanagerName"/>
         <result property="areamanagerratio" column="areamanagerratio"/>
         <result property="fbselfratio" column="fbselfratio"/>
         <result property="fbsmratio" column="fbsmratio"/>
         <result property="fbamratio" column="fbamratio"/>
         
         
    </resultMap>
	<resultMap class="com.terrence.crm.dol.bean.SysOrder" id="RM.SysOrder.Product.Sum">
		<result property="famount" column="famount"/>
	</resultMap>
	
	<resultMap id="RM.SysOrder.summary" class="com.terrence.crm.dol.bean.SysOrder">
	    <result property="bussinessType" column="bussinessType"/>
		<result property="sysOrderId" column="sysOrderId"/>
		<result property="province" column="province"/>
		<result property="provinceId" column="provinceId"/>
		<result property="orderCode" column="orderCode"/>
	</resultMap>
	
	<resultMap id="RM.Order.SysOrderCodes" class="com.terrence.crm.dol.bean.SysOrder">
        <result property="sysOrderId" column="sysOrderId"/>
        <result property="orderCode" column="orderCode"/>
    </resultMap>
    <!-- 模糊查询 -->
    <resultMap id="RM.Order.listSysOrders" class="com.terrence.crm.dol.bean.SysOrder">
        <result property="sysOrderId" column="sysOrderId"/>
        <result property="orderCode" column="orderCode"/>
        <result property="contractCode" column="contractCode"/>
        <result property="checkProject" column="checkProject"/>
        <result property="contractTime" column="contractTime"/>
        <result property="totalFee" column="totalFee"/>
        
        <result property="businessUser" column="businessUser"/>
        <result property="businessUserId" column="businessUserId"/>
    </resultMap>
    
    <resultMap id="RM.Product.summary" class="com.terrence.crm.dol.bean.Product">
        <result property="productType" column="productType"/>
        <result property="productCount" column="productCount"/>
        <result property="unitPrice" column="unitPrice"/>
        <result property="servicecharge" column="servicecharge"/>
    </resultMap>
    
    <resultMap id="RM.Product" class="com.terrence.crm.dol.bean.Product">
        <result property="productId" column="productId"/>
        <result property="productName" column="productName"/>
        <result property="orderCode" column="orderCode"/>
        <result property="specifications" column="specifications"/>
        <result property="productCount" column="productCount"/>
        <result property="productType" column="productType"/>
        <result property="unitPrice" column="unitPrice"/>
        <result property="discount" column="discount"/>
        <result property="totalFee" column="totalFee"/>
        <result property="deliveryTime" column="deliveryTime"/>
        <result property="productVersion" column="productVersion"/>
        <result property="productCode" column="productCode"/>
        <result property="baseUnitName" column="baseUnitName"/>
        <result property="baseUnitCount" column="baseUnitCount"/>
        <result property="productUnit" column="productUnit"/>
        <result property="productAssistCount" column="productAssistCount"/>
        <result property="unitRemoveTax" column="unitRemoveTax"/>
        <result property="convertRate" column="convertRate"/>
        <result property="taxRate" column="taxRate"/>
        <result property="discountRate" column="discountRate"/>
        <result property="factUnitPrice" column="factUnitPrice"/>
        <result property="saleTax" column="saleTax"/>
        <result property="priceTaxTotal" column="priceTaxTotal"/>
        <result property="makeNumberCode" column="makeNumberCode"/>
        <result property="taskCode" column="taskCode"/>
        <result property="referCount" column="referCount"/>
        <result property="assistUnitReferCount" column="assistUnitReferCount"/>
        <result property="assistUnitOutHouseCount" column="assistUnitOutHouseCount"/>
        <result property="outHouseCount" column="outHouseCount"/>
        <result property="customBOM" column="customBOM"/>
        <result property="costObj" column="costObj"/>
        <result property="addOrDel" column="addOrDel"/>
        <result property="lockHouseMark" column="lockHouseMark"/>
        <result property="adviceDeliveryTime" column="adviceDeliveryTime"/>
        <result property="sourceOrderCode" column="sourceOrderCode"/>
        <result property="sourceOrderType" column="sourceOrderType"/>
        <result property="sourceOrderInnerCode" column="sourceOrderInnerCode"/>
        <result property="sourceOrderSplit" column="sourceOrderSplit"/>
        <result property="contactCode" column="contactCode"/>
        <result property="contactInnerCode" column="contactInnerCode"/>
        <result property="contactSplit" column="contactSplit"/>
        <result property="billCount" column="billCount"/>
        <result property="customOrderCode" column="customOrderCode"/>
        <result property="assistCompanyBillCount" column="assistCompanyBillCount"/>
        <result property="assistCompanyFitCount" column="assistCompanyFitCount"/>
        <result property="orderTrNumber" column="orderTrNumber"/>
        <result property="baseCompanyFitCount" column="baseCompanyFitCount"/>
        <result property="fitCount" column="fitCount"/>
        <result property="assistAttributeType" column="assistAttributeType"/>
        <result property="priceTaxTotalRM" column="priceTaxTotalRM"/>
        <result property="markForMRP" column="markForMRP"/>
        <result property="markIsForMRP" column="markIsForMRP"/>
        <result property="collectPayReferFee" column="collectPayReferFee"/>
        <result property="qualityFeeRate" column="qualityFeeRate"/>
        <result property="qualityFee" column="qualityFee"/>
        <result property="material" column="material"/>
        <result property="outSaleName" column="outSaleName"/>
        <result property="proProjectName" column="proProjectName"/>
        <result property="assistAttribute" column="assistAttribute"/>
        <result property="excuteStandard" column="excuteStandard"/>
        <result property="assistUnit" column="assistUnit"/>
        <result property="remarks" column="remarks"/>
        <!--销售单价
        <result property="saleprice" column="saleprice"/>--> 	 	 	 	 	
        <!--服务费-->
        <result property="servicecharge" column="servicecharge"/>
        <!--列表价-->
        <result property="listprice" column="listprice"/>
        <!--结算价-->
        <result property="balanceprice" column="balanceprice"/>
        <!--计量单位名-->
        <result property="measureunitname" column="measureunitname"/>
        <!--材质-->
        <result property="materialname" column="materialname"/>
        <!--web端统计用的折扣率-->
        <result property="fdiscountrate" column="fdiscountrate"/>
        <!--结算金额-->
        <result property="balancefee" column="balancefee"/>
        <!--//折扣额(本位币)fbusinessdiscount-->
        <result property="fbusinessdiscount" column="fbusinessdiscount"/> 
        <!--//税额(本币)ftax-->
        <result property="ftax" column="ftax"/> 
        <!--//金额(本币)famountfor-->
        <result property="famountfor" column="famountfor"/>
        <!--//含税单价(本币)ftaxprice-->
        <result property="ftaxprice" column="ftaxprice"/>
        
        <!--销售金额
        <result property="salefee" column="salefee"/>-->
    </resultMap>
    
    <resultMap id="RM.SysOrder.Product" class="com.terrence.crm.dol.bean.SysOrder">
        <result property="orderCode" column="orderCode"/>
        <result property="businessUserId" column="businessUserId"/>
        <result property="provinceId" column="provinceId"/>
        <!-- 经销系数 改为奖励系数-->
        <result property="disCoefficient" column="disCoefficient"/>
        <!-- 经销商 -->
        <result property="dealerName" column="dealerName"/>
        
        <result property="pL3000Count" column="pL3000Count"/>
        <result property="pL3000Unit" column="pL3000Unit"/>
        
        <result property="pL4200Count" column="pL4200Count"/>
        <result property="pL4200Unit" column="pL4200Unit"/>
        
        <result property="sSV3500Count" column="sSV3500Count"/>
        <result property="sSV3500Unit" column="sSV3500Unit"/>
        
        <result property="sPL2000Count" column="sPL2000Count"/>
        <result property="sPL2000Unit" column="sPL2000Unit"/>
        
        <!--国产PL产品列表价  -->
       	 <result property="pL3000ListPrice" column="pL3000ListPrice"/>
         <result property="pL4200ListPrice" column="pL4200ListPrice"/>
         <result property="sSV3500ListPrice" column="sSV3500ListPrice"/>
         <result property="sPL2000ListPrice" column="sPL2000ListPrice"/>
         <result property="model" column="model"/>
         <result property="plratio" resultMap="RM.SysOrder.Plratio"/>
        <result property="products" column="orderCode" select="Product.BySysOrder.findList"/>
        <!--业务费系数  -->
         <result property="operatorrate" column="operatorrate" nullValue="1"/>
    </resultMap>
    <resultMap class="com.terrence.crm.dol.bean.Plratio" id="RM.SysOrder.Plratio">
    	<result property="pl4200" column="PL4200"/>
        <result property="pl3000" column="PL3000"/>
        <result property="ssv3500" column="SSV3500"/>
        <result property="pl2000" column="PL2000"/>
        <result property="bratio" column="bratio"/>
        <result property="selfratio" column="selfratio"/>
        <result property="salesmanagerratio" column="salesmanagerratio"/>
        <result property="regionmanagerratio" column="regionmanagerratio"/>
        <result property="companyratio" column="companyratio"/>
    </resultMap>
    <resultMap id="RM.Product.BySysOrder" class="com.terrence.crm.dol.bean.Product">
        <result property="orderCode" column="orderCode"/>
        <result property="productCount" column="productCount"/>
        <result property="productType" column="productType"/>
        <result property="unitPrice" column="unitPrice"/>
        <result property="discount" column="discount"/>
        <result property="servicecharge" column="servicecharge"/>
        <result property="listprice" column="listprice"/>
        <result property="balanceprice" column="balanceprice"/>
        <result property="fdiscountrate" column="fdiscountrate"/>
        <result property="discountRate" column="discountrate"/>
    </resultMap>
	<sql id="Sysorder.columns1">
	    <![CDATA[
        	t_sysorder.sysOrderId ,
        	t_sysorder.orderCode ,
        	t_sysorder.contractCode ,
        	t_sysorder.contractName ,
        	t_sysorder.userName ,
        	t_sysorder.userId ,
        	t_sysorder.contractTime ,
        	t_sysorder.checkProject ,
        	t_sysorder.checkProjectId ,
        	t_sysorder.contractTxt ,
        	t_sysorder.contractType ,
        	t_sysorder.model ,
        	t_sysorder.biddingNotice ,
        	t_sysorder.coinType ,
        	t_sysorder.bussinessType ,
        	t_sysorder.contractReview ,
        	t_sysorder.exchangeRate ,
        	t_sysorder.systemConsumer ,
        	t_sysorder.systemConsumerId ,
        	t_sysorder.finalConsumer ,
        	t_sysorder.finalConsumerId ,
        	t_sysorder.contractVersion ,
        	t_sysorder.changeReason ,
        	t_sysorder.changeTime ,
        	t_sysorder.billUserId ,
        	t_sysorder.billUserName ,
        	t_sysorder.changeUserId ,
        	t_sysorder.changeUserName ,
        	t_sysorder.marketManagerAdvice ,
        	t_sysorder.businessUserId ,
        	t_sysorder.businessUser ,
        	t_sysorder.printCount ,
        	t_sysorder.manager ,
        	t_sysorder.managerId ,
        	t_sysorder.payCondition ,
        	t_sysorder.department ,
        	t_sysorder.departmentId ,
        	t_sysorder.examineUserId ,
        	t_sysorder.examineUserName ,
        	t_sysorder.warrantyTime ,
        	t_sysorder.province ,
        	t_sysorder.provinceId ,
        	t_sysorder.examineTime ,
        	t_sysorder.remarks ,
        	t_sysorder.sysOrderStatus ,
        	t_sysorder.customContractCode ,
        	t_sysorder.saleType ,
        	t_sysorder.saleArea ,
        	t_sysorder.changeAreaType ,
        	t_sysorder.fheadSelfS0156 ,
        	t_sysorder.disCoefficient ,
        	t_sysorder.dealerName ,
        	t_sysorder.pL3000Count ,
        	t_sysorder.pL3000Unit ,
        	t_sysorder.pL4200Count ,
        	t_sysorder.pL4200Unit ,
        	t_sysorder.sSV3500Count ,
        	t_sysorder.sSV3500Unit ,
        	t_sysorder.sPL2000Count ,
        	t_sysorder.sPL2000Unit ,
        	t_sysorder.pL3000ListPrice ,
        	t_sysorder.pL4200ListPrice ,
        	t_sysorder.sSV3500ListPrice ,
        	t_sysorder.sPL2000ListPrice ,
        	t_sysorder.containProductType ,
        	t_sysorder.operatorrate ,
        	t_sysorder.isbill ,
        	t_sysorder.issummary 
	    ]]>
	</sql>
	<!-- 用于select查询公用抽取的列 -->
	<sql id="SysOrder.columns">
	    <![CDATA[ t_sysorder.checkProject,
        t_sysorder.sysOrderId ,t_sysorder.orderCode,t_sysorder.contractCode,t_sysorder.contractName, t_sysorder.userId ,t_sysorder.userName,t_sysorder.contractTime ,t_sysorder.contractTxt,t_sysorder.contractType,t_sysorder.model,
        t_sysorder.biddingNotice,t_sysorder.coinType,bussinessType,t_sysorder.contractReview,t_sysorder.exchangeRate,t_sysorder.contractVersion,t_sysorder.changeReason,
       	t_sysorder.changeTime,t_sysorder.billUserId,t_sysorder.billUserName,t_sysorder.changeUserId,t_sysorder.marketManagerAdvice,t_sysorder.printCount,t_sysorder.manager,t_sysorder.payCondition,
        t_sysorder.examineUserId,warrantyTime,t_sysorder.examineTime,t_sysorder.remarks,t_sysorder.sysOrderStatus,
        t_sysorder.customContractCode,t_sysorder.saleType,t_sysorder.saleArea,t_sysorder.changeAreaType,t_sysorder.checkProjectId,t_sysorder.systemConsumerId,t_sysorder.finalConsumerId,t_sysorder.businessUserId,
        t_sysorder.managerId,t_sysorder.departmentId,t_sysorder.fheadSelfS0156,t_sysorder.disCoefficient,t_sysorder.dealerName,
        pL3000Count,pL3000Unit,
        pL4200Count,pL4200Unit,
        sSV3500Count,sSV3500Unit,
        sPL2000Count,sPL2000Unit,
        pL3000ListPrice,pL4200ListPrice,
        sSV3500ListPrice,sPL2000ListPrice,operatorrate,issummary,
        t_sysorder.fstatusDesc,
        t_sysorder.businessratio,
        t_sysorder.salemanagerId,
        t_sysorder.salemanagerName,
        t_sysorder.salemanagerratio,
        t_sysorder.areamanagerId,
        t_sysorder.areamanagerName,
        t_sysorder.areamanagerratio,
        t_sysorder.fbselfratio,
        t_sysorder.fbsmratio,
        t_sysorder.fbamratio
	    ]]>
	</sql>
	<sql id="SysOrder.columns.summary">
	    <![CDATA[ 
	    bussinessType,sysOrderId,province,provinceId,orderCode
	    ]]>
	</sql>

	<sql id="SysOrder.ProductInfo.columns">
	    <![CDATA[ productType,productCount,unitPrice,servicecharge
	    ]]>
	</sql>
	<!-- 查询系统订单是否有待审核,或已经生效 -->
    <select id="Order.findlistBySysOrderCodes" resultMap="RM.Order.SysOrderCodes">
	    select sysOrderId,orderCode
	        from t_sysorder
	        where 
	        (sysOrderStatus=1 or sysOrderStatus=2)
		         and orderCode in ($orderCodes$)
    </select>
    
    <!-- 查询系统订单-->
    <select id="Order.listSysOrders" resultMap="RM.Order.listSysOrders">
	    select top 10 sysOrderId,a.totalFee, 
	    t_sysorder.orderCode ,t_sysorder.contractCode ,t_sysorder.checkProject ,
	    t_sysorder.contractTime ,t_sysorder.businessUser ,t_sysorder.businessUserId
	    from
		 t_sysorder,
		(
		SELECT   orderCode,sum(totalFee) totalFee
		  FROM t_product
		  group by orderCode ) as a
		where t_sysorder.orderCode=a.orderCode
		and t_sysorder.contractCode like ('%$contractCode$%') 
		order by t_sysorder.sysOrderId
    </select>
    <!-- 查询系统订单BAK-->
    <select id="Order.listSysOrdersBAK" resultMap="RM.Order.listSysOrders">
	    select top 10 sysOrderId,a.totalFee, 
	    t_sysorder.orderCode ,t_sysorder.contractCode ,t_sysorder.checkProject ,
	    t_sysorder.contractTime ,t_sysorder.businessUser ,t_sysorder.businessUserId
	    from
		 t_sysorder,
		(
		SELECT   orderCode,sum(totalFee) totalFee
		  FROM t_product
		  group by orderCode ) as a
		where t_sysorder.orderCode=a.orderCode
		and t_sysorder.orderCode like ('%$orderCode$%') 
		order by t_sysorder.sysOrderId
    </select>
    
    <!-- 查询系统订单通过系统订单编号 -->
    <select id="Order.findlistBySysOrderCode" resultMap="RM.Order.SysOrderCodes">
	    select sysOrderId,orderCode
	        <![CDATA[
	        FROM t_sysorder
	        WHERE 
		        contractCode = #contractCode# 
	    ]]>
    </select>
    

	<sql id="SysOrder.Product.columns">
	    <![CDATA[
        orderCode ,productCount , productType,unitPrice,discount,servicecharge ,listprice ,balanceprice,fdiscountrate,discountrate 
	    ]]>
	</sql>
	
	 <insert id="BaseItem.insert.bantch" parameterClass="java.util.List">  
	     
	        INSERT INTO t_sysorder
	        orderCode
        ) VALUES  
	    <iterate conjunction="," property="sysOrderList" >  
	         
	    (
	           #sysOrderList[].orderCode#
        )
	         
	    </iterate>  
	</insert> 
	
    <insert id="SysOrder.insert" >
        INSERT INTO t_sysorder (
        orderCode
		<dynamic prepend="">
			<isNotEmpty prepend="," property="contractCode">contractCode</isNotEmpty>
			<isNotEmpty prepend="," property="contractName">contractName</isNotEmpty>
			<isNotEmpty prepend="," property="userId">userId</isNotEmpty>
			<isNotEmpty prepend="," property="userName">userName</isNotEmpty>
			<isNotEmpty prepend="," property="checkProject">checkProject</isNotEmpty>
			<isNotEmpty prepend="," property="contractTxt">contractTxt</isNotEmpty>
			<isNotEmpty prepend="," property="contractType">contractType</isNotEmpty>
			<isNotEmpty prepend="," property="model">model</isNotEmpty>
			<isNotEmpty prepend="," property="biddingNotice">biddingNotice</isNotEmpty>
			<isNotEmpty prepend="," property="coinType">coinType</isNotEmpty>
			<isNotEmpty prepend="," property="bussinessType">bussinessType</isNotEmpty>
			<isNotEmpty prepend="," property="contractReview">contractReview</isNotEmpty>
			<isNotEmpty prepend="," property="exchangeRate">exchangeRate</isNotEmpty>
			<isNotEmpty prepend="," property="systemConsumer">systemConsumer</isNotEmpty>
			<isNotEmpty prepend="," property="finalConsumer">finalConsumer</isNotEmpty>
			<isNotEmpty prepend="," property="contractVersion">contractVersion</isNotEmpty>
			<isNotEmpty prepend="," property="changeReason">changeReason</isNotEmpty>
			<isNotEmpty prepend="," property="billUserId">billUserId</isNotEmpty>
			<isNotEmpty prepend="," property="billUserName">billUserName</isNotEmpty>
			
			<isNotEmpty prepend="," property="changeUserId">changeUserId</isNotEmpty>
			<isNotEmpty prepend="," property="changeUserName">changeUserName</isNotEmpty>
			<isNotEmpty prepend="," property="marketManagerAdvice">marketManagerAdvice</isNotEmpty>
			<isNotEmpty prepend="," property="businessUser">businessUser</isNotEmpty>
			<isNotEmpty prepend="," property="printCount">printCount</isNotEmpty>
			<isNotEmpty prepend="," property="manager">manager</isNotEmpty>
			<isNotEmpty prepend="," property="payCondition">payCondition</isNotEmpty>
			<isNotEmpty prepend="," property="department">department</isNotEmpty>
			<isNotEmpty prepend="," property="examineUserId">examineUserId</isNotEmpty>
			<isNotEmpty prepend="," property="examineUserName">examineUserName</isNotEmpty>
			<isNotEmpty prepend="," property="warrantyTime">warrantyTime</isNotEmpty>
			<isNotEmpty prepend="," property="province">province</isNotEmpty>
			<isNotEmpty prepend="," property="remarks">remarks</isNotEmpty>
			<isNotEmpty prepend="," property="sysOrderStatus">sysOrderStatus</isNotEmpty>
			<isNotEmpty prepend="," property="contractTime">contractTime</isNotEmpty>
			<isNotEmpty prepend="," property="changeTime">changeTime</isNotEmpty>
        	<isNotEmpty prepend="," property="examineTime">examineTime</isNotEmpty>
        	<isNotEmpty prepend="," property="customContractCode">customContractCode</isNotEmpty>
        	<isNotEmpty prepend="," property="saleType">saleType</isNotEmpty>
        	<isNotEmpty prepend="," property="saleArea">saleArea</isNotEmpty>
        	<isNotEmpty prepend="," property="changeAreaType">changeAreaType</isNotEmpty>
        	<isNotEmpty prepend="," property="checkProjectId">checkProjectId</isNotEmpty>
        	<isNotEmpty prepend="," property="systemConsumerId">systemConsumerId</isNotEmpty>
        	<isNotEmpty prepend="," property="finalConsumerId">finalConsumerId</isNotEmpty>
        	<isNotEmpty prepend="," property="businessUserId">businessUserId</isNotEmpty>
        	<isNotEmpty prepend="," property="managerId">managerId#</isNotEmpty>
        	<isNotEmpty prepend="," property="departmentId">departmentId</isNotEmpty>
        	<isNotEmpty prepend="," property="provinceId">provinceId</isNotEmpty>
        	<isNotEmpty prepend="," property="fheadSelfS0156">fheadSelfS0156</isNotEmpty>
        	<!-- 经销系数 改为奖励系数-->
        	<isNotEmpty prepend="," property="disCoefficient">disCoefficient</isNotEmpty>
	        <!-- 经销商 -->
	        <isNotEmpty prepend="," property="dealerName">dealerName</isNotEmpty>
	        <!-- 
	        pL3000Count,pL3000Unit,
        pL4200Count,pL4200Unit,
        
        sSV3500Count,sSV3500Unit,
        sPL2000Count,sPL2000Unit,
        
        pL3000ListPrice,pL4200ListPrice,
        sSV3500ListPrice,sPL2000ListPrice
	         -->
	         <!-- 国产PL产品信息 -->
	        <isNotEmpty prepend="," property="pL3000Count">pL3000Count</isNotEmpty>
	        <isNotEmpty prepend="," property="pL3000Unit">pL3000Unit</isNotEmpty>
	        <isNotEmpty prepend="," property="pL4200Count">pL4200Count</isNotEmpty>
	        <isNotEmpty prepend="," property="pL4200Unit">pL4200Unit</isNotEmpty>
	        
	        <isNotEmpty prepend="," property="sSV3500Count">sSV3500Count</isNotEmpty>
	        <isNotEmpty prepend="," property="sSV3500Unit">sSV3500Unit</isNotEmpty>
	        <isNotEmpty prepend="," property="sPL2000Count">sPL2000Count</isNotEmpty>
	        <isNotEmpty prepend="," property="sPL2000Unit">sPL2000Unit</isNotEmpty>
	        
	        <isNotEmpty prepend="," property="pL3000ListPrice">pL3000ListPrice</isNotEmpty>
	        <isNotEmpty prepend="," property="pL4200ListPrice">pL4200ListPrice</isNotEmpty>
	        <isNotEmpty prepend="," property="sSV3500ListPrice">sSV3500ListPrice</isNotEmpty>
	        <isNotEmpty prepend="," property="sPL2000ListPrice">sPL2000ListPrice</isNotEmpty>
	        <!--业务费系数-->
	        <isNotEmpty prepend="," property="operatorrate">operatorrate</isNotEmpty>
	        <!--是否已汇总-->
	        <isNotEmpty prepend="," property="issummary">issummary</isNotEmpty>
	        
	        <isNotEmpty prepend="," property="businessratio">businessratio</isNotEmpty>
	        <isNotEmpty prepend="," property="salemanagerId">salemanagerId</isNotEmpty>
	        <isNotEmpty prepend="," property="salemanagerName">salemanagerName</isNotEmpty>
	        <isNotEmpty prepend="," property="salemanagerratio">salemanagerratio</isNotEmpty>
	        <isNotEmpty prepend="," property="areamanagerId">areamanagerId</isNotEmpty>
	        <isNotEmpty prepend="," property="areamanagerName">areamanagerName</isNotEmpty>
	        <isNotEmpty prepend="," property="areamanagerratio">areamanagerratio</isNotEmpty>
	        <isNotEmpty prepend="," property="fbselfratio">fbselfratio</isNotEmpty>
	        <isNotEmpty prepend="," property="fbsmratio">fbsmratio</isNotEmpty>
	        <isNotEmpty prepend="," property="fbamratio">fbamratio</isNotEmpty>
	        
		</dynamic>
        ) VALUES (
        #orderCode#
		<dynamic prepend="">
			<isNotEmpty prepend="," property="contractCode">#contractCode#</isNotEmpty>
			<isNotEmpty prepend="," property="contractName">#contractName#</isNotEmpty>
			<isNotEmpty prepend="," property="userId">#userId#</isNotEmpty>
			<isNotEmpty prepend="," property="userName">#userName#</isNotEmpty>
			<isNotEmpty prepend="," property="checkProject">#checkProject#</isNotEmpty>
			<isNotEmpty prepend="," property="contractTxt">#contractTxt#</isNotEmpty>
			<isNotEmpty prepend="," property="contractType">#contractType#</isNotEmpty>
			<isNotEmpty prepend="," property="model">#model#</isNotEmpty>
			<isNotEmpty prepend="," property="biddingNotice">#biddingNotice#</isNotEmpty>
			<isNotEmpty prepend="," property="coinType">#coinType#</isNotEmpty>
			<isNotEmpty prepend="," property="bussinessType">#bussinessType#</isNotEmpty>
			<isNotEmpty prepend="," property="contractReview">#contractReview#</isNotEmpty>
			<isNotEmpty prepend="," property="exchangeRate">#exchangeRate#</isNotEmpty>
			<isNotEmpty prepend="," property="systemConsumer">#systemConsumer#</isNotEmpty>
			<isNotEmpty prepend="," property="finalConsumer">#finalConsumer#</isNotEmpty>
			<isNotEmpty prepend="," property="contractVersion">#contractVersion#</isNotEmpty>
			<isNotEmpty prepend="," property="changeReason">#changeReason#</isNotEmpty>
			<isNotEmpty prepend="," property="billUserId">#billUserId#</isNotEmpty>
			<isNotEmpty prepend="," property="billUserName">#billUserName#</isNotEmpty>
			
			<isNotEmpty prepend="," property="changeUserId">#changeUserId#</isNotEmpty>
			<isNotEmpty prepend="," property="changeUserName">#changeUserName#</isNotEmpty>
			<isNotEmpty prepend="," property="marketManagerAdvice">#marketManagerAdvice#</isNotEmpty>
			<isNotEmpty prepend="," property="businessUser">#businessUser#</isNotEmpty>
			<isNotEmpty prepend="," property="printCount">#printCount#</isNotEmpty>
			<isNotEmpty prepend="," property="manager">#manager#</isNotEmpty>
			<isNotEmpty prepend="," property="payCondition">#payCondition#</isNotEmpty>
			<isNotEmpty prepend="," property="department">#department#</isNotEmpty>
			<isNotEmpty prepend="," property="examineUserId">#examineUserId#</isNotEmpty>
			<isNotEmpty prepend="," property="examineUserName">#examineUserName#</isNotEmpty>
			<isNotEmpty prepend="," property="warrantyTime">#warrantyTime#</isNotEmpty>
			<isNotEmpty prepend="," property="province">#province#</isNotEmpty>
			<isNotEmpty prepend="," property="remarks">#remarks#</isNotEmpty>
			<isNotEmpty prepend="," property="sysOrderStatus">#sysOrderStatus#</isNotEmpty>
			<isNotEmpty prepend="," property="contractTime">#contractTime#</isNotEmpty>
			<isNotEmpty prepend="," property="changeTime">#changeTime#</isNotEmpty>
        	<isNotEmpty prepend="," property="examineTime">#examineTime#</isNotEmpty>
        	<isNotEmpty prepend="," property="customContractCode">#customContractCode#</isNotEmpty>
        	<isNotEmpty prepend="," property="saleType">#saleType#</isNotEmpty>
        	<isNotEmpty prepend="," property="saleArea">#saleArea#</isNotEmpty>
        	<isNotEmpty prepend="," property="changeAreaType">#changeAreaType#</isNotEmpty>
        	<isNotEmpty prepend="," property="checkProjectId">#checkProjectId#</isNotEmpty>
        	<isNotEmpty prepend="," property="systemConsumerId">#systemConsumerId#</isNotEmpty>
        	<isNotEmpty prepend="," property="finalConsumerId">#finalConsumerId#</isNotEmpty>
        	<isNotEmpty prepend="," property="businessUserId">#businessUserId#</isNotEmpty>
        	<isNotEmpty prepend="," property="managerId">#managerId#</isNotEmpty>
        	<isNotEmpty prepend="," property="departmentId">#departmentId#</isNotEmpty>
        	<isNotEmpty prepend="," property="provinceId">#provinceId#</isNotEmpty>
        	<isNotEmpty prepend="," property="fheadSelfS0156">#fheadSelfS0156#</isNotEmpty>
        	<!-- 经销系数 改为奖励系数-->
        	<isNotEmpty prepend="," property="disCoefficient">#disCoefficient#</isNotEmpty>
	        <!-- 经销商 -->
	        <isNotEmpty prepend="," property="dealerName">#dealerName#</isNotEmpty>
	        <!-- 国产PL产品信息 -->
	        <isNotEmpty prepend="," property="pL3000Count">#pL3000Count#</isNotEmpty>
	        <isNotEmpty prepend="," property="pL3000Unit">#pL3000Unit#</isNotEmpty>
	        <isNotEmpty prepend="," property="pL4200Count">#pL4200Count#</isNotEmpty>
	        <isNotEmpty prepend="," property="pL4200Unit">#pL4200Unit#</isNotEmpty>
	        
	        <isNotEmpty prepend="," property="sSV3500Count">#sSV3500Count#</isNotEmpty>
	        <isNotEmpty prepend="," property="sSV3500Unit">#sSV3500Unit#</isNotEmpty>
	        <isNotEmpty prepend="," property="sPL2000Count">#sPL2000Count#</isNotEmpty>
	        <isNotEmpty prepend="," property="sPL2000Unit">#sPL2000Unit#</isNotEmpty>
	        
	        <isNotEmpty prepend="," property="pL3000ListPrice">#pL3000ListPrice#</isNotEmpty>
	        <isNotEmpty prepend="," property="pL4200ListPrice">#pL4200ListPrice#</isNotEmpty>
	        <isNotEmpty prepend="," property="sSV3500ListPrice">#sSV3500ListPrice#</isNotEmpty>
	        <isNotEmpty prepend="," property="sPL2000ListPrice">#sPL2000ListPrice#</isNotEmpty>
	        <!--业务费系数-->
	        <isNotEmpty prepend="," property="operatorrate">#operatorrate#</isNotEmpty>
	        <!--是否已汇总-->
	        <isNotEmpty prepend="," property="issummary">#issummary#</isNotEmpty>
	        
	        <isNotEmpty prepend="," property="businessratio">#businessratio#</isNotEmpty>
	        <isNotEmpty prepend="," property="salemanagerId">#salemanagerId#</isNotEmpty>
	        <isNotEmpty prepend="," property="salemanagerName">#salemanagerName#</isNotEmpty>
	        <isNotEmpty prepend="," property="salemanagerratio">#salemanagerratio#</isNotEmpty>
	        <isNotEmpty prepend="," property="areamanagerId">#areamanagerId#</isNotEmpty>
	        <isNotEmpty prepend="," property="areamanagerName">#areamanagerName#</isNotEmpty>
	        <isNotEmpty prepend="," property="areamanagerratio">#areamanagerratio#</isNotEmpty>
	        <isNotEmpty prepend="," property="fbselfratio">#fbselfratio#</isNotEmpty>
	        <isNotEmpty prepend="," property="fbsmratio">#fbsmratio#</isNotEmpty>
	        <isNotEmpty prepend="," property="fbamratio">#fbamratio#</isNotEmpty>
	        
		</dynamic>
        )
        <selectKey resultClass="java.lang.Long" type="post" keyProperty="sysOrderId" >
            SELECT  @@identity  AS  ID
        </selectKey>
    </insert>
	<insert id="SysOrder.insert.history" >
        INSERT INTO t_sysorder_history (
        orderCode
		<dynamic prepend="">
			<isNotEmpty prepend="," property="contractCode">contractCode</isNotEmpty>
			<isNotEmpty prepend="," property="contractName">contractName</isNotEmpty>
			<isNotEmpty prepend="," property="userId">userId</isNotEmpty>
			<isNotEmpty prepend="," property="userName">userName</isNotEmpty>
			<isNotEmpty prepend="," property="checkProject">checkProject</isNotEmpty>
			<isNotEmpty prepend="," property="contractTxt">contractTxt</isNotEmpty>
			<isNotEmpty prepend="," property="contractType">contractType</isNotEmpty>
			<isNotEmpty prepend="," property="model">model</isNotEmpty>
			<isNotEmpty prepend="," property="biddingNotice">biddingNotice</isNotEmpty>
			<isNotEmpty prepend="," property="coinType">coinType</isNotEmpty>
			<isNotEmpty prepend="," property="bussinessType">bussinessType</isNotEmpty>
			<isNotEmpty prepend="," property="contractReview">contractReview</isNotEmpty>
			<isNotEmpty prepend="," property="exchangeRate">exchangeRate</isNotEmpty>
			<isNotEmpty prepend="," property="systemConsumer">systemConsumer</isNotEmpty>
			<isNotEmpty prepend="," property="finalConsumer">finalConsumer</isNotEmpty>
			<isNotEmpty prepend="," property="contractVersion">contractVersion</isNotEmpty>
			<isNotEmpty prepend="," property="changeReason">changeReason</isNotEmpty>
			<isNotEmpty prepend="," property="billUserId">billUserId</isNotEmpty>
			<isNotEmpty prepend="," property="changeUserId">changeUserId</isNotEmpty>
			<isNotEmpty prepend="," property="changeUserName">changeUserName</isNotEmpty>
			<isNotEmpty prepend="," property="marketManagerAdvice">marketManagerAdvice</isNotEmpty>
			<isNotEmpty prepend="," property="businessUser">businessUser</isNotEmpty>
			<isNotEmpty prepend="," property="printCount">printCount</isNotEmpty>
			<isNotEmpty prepend="," property="manager">manager</isNotEmpty>
			<isNotEmpty prepend="," property="payCondition">payCondition</isNotEmpty>
			<isNotEmpty prepend="," property="department">department</isNotEmpty>
			<isNotEmpty prepend="," property="examineUserId">examineUserId</isNotEmpty>
			<isNotEmpty prepend="," property="examineUserName">examineUserName</isNotEmpty>
			<isNotEmpty prepend="," property="warrantyTime">warrantyTime</isNotEmpty>
			<isNotEmpty prepend="," property="province">province</isNotEmpty>
			<isNotEmpty prepend="," property="remarks">remarks</isNotEmpty>
			<isNotEmpty prepend="," property="sysOrderStatus">sysOrderStatus</isNotEmpty>
			<isNotEmpty prepend="," property="contractTime">contractTime</isNotEmpty>
			<isNotEmpty prepend="," property="changeTime">changeTime</isNotEmpty>
        	<isNotEmpty prepend="," property="examineTime">examineTime</isNotEmpty>
        	<isNotEmpty prepend="," property="customContractCode">customContractCode</isNotEmpty>
        	<isNotEmpty prepend="," property="saleType">saleType</isNotEmpty>
        	<isNotEmpty prepend="," property="saleArea">saleArea</isNotEmpty>
        	<isNotEmpty prepend="," property="changeAreaType">changeAreaType</isNotEmpty>
        	<isNotEmpty prepend="," property="checkProjectId">checkProjectId</isNotEmpty>
        	<isNotEmpty prepend="," property="systemConsumerId">systemConsumerId</isNotEmpty>
        	<isNotEmpty prepend="," property="finalConsumerId">finalConsumerId</isNotEmpty>
        	<isNotEmpty prepend="," property="businessUserId">businessUserId</isNotEmpty>
        	<isNotEmpty prepend="," property="managerId">managerId#</isNotEmpty>
        	<isNotEmpty prepend="," property="departmentId">departmentId</isNotEmpty>
        	<isNotEmpty prepend="," property="provinceId">provinceId</isNotEmpty>
        	<isNotEmpty prepend="," property="fheadSelfS0156">fheadSelfS0156</isNotEmpty>
        	
        	<!-- 经销系数 改为奖励系数-->
        	<isNotEmpty prepend="," property="disCoefficient">disCoefficient</isNotEmpty>
	        <!-- 经销商 -->
	        <isNotEmpty prepend="," property="dealerName">dealerName</isNotEmpty>
	        
	        <!-- 国产PL产品信息 -->
	        <isNotEmpty prepend="," property="pL3000Count">pL3000Count</isNotEmpty>
	        <isNotEmpty prepend="," property="pL3000Unit">pL3000Unit</isNotEmpty>
	        <isNotEmpty prepend="," property="pL4200Count">pL4200Count</isNotEmpty>
	        <isNotEmpty prepend="," property="pL4200Unit">pL4200Unit</isNotEmpty>
	        
	        <isNotEmpty prepend="," property="sSV3500Count">sSV3500Count</isNotEmpty>
	        <isNotEmpty prepend="," property="sSV3500Unit">sSV3500Unit</isNotEmpty>
	        <isNotEmpty prepend="," property="sPL2000Count">sPL2000Count</isNotEmpty>
	        <isNotEmpty prepend="," property="sPL2000Unit">sPL2000Unit</isNotEmpty>
	        
	        <isNotEmpty prepend="," property="pL3000ListPrice">pL3000ListPrice</isNotEmpty>
	        <isNotEmpty prepend="," property="pL4200ListPrice">pL4200ListPrice</isNotEmpty>
	        <isNotEmpty prepend="," property="sSV3500ListPrice">sSV3500ListPrice</isNotEmpty>
	        <isNotEmpty prepend="," property="sPL2000ListPrice">sPL2000ListPrice</isNotEmpty>
	        <!--业务费系数-->
	        <isNotEmpty prepend="," property="operatorrate">operatorrate</isNotEmpty>
		</dynamic>
        ) VALUES (
        #orderCode#
       	<dynamic prepend="">
			<isNotEmpty prepend="," property="contractCode">#contractCode#</isNotEmpty>
			<isNotEmpty prepend="," property="contractName">#contractName#</isNotEmpty>
			<isNotEmpty prepend="," property="userId">#userId#</isNotEmpty>
			<isNotEmpty prepend="," property="userName">#userName#</isNotEmpty>
			<isNotEmpty prepend="," property="checkProject">#checkProject#</isNotEmpty>
			<isNotEmpty prepend="," property="contractTxt">#contractTxt#</isNotEmpty>
			<isNotEmpty prepend="," property="contractType">#contractType#</isNotEmpty>
			<isNotEmpty prepend="," property="model">#model#</isNotEmpty>
			<isNotEmpty prepend="," property="biddingNotice">#biddingNotice#</isNotEmpty>
			<isNotEmpty prepend="," property="coinType">#coinType#</isNotEmpty>
			<isNotEmpty prepend="," property="bussinessType">#bussinessType#</isNotEmpty>
			<isNotEmpty prepend="," property="contractReview">#contractReview#</isNotEmpty>
			<isNotEmpty prepend="," property="exchangeRate">#exchangeRate#</isNotEmpty>
			<isNotEmpty prepend="," property="systemConsumer">#systemConsumer#</isNotEmpty>
			<isNotEmpty prepend="," property="finalConsumer">#finalConsumer#</isNotEmpty>
			<isNotEmpty prepend="," property="contractVersion">#contractVersion#</isNotEmpty>
			<isNotEmpty prepend="," property="changeReason">#changeReason#</isNotEmpty>
			<isNotEmpty prepend="," property="billUserId">#billUserId#</isNotEmpty>
			<isNotEmpty prepend="," property="changeUserId">#changeUserId#</isNotEmpty>
			<isNotEmpty prepend="," property="changeUserName">#changeUserName#</isNotEmpty>
			<isNotEmpty prepend="," property="marketManagerAdvice">#marketManagerAdvice#</isNotEmpty>
			<isNotEmpty prepend="," property="businessUser">#businessUser#</isNotEmpty>
			<isNotEmpty prepend="," property="printCount">#printCount#</isNotEmpty>
			<isNotEmpty prepend="," property="manager">#manager#</isNotEmpty>
			<isNotEmpty prepend="," property="payCondition">#payCondition#</isNotEmpty>
			<isNotEmpty prepend="," property="department">#department#</isNotEmpty>
			<isNotEmpty prepend="," property="examineUserId">#examineUserId#</isNotEmpty>
			<isNotEmpty prepend="," property="examineUserName">#examineUserName#</isNotEmpty>
			<isNotEmpty prepend="," property="warrantyTime">#warrantyTime#</isNotEmpty>
			<isNotEmpty prepend="," property="province">#province#</isNotEmpty>
			<isNotEmpty prepend="," property="remarks">#remarks#</isNotEmpty>
			<isNotEmpty prepend="," property="sysOrderStatus">#sysOrderStatus#</isNotEmpty>
			<isNotEmpty prepend="," property="contractTime">#contractTime#</isNotEmpty>
			<isNotEmpty prepend="," property="changeTime">#changeTime#</isNotEmpty>
        	<isNotEmpty prepend="," property="examineTime">#examineTime#</isNotEmpty>
        	<isNotEmpty prepend="," property="customContractCode">#customContractCode#</isNotEmpty>
        	<isNotEmpty prepend="," property="saleType">#saleType#</isNotEmpty>
        	<isNotEmpty prepend="," property="saleArea">#saleArea#</isNotEmpty>
        	<isNotEmpty prepend="," property="changeAreaType">#changeAreaType#</isNotEmpty>
        	<isNotEmpty prepend="," property="checkProjectId">#checkProjectId#</isNotEmpty>
        	<isNotEmpty prepend="," property="systemConsumerId">#systemConsumerId#</isNotEmpty>
        	<isNotEmpty prepend="," property="finalConsumerId">#finalConsumerId#</isNotEmpty>
        	<isNotEmpty prepend="," property="businessUserId">#businessUserId#</isNotEmpty>
        	<isNotEmpty prepend="," property="managerId">#managerId#</isNotEmpty>
        	<isNotEmpty prepend="," property="departmentId">#departmentId#</isNotEmpty>
        	<isNotEmpty prepend="," property="provinceId">#provinceId#</isNotEmpty>
        	<isNotEmpty prepend="," property="fheadSelfS0156">#fheadSelfS0156#</isNotEmpty>
        	
        	<!-- 经销系数 改为奖励系数-->
        	<isNotEmpty prepend="," property="disCoefficient">#disCoefficient#</isNotEmpty>
	        <!-- 经销商 -->
	        <isNotEmpty prepend="," property="dealerName">#dealerName#</isNotEmpty>
	        
	        <!-- 国产PL产品信息 -->
	        <isNotEmpty prepend="," property="pL3000Count">#pL3000Count#</isNotEmpty>
	        <isNotEmpty prepend="," property="pL3000Unit">#pL3000Unit#</isNotEmpty>
	        <isNotEmpty prepend="," property="pL4200Count">#pL4200Count#</isNotEmpty>
	        <isNotEmpty prepend="," property="pL4200Unit">#pL4200Unit#</isNotEmpty>
	        
	        <isNotEmpty prepend="," property="sSV3500Count">#sSV3500Count#</isNotEmpty>
	        <isNotEmpty prepend="," property="sSV3500Unit">#sSV3500Unit#</isNotEmpty>
	        <isNotEmpty prepend="," property="sPL2000Count">#sPL2000Count#</isNotEmpty>
	        <isNotEmpty prepend="," property="sPL2000Unit">#sPL2000Unit#</isNotEmpty>
	        
	        <isNotEmpty prepend="," property="pL3000ListPrice">#pL3000ListPrice#</isNotEmpty>
	        <isNotEmpty prepend="," property="pL4200ListPrice">#pL4200ListPrice#</isNotEmpty>
	        <isNotEmpty prepend="," property="sSV3500ListPrice">#sSV3500ListPrice#</isNotEmpty>
	        <isNotEmpty prepend="," property="sPL2000ListPrice">#sPL2000ListPrice#</isNotEmpty>
	        <!--业务费系数-->
	        <isNotEmpty prepend="," property="operatorrate">#operatorrate#</isNotEmpty>
		</dynamic>
        )
        <!-- 
        <selectKey resultClass="java.lang.Long" type="post" keyProperty="sysOrderId" >
            SELECT  @@identity  AS  ID
        </selectKey>
         -->
    </insert>
    <update id="SysOrder.update">
        UPDATE t_sysorder
        	<dynamic prepend="SET">
       			<isNotEmpty prepend="," property="orderCode">
        			orderCode = #orderCode# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="contractCode">
        			contractCode = #contractCode# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="contractName">
        			contractName = #contractName# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="contractTime">
        			contractTime = #contractTime# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="contractTxt">
        			contractTxt = #contractTxt# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="contractType">
        			contractType = #contractType# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="model">
        			model = #model# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="checkProject">
        			checkProject = #checkProject# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="biddingNotice">
        			biddingNotice = #biddingNotice# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="coinType">
        			coinType = #coinType# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="bussinessType">
        			bussinessType = #bussinessType# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="contractReview">
        			contractReview = #contractReview# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="exchangeRate">
        			exchangeRate = #exchangeRate# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="systemConsumer">
        			systemConsumer = #systemConsumer# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="finalConsumer">
        			finalConsumer = #finalConsumer# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="contractVersion">
        			contractVersion = #contractVersion# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="changeReason">
        			changeReason = #changeReason# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="changeTime">
        			changeTime = #changeTime# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="changeUserId">
        			changeUserId = #changeUserId# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="changeUserName">
        			changeUserName = #changeUserName# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="businessUser">
        			businessUser = #businessUser# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="manager">
        			manager = #manager# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="payCondition">
        			payCondition = #payCondition# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="department">
        			department = #department# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="examineUserId">
        			examineUserId = #examineUserId# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="examineUserName">
        			examineUserName = #examineUserName# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="warrantyTime">
        			warrantyTime = #warrantyTime# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="province">
        			province = #province# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="examineTime">
        			examineTime = #examineTime# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="remarks">
        			remarks = #remarks# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="sysOrderStatus">
        			sysOrderStatus = #sysOrderStatus# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="customContractCode">
        			customContractCode = #customContractCode# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="saleType">
        			saleType = #saleType# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="saleArea">
        			saleArea = #saleArea# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="changeAreaType">
        			changeAreaType = #changeAreaType# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="checkProjectId">
        			checkProjectId = #checkProjectId# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="finalConsumerId">
        			finalConsumerId = #finalConsumerId# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="systemConsumerId">
        			systemConsumerId = #systemConsumerId# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="businessUserId">
        			businessUserId = #businessUserId# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="managerId">
        			managerId = #managerId# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="departmentId">
        			departmentId = #departmentId# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="provinceId">
        			provinceId = #provinceId# 
        		</isNotEmpty>
        		<isNotEmpty prepend="," property="fheadSelfS0156">
        			fheadSelfS0156 = #fheadSelfS0156# 
        		</isNotEmpty>
        		<!-- 经销系数 改为奖励系数-->
        	<isNotEmpty prepend="," property="disCoefficient">disCoefficient=#disCoefficient#</isNotEmpty>
	        <!-- 经销商 -->
	        <isNotEmpty prepend="," property="dealerName">dealerName=#dealerName#</isNotEmpty>
	        <!-- 国产PL产品信息 -->
	        <isNotEmpty prepend="," property="pL3000Count">pL3000Count=#pL3000Count#</isNotEmpty>
	        <isNotEmpty prepend="," property="pL3000Unit">pL3000Unit=#pL3000Unit#</isNotEmpty>
	        <isNotEmpty prepend="," property="pL4200Count">pL4200Count=#pL4200Count#</isNotEmpty>
	        <isNotEmpty prepend="," property="pL4200Unit">pL4200Unit=#pL4200Unit#</isNotEmpty>
	        
	        <isNotEmpty prepend="," property="sSV3500Count">sSV3500Count=#sSV3500Count#</isNotEmpty>
	        <isNotEmpty prepend="," property="sSV3500Unit">sSV3500Unit=#sSV3500Unit#</isNotEmpty>
	        <isNotEmpty prepend="," property="sPL2000Count">sPL2000Count=#sPL2000Count#</isNotEmpty>
	        <isNotEmpty prepend="," property="sPL2000Unit">sPL2000Unit=#sPL2000Unit#</isNotEmpty>
	        
	        <isNotEmpty prepend="," property="pL3000ListPrice">pL3000ListPrice=#pL3000ListPrice#</isNotEmpty>
	        <isNotEmpty prepend="," property="pL4200ListPrice">pL4200ListPrice=#pL4200ListPrice#</isNotEmpty>
	        <isNotEmpty prepend="," property="sSV3500ListPrice">sSV3500ListPrice=#sSV3500ListPrice#</isNotEmpty>
	        <isNotEmpty prepend="," property="sPL2000ListPrice">sPL2000ListPrice=#sPL2000ListPrice#</isNotEmpty>
	        <isNotEmpty prepend="," property="isbill">
	       		isbill=#isbill#
	       </isNotEmpty>
	       <!-- 是否已汇总 -->
	       <isNotEmpty prepend="," property="issummary">
	       		issummary=#issummary#
	       </isNotEmpty>
	       <isNotEmpty prepend="," property="businessratio">businessratio=#businessratio#</isNotEmpty>
           <isNotEmpty prepend="," property="salemanagerId">salemanagerId=#salemanagerId#</isNotEmpty>
           <isNotEmpty prepend="," property="salemanagerName">salemanagerName=#salemanagerName#</isNotEmpty>
           <isNotEmpty prepend="," property="salemanagerratio">salemanagerratio=#salemanagerratio#</isNotEmpty>
           <isNotEmpty prepend="," property="areamanagerId">areamanagerId=#areamanagerId#</isNotEmpty>
           <isNotEmpty prepend="," property="areamanagerName">areamanagerName=#areamanagerName#</isNotEmpty>
           <isNotEmpty prepend="," property="areamanagerratio">areamanagerratio=#areamanagerratio#</isNotEmpty>
           <isNotEmpty prepend="," property="fbselfratio">fbselfratio=#fbselfratio#</isNotEmpty>
           <isNotEmpty prepend="," property="fbsmratio">fbsmratio=#fbsmratio#</isNotEmpty>
           <isNotEmpty prepend="," property="fbamratio">fbamratio=#fbamratio#</isNotEmpty>
           
	       <!--业务费系数-->
	        <isNotEmpty prepend="," property="operatorrate">operatorrate=#operatorrate#</isNotEmpty>
	        </dynamic>
	       	<dynamic prepend="where">
	        	<isNotEmpty prepend="or" property="sysOrderId">
	       			sysOrderId = #sysOrderId#
	       		</isNotEmpty>
		        <isNotEmpty prepend="or" property="orderCode">
	       			orderCode = #orderCode#
	       		</isNotEmpty>
	       	
	       	</dynamic>
    </update>

    <delete id="SysOrder.delete">
    <![CDATA[
        DELETE FROM t_sysorder WHERE
        sysOrderId = #id# 
    ]]>
    </delete>
    <delete id="SysOrder.deleteSysOrderByOrderCode">
    <![CDATA[
        DELETE FROM t_sysorder WHERE
        orderCode in ($id$)
    ]]>
    </delete>
    
    <delete id="SysOrder.deleteMultiple">
    <![CDATA[
        DELETE FROM t_sysorder WHERE
        sysOrderId in ($id$) 
    ]]>
    </delete>
    <select id="SysOrder.getByProperty" resultMap="RM.Sysorder2">
		select <include refid="Sysorder.columns1"/> from t_sysorder where $propertyName$=#propertyValue#
	</select>
   

    
    <select id="SysOrder.getById" resultMap="RM.SysOrder">
	    SELECT <include refid="SysOrder.columns"/>,
	    to1.fname checkProject,to2.fname finalConsumer, tb1.blocname systemConsumer,
    	td1.teamname department,tp1.provincename province,tp1.provinceid provinceId,
    	ta1.adminName businessUser,ta2.adminName manager, 
    	ta3.adminName examineUserName,ta4.adminName changeUserName ,
    	t_contractchange.orderCode changeordercode 
	    <![CDATA[
	        FROM t_sysorder
		    	left join t_admin ta1 on t_sysorder.businessUserId = ta1.adminId
		    	left join t_admin ta2 on t_sysorder.managerId = ta2.adminId
		    	left join t_admin ta3 on t_sysorder.examineUserId = ta3.adminId
		    	left join t_admin ta4 on t_sysorder.changeUserId = ta4.adminId
		    	left join t_organization to1 on t_sysorder.checkProjectId = to1.finnerid
		    	left join t_organization to2 on t_sysorder.finalConsumerId = to2.finnerid
		    	left join t_bloc tb1 on t_sysorder.systemConsumerId = tb1.blocid
		    	left join t_department td1 on t_sysorder.departmentid = td1.teamid
		    	left join t_province tp1 on t_sysorder.provinceid = tp1.provinceid
		    	left join t_contractchange on t_sysorder.orderCode = t_contractchange.orderCode 
		    			
	        WHERE 
		        sysOrderId = #id# 
	    ]]>
    </select>
    <select id="SysOrder.getByOrderCode" resultMap="RM.SysOrder">
	     SELECT <include refid="SysOrder.columns"/>,
	    to1.fname checkProject,to2.fname finalConsumer, tb1.blocname systemConsumer,
    	td1.teamname department,tp1.provincename province,tp1.provinceid provinceId,
    	ta1.adminName businessUser,ta2.adminName manager, 
    	ta3.adminName examineUserName,ta4.adminName changeUserName ,
    	t_contractchange.orderCode changeordercode 
	    <![CDATA[
	        FROM t_sysorder
	        	left join t_admin ta1 on t_sysorder.businessUserId = ta1.adminId
		    	left join t_admin ta2 on t_sysorder.managerId = ta2.adminId
		    	left join t_admin ta3 on t_sysorder.examineUserId = ta3.adminId
		    	left join t_admin ta4 on t_sysorder.changeUserId = ta4.adminId
		    	left join t_organization to1 on t_sysorder.checkProjectId = to1.finnerid
		    	left join t_organization to2 on t_sysorder.finalConsumerId = to2.finnerid
		    	left join t_bloc tb1 on t_sysorder.systemConsumerId = tb1.blocid
		    	left join t_department td1 on t_sysorder.departmentid = td1.teamid
		    	left join t_province tp1 on t_sysorder.provinceid = tp1.provinceid
		    	left join t_contractchange on t_sysorder.orderCode = t_contractchange.orderCode  
		    	and (t_contractchange.relativestatus=0 or t_contractchange.relativestatus is null) 
	        WHERE 
		        orderCode = #orderCode# 
	    ]]>
    </select>
    <select id="SysOrder.findById.History" resultMap="RM.SysOrder">
     SELECT <include refid="SysOrder.columns"/>,
     	to1.fname checkProject,to2.fname finalConsumer, tb1.blocname systemConsumer,
    	td1.teamname department,tp1.provincename province,tp1.provinceid provinceId,
    	ta1.adminName businessUser,ta2.adminName manager, 
    	ta3.adminName examineUserName,ta4.adminName changeUserName ,
    	t_contractchange.orderCode changeordercode 
	    <![CDATA[
	        FROM t_sysorder_history
		    	left join t_admin ta1 on t_sysorder_history.businessUserId = ta1.adminId
		    	left join t_admin ta2 on t_sysorder_history.managerId = ta2.adminId
		    	left join t_admin ta3 on t_sysorder_history.examineUserId = ta3.adminId
		    	left join t_admin ta4 on t_sysorder_history.changeUserId = ta4.adminId
		    	left join t_organization to1 on t_sysorder_history.checkProjectId = to1.finnerid
		    	left join t_organization to2 on t_sysorder_history.finalConsumerId = to2.finnerid
		    	left join t_bloc tb1 on t_sysorder_history.systemConsumerId = tb1.blocid
		    	left join t_department td1 on t_sysorder_history.departmentid = td1.teamid
		    	left join t_province tp1 on t_sysorder_history.provinceid = tp1.provinceid
		    	left join t_contractchange on t_sysorder.orderCode = t_contractchange.orderCode 
		    	and (t_contractchange.relativestatus=0 or t_contractchange.relativestatus is null) 
	        WHERE 
		        sysOrderId = #id# 
	    ]]>
    </select>
	
	<sql id="SysOrder.findPage.where">
	    <dynamic prepend="WHERE">
	       <isNotEmpty prepend="AND" property="sysOrderId">
	             sysOrderId = #sysOrderId#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="model">
	       		model=#model#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="businessUserId">
	       	businessUserId=#businessUserId#
	       </isNotEmpty>
			<isNotEmpty prepend="AND" property="createdateBegin">
	             contractTime &gt;= #createdateBegin#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="createdateEnd">
	             contractTime &lt;= #createdateEnd#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="orderCode">
	             t_sysorder.orderCode like ('%$orderCode$%') 
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="userName">
	             userName like ('%$userName$%') 
	       </isNotEmpty>
	       
	       <isNotEmpty prepend="AND" property="userId">
	             userId = #userId#
	       </isNotEmpty>
	       
	       <isNotEmpty prepend="AND" property="sysOrderStatus">
	             sysOrderStatus = #sysOrderStatus#
	       </isNotEmpty>
	       
	       <isNotEmpty prepend="AND" property="billUserId">
	             billUserId = #billUserId#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="billUserIds">
	             billUserId in ($billUserIds$) 
	       </isNotEmpty>
	       <!--订单中包含哪几种产品类型以,分割-->
       	   <isNotEmpty prepend="AND" property="containProductType">
       	   containProductType  like ('%$containProductType$%')  
       	   </isNotEmpty>
       	   <isNotEmpty prepend="AND" property="fyear">
	             datename(year,contractTime)=#fyear#
	       </isNotEmpty>
       	   <isNotEmpty prepend="AND" property="fquarter">
	             datename(QUARTER,contractTime)=#fquarter#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="isbill">
	       		isbill=#isbill#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="checkProjectId">
	       		checkprojectid=#checkProjectId#
	   		</isNotEmpty>
	    </dynamic>
	</sql>
	
	<sql id="SysOrder.Query.findPage.where">
	    <dynamic prepend="WHERE">
			<isNotEmpty prepend="AND" property="contractTimeBegin">
	             contractTime &gt;= #contractTimeBegin#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="contractTimeEnd">
	             contractTime &lt; #contractTimeEnd#
	       </isNotEmpty>
	       <!-- 是否已统计过 -->
	       <isNotEmpty prepend="AND" property="issummary">
	             issummary=#issummary#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="sysOrderStatus">
	             sysOrderStatus = #sysOrderStatus#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="businessUserId">
	             businessUserId = #businessUserId#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="contractCode">
	             contractCode = #contractCode#
	       </isNotEmpty>
	    </dynamic>
	</sql>
	<!--  -->
	<sql id="SysOrder.productQuery.findPage.where">
	    <dynamic prepend="WHERE">
			<isNotEmpty prepend="AND" property="orderCodes">
	             t_product.orderCode in ($orderCodes$) 
	       </isNotEmpty>
	    </dynamic>
	</sql>
	<sql id="SysOrder.findPage.and">
		<isNotEmpty prepend="AND" property="sysOrderId">
             sysOrderId = #sysOrderId#
       </isNotEmpty>
        <isNotEmpty prepend="AND" property="model">
	       		model=#model#
	       </isNotEmpty>
       
           
			<isNotEmpty prepend="AND" property="createdateBegin">
	             contractTime &gt;= #createdateBegin#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="createdateEnd">
	             contractTime &lt;= #createdateEnd#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="orderCode">
	             t_sysorder.orderCode like ('%$orderCode$%') 
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="userName">
	             userName like ('%$userName$%') 
	       </isNotEmpty>
       <isNotEmpty prepend="AND" property="businessUserId">
       	businessUserId=#businessUserId#
       </isNotEmpty>
       <isNotEmpty prepend="AND" property="userId">
	             userId = #userId#
	   </isNotEmpty>
	       <isNotEmpty prepend="AND" property="sysOrderStatus">
	             sysOrderStatus = #sysOrderStatus#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="billUserId">
	             billUserId = #billUserId#
	       </isNotEmpty>
       <isNotEmpty prepend="AND" property="billUserIds">
	             billUserId in ($billUserIds$) 
	   </isNotEmpty>
	       <!--订单中包含哪几种产品类型以,分割-->
       <isNotEmpty prepend="AND" property="containProductType">
       	   containProductType  like ('%$containProductType$%')  
       </isNotEmpty>
       <isNotEmpty prepend="AND" property="isbill">
	       		isbill=#isbill#
	       </isNotEmpty>
	    <isNotEmpty prepend="AND" property="checkProjectId">
	       		checkprojectid=#checkProjectId#
	   </isNotEmpty>
	</sql>
    <select id="SysOrder.findPage.count" resultClass="long">
        SELECT count(*) FROM t_sysorder <include refid="SysOrder.findPage.where"/>    
    </select>
    <select id="SysOrder.findList.history.count" resultClass="long">
        SELECT count(*) FROM t_sysorder_history <include refid="SysOrder.findPage.where"/>    
    </select>
   <select id="SysOrder.Entity" resultMap="RM.Sysorder2">
   		SELECT <include refid="Sysorder.columns1"/> FROM t_sysorder <include refid="SysOrder.findPage.where"/>
   </select>
    <select id="SysOrder.findPage" resultMap="RM.SysOrderNew">
    	SELECT <include refid="SysOrder.columns"/>,
    	to1.fname checkProject,to2.fname finalConsumer, tb1.blocname systemConsumer,
    	td1.teamname department,tp1.provincename province,tp1.provinceid provinceId,
    	ta1.adminName businessUser,ta2.adminName manager, 
    	ta3.adminName examineUserName,ta4.adminName changeUserName ,
    	t_contractchange.orderCode changeordercode, t_contractchange.relativestatus
    	FROM t_sysorder 
    	left join t_admin ta1 on t_sysorder.businessUserId = ta1.adminId
    	left join t_admin ta2 on t_sysorder.managerId = ta2.adminId
    	left join t_admin ta3 on t_sysorder.examineUserId = ta3.adminId
    	left join t_admin ta4 on t_sysorder.changeUserId = ta4.adminId
    	left join t_organization to1 on t_sysorder.checkProjectId = to1.finnerid
    	left join t_organization to2 on t_sysorder.finalConsumerId = to2.finnerid
    	left join t_bloc tb1 on t_sysorder.systemConsumerId = tb1.blocid
    	left join t_department td1 on t_sysorder.departmentid = td1.teamid
    	left join t_province tp1 on t_sysorder.provinceid = tp1.provinceid
    	left join t_contractchange on t_sysorder.orderCode = t_contractchange.orderCode 
    	<!-- and (t_contractchange.relativestatus=0 or t_contractchange.relativestatus is null)  -->
    	where 1=1 
    	<isNotEmpty property="notTop">  and 
       sysOrderId not in(select $notTop$ sysOrderId from t_sysorder <include refid="SysOrder.findPage.where"/>
	   	   <isNotEmpty property="sortColumns"> ORDER BY $sortColumns$	</isNotEmpty>) 
	   	</isNotEmpty>
	   	<include refid="SysOrder.findPage.and"/>   
		<isNotEmpty property="sortColumns">
			ORDER BY $sortColumns$
		</isNotEmpty>
    </select>
   <select id="SysOrder.Product.findList" resultMap="RM.SysOrder.Product">
   		SELECT orderCode,businessUserId,disCoefficient,dealerName,provinceId,pL3000Count,pL3000Unit,
        pL4200Count,pL4200Unit,sSV3500Count,sSV3500Unit,sPL2000Count,sPL2000Unit,
        pL3000ListPrice,pL4200ListPrice,sSV3500ListPrice,sPL2000ListPrice,model,operatorrate,
        t_plratio.PL4200,t_plratio.PL3000,t_plratio.SSV3500,t_plratio.PL2000,t_plratio.bratio,
        selfratio,salesmanagerratio,regionmanagerratio,companyratio from t_sysorder 
        left join t_plratio on datename(year,t_sysorder.contractTime)=t_plratio.fyear
        and datename(quarter,t_sysorder.contractTime)=#fquarter#
        where t_plratio.salesid=t_sysorder.businessUserId 
   		<include refid="SysOrder.findPage.and"/>
		<isNotEmpty property="sortColumns">
			ORDER BY $sortColumns$
		</isNotEmpty>
   </select>
   <select id="Product.BySysOrder.findList" resultMap="RM.Product.BySysOrder">
   	select <include refid="SysOrder.Product.columns"/> from t_product where ordercode=#orderCode# 
   </select>
   <!-- 查找系统订单通过条件 -->
   <select id="SysOrder.Query.findList" resultMap="RM.SysOrder.summary">
   	select <include refid="SysOrder.columns.summary"/> 
   		from t_sysorder 
   	    <include refid="SysOrder.Query.findPage.where"/>
		<isNotEmpty property="sortColumns">
			ORDER BY $sortColumns$
		</isNotEmpty> 
   </select>
   <!-- 查找系统订单的关联产品信息通过条件 -->
   <select id="SysOrder.productQuery.findList" resultMap="RM.Product.summary">
   	select <include refid="SysOrder.ProductInfo.columns"/> 
   		from t_product 
   	    <include refid="SysOrder.productQuery.findPage.where"/>
		<isNotEmpty property="sortColumns">
			ORDER BY $sortColumns$
		</isNotEmpty> 
   </select>
   
    <select id="SysOrder.findList" resultMap="RM.SysOrder">
    	SELECT <include refid="SysOrder.columns"/>,
    	to1.fname checkProject,to2.fname finalConsumer, tb1.blocname systemConsumer,
    	td1.teamname department,tp1.provincename province,tp1.provinceid provinceId,
    	ta1.adminName businessUser,ta2.adminName manager, 
    	ta3.adminName examineUserName,ta4.adminName changeUserName ,
    	t_contractchange.orderCode changeordercode 
    	FROM t_sysorder 
    	left join t_admin ta1 on t_sysorder.businessUserId = ta1.adminId
    	left join t_admin ta2 on t_sysorder.managerId = ta2.adminId
    	left join t_admin ta3 on t_sysorder.examineUserId = ta3.adminId
    	left join t_admin ta4 on t_sysorder.changeUserId = ta4.adminId
    	left join t_organization to1 on t_sysorder.checkProjectId = to1.finnerid
    	left join t_organization to2 on t_sysorder.finalConsumerId = to2.finnerid
    	left join t_bloc tb1 on t_sysorder.systemConsumerId = tb1.blocid
    	left join t_department td1 on t_sysorder.departmentid = td1.teamid
    	left join t_province tp1 on t_sysorder.provinceid = tp1.provinceid
    	left join t_contractchange on t_sysorder.orderCode = t_contractchange.orderCode 
    	and (t_contractchange.relativestatus=0 or t_contractchange.relativestatus is null) 
		<include refid="SysOrder.findPage.where"/>
		<isNotEmpty property="sortColumns">
			ORDER BY $sortColumns$
		</isNotEmpty>
    </select>
    <select id="SysOrder.findList.history" resultMap="RM.SysOrder">
    	SELECT <include refid="SysOrder.columns"/>,
	    	to1.fname checkProject,to2.fname finalConsumer, tb1.blocname systemConsumer,
	    	td1.teamname department,tp1.provincename province,tp1.provinceid provinceId,
	    	ta1.adminName businessUser,ta2.adminName manager, 
	    	ta3.adminName examineUserName,ta4.adminName changeUserName ,
	    	t_contractchange.orderCode changeordercode 
	    	FROM t_sysorder_history 
	    	left join t_admin ta1 on t_sysorder_history.businessUserId = ta1.adminId
	    	left join t_admin ta2 on t_sysorder_history.managerId = ta2.adminId
	    	left join t_admin ta3 on t_sysorder_history.examineUserId = ta3.adminId
	    	left join t_admin ta4 on t_sysorder_history.changeUserId = ta4.adminId
	    	left join t_organization to1 on t_sysorder_history.checkProjectId = to1.finnerid
	    	left join t_organization to2 on t_sysorder_history.finalConsumerId = to2.finnerid
	    	left join t_bloc tb1 on t_sysorder_history.systemConsumerId = tb1.blocid
	    	left join t_department td1 on t_sysorder_history.departmentid = td1.teamid
	    	left join t_province tp1 on t_sysorder_history.provinceid = tp1.provinceid
	    	left join t_contractchange on t_sysorder.orderCode = t_contractchange.orderCode 
	    	and (t_contractchange.relativestatus=0 or t_contractchange.relativestatus is null) 
    	where 1=1 
    	<isNotEmpty property="notTop">  and 
       sysOrderId not in(select $notTop$ sysOrderId from t_sysorder_history <include refid="SysOrder.findPage.where"/>
	   	   <isNotEmpty property="sortColumns"> ORDER BY $sortColumns$	</isNotEmpty>) 
	   	</isNotEmpty>  
	   	<include refid="SysOrder.findPage.and"/>
		<isNotEmpty property="sortColumns">
			ORDER BY $sortColumns$
		</isNotEmpty>
    </select>
    <select id="SysOrder.Product.Sum" resultMap="RM.SysOrder.Product.Sum">
		select isnull(sum(t_product.balanceprice*productCount*t_sysorder.disCoefficient),0) famount from t_sysorder,t_product
		where t_sysorder.orderCode=t_product.orderCode
		and datename(year,t_sysorder.contractTime)=#fyear#
		and t_sysorder.businessUserId=#businessUserId# and t_sysorder.sysOrderStatus=#sysOrderStatus#
		and t_product.productType=#ftype# 
    </select>
    <select id="Sysorder.count.sale.A" resultClass="double">
        select SUM(totalFee) from t_product 
		left join t_sysorder on t_product.orderCode=t_sysorder.orderCode
		where t_sysorder.businessUserId=#businessUserId# and t_product.productType='A' 
		and t_sysorder.contractTime &gt;= '2015-04-01 00:00:00'
		and t_sysorder.contractTime &lt;'2016-01-01 00:00:00' 
    </select>
    <select id="Sysorder.count.lng" resultClass="double">
       select * from t_product 
		left join t_sysorder on t_product.orderCode=t_sysorder.orderCode 
		where t_product.productType='D' 
		and t_sysorder.contractTime &gt;= '2015-04-01 00:00:00'
		and t_sysorder.contractTime &lt;'2016-01-01 00:00:00' 
    </select>
    <!-- 合同变更单中的订单编号下拉查询 -->
   <select id="SysOrder.Query.findCheckedList" resultMap="RM.SysOrder">
   	select top 10 <include refid="SysOrder.columns"/> ,
   		to1.fname checkProject,to2.fname finalConsumer, tb1.blocname systemConsumer,
    	td1.teamname department,tp1.provincename province,tp1.provinceid provinceId,
    	ta1.adminName businessUser,ta2.adminName manager, 
    	ta3.adminName examineUserName,ta4.adminName changeUserName ,
    	t_contractchange.orderCode changeordercode 
    	FROM t_sysorder 
    	left join t_admin ta1 on t_sysorder.businessUserId = ta1.adminId
    	left join t_admin ta2 on t_sysorder.managerId = ta2.adminId
    	left join t_admin ta3 on t_sysorder.examineUserId = ta3.adminId
    	left join t_admin ta4 on t_sysorder.changeUserId = ta4.adminId
    	left join t_organization to1 on t_sysorder.checkProjectId = to1.finnerid
    	left join t_organization to2 on t_sysorder.finalConsumerId = to2.finnerid
    	left join t_bloc tb1 on t_sysorder.systemConsumerId = tb1.blocid
    	left join t_department td1 on t_sysorder.departmentid = td1.teamid
    	left join t_province tp1 on t_sysorder.provinceid = tp1.provinceid
    	left join t_contractchange on t_sysorder.orderCode = t_contractchange.orderCode 
		where 1=1
		<isNotEmpty prepend="AND" property="sysOrderStatus">
             t_sysorder.sysOrderStatus = #sysOrderStatus#
       	</isNotEmpty>
       	<isNotEmpty prepend="AND" property="contractCode">
             t_sysorder.contractCode like ('%$contractCode$%') 
       	</isNotEmpty>
		order by sysOrderId desc
   </select>
   
	
</sqlMap>