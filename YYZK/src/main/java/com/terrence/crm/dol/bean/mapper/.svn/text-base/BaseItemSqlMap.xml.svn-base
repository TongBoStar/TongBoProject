<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" 
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="BaseItem">

     <cacheModel id="model-cache" type="MEMORY" >

     <flushInterval seconds="60"/>
     <flushOnExecute statement="BaseItem.findPage"/>
     <flushOnExecute statement="BaseItem.findAllUseItem"/>
     <flushOnExecute statement="BaseItem.findList"/>

     <property name="size" value="1000" />
    </cacheModel>
    <resultMap id="RM.BaseItem.DifferentItems" class="com.terrence.crm.dol.bean.BaseItem">
    	 <result property="baseitemid" column="baseitemid"/>
    </resultMap>
    <resultMap id="RM.BaseItem.Detail1" class="com.terrence.crm.dol.bean.BaseItem">
        <result property="baseitemid" column="baseitemid"/>
        <result property="itemcode" column="itemcode"/>
        <result property="itemname" column="itemname"/>
        <result property="formatno" column="formatno"/>
        <result property="createdate" column="createdate"/>
        <result property="wfstatus" column="wfstatus"/>
        <result property="fitemid" column="fitemid"/>
        <result property="picpath" column="picpath"/>
        <result property="adminid" column="adminid"/>
        <result property="auditor" column="auditor"/>
        <result property="verifier" column="verifier"/>
        <result property="usestatus" column="usestatus"/>
        <result property="itemproperty" column="itemproperty"/>
        <result property="finishstatus" column="finishstatus"/>
        <result property="cycleid" column="cycleid"/>
        <result property="fsaleprice" column="fsaleprice"/>
        <result property="taxrate" column="taxrate"/>
        <result property="unitid" column="unitid"/>
        <result property="unitname" column="unitname"/>
        <result property="fqtymin" column="fqtymin"/>
        <result property="secinv" column="secinv"/>
        <result property="seriescode" column="seriescode"/>
        <result property="isdeduct" column="isdeduct"/>
        <result property="refercost" column="refercost"/>
        <result property="buytime" column="buytime"/>
        <result property="maketime" column="maketime"/>
        <result property="isbatch" column="isbatch"/>
        <result property="isbarcode" column="isbarcode"/>
        <result property="categoryid" column="categoryid"/>
        <result property="ischeck" column="ischeck"/>
        <result property="itemcls" column="itemcls"/>
        <result property="youtput" column="youtput"/>
        <result property="lastoutput" column="lastoutput"/>
        <result property="existdemand" column="existdemand"/>
        <result property="makingnums" column="makingnums"/>
        <result property="forecast" column="forecast"/>
        <result property="checkednum" column="checkednum"/>
        <result property="unchecknum" column="unchecknum"/>
        <result property="sumdemand" column="sumdemand"/>
        <result property="fissnmanager" column="fissnmanager"/>
        <result property="topicid" column="topicid"/>
        <result property="f101" column="f_101"/>
        <result property="f106" column="f_106"/>
        <result property="f108" column="f_108"/>
        <result property="f119" column="f_119"/>
        <result property="f116" column="f_116"/>
        <result property="fchartnumber" column="fchartnumber"/>
        <result property="f107" column="f_107"/>
        <result property="f112" column="f_112"/>
        <result property="f113" column="f_113"/>
        <result property="f114" column="f_114"/>
        <result property="f115" column="f_115"/>
        <result property="solutionid" column="solutionid"/>
        <result property="positionid" column="positionid"/>
        <result property="forderprice" column="forderprice"/>
        <result property="ftaxrate" column="ftaxrate"/>
        <result property="storage" column="storage"/>
        
        <result property="shortnumber" column="shortnumber"/>
        <result property="itemparentcode" column="itemparentcode"/>
        <result property="f102" column="f_102"/>
    </resultMap>
    
    <resultMap class="com.terrence.crm.dol.bean.BaseItem" id="RM.BaseItem.Porequest">
    	<result property="itemcode" column="itemcode"/>
        <result property="itemname" column="itemname"/>
        <result property="formatno" column="formatno"/>
        <result property="unitname" column="unitname"/>
        <result property="f102" column="f_102"/>
        <result property="f101" column="f_101"/>
        <result property="supplierid" column="supplierid"/>
      	<result property="supplier" resultMap="RM.Supplier.suppliername"/>
    </resultMap> 
    <resultMap class="com.terrence.crm.dol.bean.BaseItem" id="RM.BaseItem.Seoutstock">
		<result property="baseitemid" column="baseitemid"/>
    	<result property="itemcode" column="itemcode"/>
        <result property="itemname" column="itemname"/>
        <result property="formatno" column="formatno"/>
        <result property="unitname" column="unitname"/>
        <result property="f102" column="f_102"/>
        <result property="f101" column="f_101"/>
        <result property="unitid" column="unitid"/>
    </resultMap> 
     <resultMap class="com.terrence.crm.dol.bean.BaseItem" id="RM.BaseItem.Callslip">
    	<result property="itemcode" column="itemcode"/>
        <result property="itemname" column="itemname"/>
        <result property="formatno" column="formatno"/>
        <result property="unitname" column="unitname"/>
       <!--  <result property="fqty" column="fqty"/> -->
       
    </resultMap> 
    
    <resultMap class="com.terrence.crm.dol.bean.BaseItem" id="RM.BaseItem.Param">
    	<result property="youtput" column="youtput"/>
        <result property="ratio" column="ratio"/>
        <result property="cyclename" column="cyclename"/>
        <result property="fqty" column="fqty"/>
        <result property="secinv" column="secinv"/>
        <result property="makingnums" column="makingnums"/>
        <result property="existednums" column="existednums"/>
        <result property="itemcode" column="itemcode"/>
        <result property="planednum" column="planednum"/>
    </resultMap>    
	<resultMap id="RM.BaseItem" class="com.terrence.crm.dol.bean.BaseItem">
        <result property="baseitemid" column="baseitemid"/>
        <result property="itemcode" column="itemcode"/>
        <result property="itemname" column="itemname"/>
        <result property="formatno" column="formatno"/>
        <result property="createdate" column="createdate"/>
        <result property="wfstatus" column="wfstatus"/>
        <result property="fitemid" column="fitemid"/>
        <result property="picpath" column="picpath"/>
        <result property="adminid" column="adminid"/>
        <result property="auditor" column="auditor"/>
        <result property="verifier" column="verifier"/>
        <result property="usestatus" column="usestatus"/>
        <result property="itemproperty" column="itemproperty"/>
        <result property="finishstatus" column="finishstatus"/>
        <result property="cycleid" column="cycleid"/>
        <result property="fsaleprice" column="fsaleprice"/>
        <result property="taxrate" column="taxrate"/>
        <result property="unitid" column="unitid"/>
        <result property="unitname" column="unitname"/>
        <result property="fqtymin" column="fqtymin"/>
        <result property="secinv" column="secinv"/>
        <result property="seriescode" column="seriescode"/>
        <result property="isdeduct" column="isdeduct"/>
        <result property="refercost" column="refercost"/>
        <result property="buytime" column="buytime"/>
        <result property="maketime" column="maketime"/>
        <result property="isbatch" column="isbatch"/>
        <result property="isbarcode" column="isbarcode"/>
        <result property="categoryid" column="categoryid"/>
        <result property="ischeck" column="ischeck"/>
        <result property="itemcls" column="itemcls"/>
        <result property="youtput" column="youtput"/>
        <result property="lastoutput" column="lastoutput"/>
        <result property="existdemand" column="existdemand"/>
        <result property="makingnums" column="makingnums"/>
        <result property="forecast" column="forecast"/>
        <result property="checkednum" column="checkednum"/>
        <result property="unchecknum" column="unchecknum"/>
        <result property="sumdemand" column="sumdemand"/>
        <result property="responsible" column="responsible"/>
        <result property="supplierid" column="supplierid"/>
        <result property="fissnmanager" column="fissnmanager"/>
        <result property="topicid" column="topicid"/>
        <result property="f101" column="f_101"/>
        <result property="f106" column="f_106"/>
        <result property="f108" column="f_108"/>
        <result property="f119" column="f_119"/>
        <result property="f116" column="f_116"/>
        <result property="fchartnumber" column="fchartnumber"/>
        <result property="f107" column="f_107"/>
        <result property="f112" column="f_112"/>
        <result property="f113" column="f_113"/>
        <result property="f114" column="f_114"/>
        <result property="f115" column="f_115"/>
        <result property="solutionid" column="solutionid"/>
        <result property="positionid" column="positionid"/>
        <result property="forderprice" column="forderprice"/>
        <result property="ftaxrate" column="ftaxrate"/>
        <result property="storage" column="storage"/>
        <result property="workinstructor" column="workinstructor"/>
        <!--  -->
        <result property="shortnumber" column="shortnumber"/>
        <result property="flevel" column="flevel"/>
        <result property="pid" column="pid"/>
        
        <result property="itemparentcode" column="itemparentcode"/>
        
        <result property="fullname" column="fullname"/>
    </resultMap>
    
    <resultMap id="RM.ItemDetailK3" class="com.terrence.crm.dol.bean.ItemDetailK3">
        <result property="fnumber" column="fnumber"/>
        <result property="fitemId" column="fitemId"/>
		<result property="flevel" column="flevel"/>
		<result property="fdetail" column="fdetail"/>
		<result property="fname" column="fname"/>
		<result property="fdeleted" column="fdeleted"/>
		<result property="fshortNumber" column="fshortNumber"/>
    </resultMap>
    
    <resultMap id="RM.BaseItemv" class="com.terrence.crm.dol.bean.BaseItem">
        <result property="baseitemid" column="baseitemid"/>
        <result property="itemcode" column="itemcode"/>
        <result property="itemname" column="itemname"/>
        <result property="itemclass" column="itemclass"/>
        <result property="itemparentcode" column="itemparentcode"/>
        <result property="shortnumber" column="shortnumber"/>
        <result property="deleted" column="deleted"/>
        <result property="detail" column="detail"/>
        <result property="pid" column="pid"/>
        <result property="flevel" column="flevel"/>
    </resultMap>
    <resultMap id="RM.BaseItem.Page" class="com.terrence.crm.dol.bean.BaseItem">
        <result property="baseitemid" column="baseitemid"/>
        <result property="itemcode" column="itemcode"/>
        <result property="itemname" column="itemname"/>
        <result property="formatno" column="formatno"/>
        <result property="itemproperty" column="itemproperty"/>
        <result property="unitname" column="unitname"/>
        <result property="fqtymin" column="fqtymin"/>
        <result property="secinv" column="secinv"/>
        <result property="isdeduct" column="isdeduct"/>
        <result property="refercost" column="refercost"/>
        <result property="checkednum" column="checkednum"/>
        <result property="unchecknum" column="unchecknum"/>
        <result property="existdemand" column="existdemand"/>
        <result property="forecast" column="forecast"/>
        <result property="isbatch" column="isbatch"/>
        <result property="isbarcode" column="isbarcode"/>
        <result property="ischeck" column="ischeck"/>
        <result property="youtput" column="youtput"/>
        <result property="cycle" resultMap="RM.BaseItem.Cycle"/>
        <result property="inventory" resultMap="RM.BaseItem.Inventory"/>
        <result property="admin" resultMap="RM.BaseItem.admin"/>
        <result property="fissnmanager" column="fissnmanager"/>
        <result property="supplier" resultMap="RM.Supplier.suppliername"/>
        <result property="bomStatus" column="bomstatus"/>
        <!--  
        <result property="shortnumber" column="shortnumber"/>
        <result property="flevel" column="flevel"/>
        <result property="pid" column="pid"/>
        -->
    </resultMap>
    
    <resultMap id="RM.BaseItem.Page.z" class="com.terrence.crm.dol.bean.BaseItem">
        <result property="baseitemid" column="baseitemid"/>
        <result property="itemcode" column="itemcode"/>
        <result property="itemname" column="itemname"/>
        <result property="formatno" column="formatno"/>
        <result property="itemproperty" column="itemproperty"/>
        <result property="unitname" column="unitname"/>
        <result property="fqtymin" column="fqtymin"/>
        <result property="secinv" column="secinv"/>
        <result property="isdeduct" column="isdeduct"/>
        <result property="refercost" column="refercost"/>
        <result property="buytime" column="buytime"/>
        <result property="checkednum" column="checkednum"/>
        <result property="unchecknum" column="unchecknum"/>
        <result property="existdemand" column="existdemand"/>
        <result property="forecast" column="forecast"/>
        <result property="isbatch" column="isbatch"/>
        <result property="isbarcode" column="isbarcode"/>
        <result property="ischeck" column="ischeck"/>
        <result property="youtput" column="youtput"/>
        <result property="cycle" resultMap="RM.BaseItem.Cycle"/>
        <result property="inventory" resultMap="RM.BaseItem.Inventory"/>
        <result property="admin" resultMap="RM.BaseItem.admin"/>
        <result property="fissnmanager" column="fissnmanager"/>
        <result property="supplier" resultMap="RM.Supplier.suppliername"/>
        <result property="finspectionlevel" column="finspectionlevel"/>
        <result property="workinstructor" column="workinstructor"/>
        <result property="checktab" column="checktab"/>
        <result property="bomStatus" column="bomstatus"/>
    	<result property="itemlevel" column="itemlevel"/>
    	<result property="rpid" column="rpid"/>
    	<result property="rpname" column="rpname"/>
    	<result property="installdiagram" column="installdiagram"/>
    	<result property="maintainpartdiagram" column="maintainpartdiagram"/>
    	
    	<!--  
    	<result property="shortnumber" column="shortnumber"/>
        <result property="flevel" column="flevel"/>
        <result property="pid" column="pid"/>
        -->
    </resultMap>
    
    
    
    
    <resultMap class="com.terrence.crm.dol.bean.Inventory" id="RM.BaseItem.Inventory">
    	<result property="fqty" column="fqty"/>
        <result property="fqty2" column="fqty2"/>
    </resultMap>
    <resultMap class="com.terrence.crm.dol.bean.ProcessCycle" id="RM.BaseItem.Cycle">
    	<result property="cyclename" column="cyclename"/>
    </resultMap>
   	<resultMap class="com.terrence.crm.dol.bean.BaseItem" id="RM.BaseItem.Inventory.Cycle">
   		<result property="baseitemid" column="baseitemid"/>
        <result property="itemcode" column="itemcode"/>
        <result property="itemname" column="itemname"/>
        <result property="formatno" column="formatno"/>
        <result property="createdate" column="createdate"/>
        <result property="wfstatus" column="wfstatus"/>
        <result property="fitemid" column="fitemid"/>
        <result property="picpath" column="picpath"/>
        <result property="adminid" column="adminid"/>
        <result property="auditor" column="auditor"/>
        <result property="verifier" column="verifier"/>
        <result property="usestatus" column="usestatus"/>
        <result property="itemproperty" column="itemproperty"/>
        <result property="finishstatus" column="finishstatus"/>
        <result property="cycleid" column="cycleid"/>
        <result property="fsaleprice" column="fsaleprice"/>
        <result property="taxrate" column="taxrate"/>
        <result property="unitid" column="unitid"/>
        <result property="unitname" column="unitname"/>
        <result property="fqtymin" column="fqtymin"/>
        <result property="secinv" column="secinv"/>
        <result property="seriescode" column="seriescode"/>
        <result property="isdeduct" column="isdeduct"/>
        <result property="refercost" column="refercost"/>
        <result property="buytime" column="buytime"/>
        <result property="maketime" column="maketime"/>
        <result property="isbatch" column="isbatch"/>
        <result property="isbarcode" column="isbarcode"/>
        <result property="categoryid" column="categoryid"/>
        <result property="ischeck" column="ischeck"/>
        <result property="itemcls" column="itemcls"/>
        <result property="youtput" column="youtput"/>
        <result property="lastoutput" column="lastoutput"/>
        <result property="existdemand" column="existdemand"/>
        <result property="makingnums" column="makingnums"/>
        <result property="forecast" column="forecast"/>
        <result property="checkednum" column="checkednum"/>
        <result property="unchecknum" column="unchecknum"/>
        <result property="sumdemand" column="sumdemand"/>
        <result property="fissnmanager" column="fissnmanager"/>
        <result property="topicid" column="topicid"/>
        <result property="f101" column="f_101"/>
        <result property="f106" column="f_106"/>
        <result property="f108" column="f_108"/>
        <result property="f119" column="f_119"/>
        <result property="f116" column="f_116"/>
        <result property="fchartnumber" column="fchartnumber"/>
        <result property="f107" column="f_107"/>
        <result property="f112" column="f_112"/>
        <result property="f113" column="f_113"/>
        <result property="f114" column="f_114"/>
        <result property="f115" column="f_115"/>
        <result property="solutionid" column="solutionid"/>
        <result property="positionid" column="positionid"/>
        <result property="forderprice" column="forderprice"/>
        <result property="ftaxrate" column="ftaxrate"/>
        <result property="storage" column="storage"/>
        <result property="cycle" resultMap="RM.BaseItem.Cycle.Detail"/>
        <result property="inventory" resultMap="RM.BaseItem.Inventory.Detail"/>
   	</resultMap>
   	<resultMap class="com.terrence.crm.dol.bean.Inventory" id="RM.BaseItem.Inventory.Detail">
    	<result property="fqty" column="fqty"/>
        <result property="fqty2" column="fqty2"/>
        <result property="secinv" column="secinv"/>
    </resultMap>
    <resultMap class="com.terrence.crm.dol.bean.ProcessCycle" id="RM.BaseItem.Cycle.Detail">
    	<result property="cyclename" column="cyclename"/>
    	<result property="ratio" column="ratio"/>
    </resultMap>
    
    <resultMap id="RM.BaseItem.Detail" class="com.terrence.crm.dol.bean.BaseItem">
        <result property="baseitemid" column="baseitemid"/>
        <result property="itemcode" column="itemcode"/>
        <result property="itemname" column="itemname"/>
        <result property="formatno" column="formatno"/>
        <result property="createdate" column="createdate"/>
        <result property="wfstatus" column="wfstatus"/>
        <result property="fitemid" column="fitemid"/>
        <result property="picpath" column="picpath"/>
        <result property="adminid" column="adminid"/>
        <result property="auditor" column="auditor"/>
        <result property="verifier" column="verifier"/>
        <result property="usestatus" column="usestatus"/>
        <result property="itemproperty" column="itemproperty"/>
        <result property="finishstatus" column="finishstatus"/>
        <result property="cycleid" column="cycleid"/>
        <result property="fsaleprice" column="fsaleprice"/>
        <result property="taxrate" column="taxrate"/>
        <result property="unitid" column="unitid"/>
        <result property="unitname" column="unitname"/>
        <result property="fqtymin" column="fqtymin"/>
        <result property="secinv" column="secinv"/>
        <result property="seriescode" column="seriescode"/>
        <result property="isdeduct" column="isdeduct"/>
        <result property="refercost" column="refercost"/>
        <result property="buytime" column="buytime"/>
        <result property="maketime" column="maketime"/>
        <result property="isbatch" column="isbatch"/>
        <result property="isbarcode" column="isbarcode"/>
        <result property="categoryid" column="categoryid"/>
        <result property="ischeck" column="ischeck"/>
        <result property="itemcls" column="itemcls"/>
        <result property="youtput" column="youtput"/>
        <result property="lastoutput" column="lastoutput"/>
        <result property="existdemand" column="existdemand"/>
        <result property="makingnums" column="makingnums"/>
        <result property="forecast" column="forecast"/>
        <result property="checkednum" column="checkednum"/>
        <result property="unchecknum" column="unchecknum"/>
        <result property="sumdemand" column="sumdemand"/>
        <result property="fissnmanager" column="fissnmanager"/>
        <result property="topicid" column="topicid"/>
        <result property="f101" column="f_101"/>
        <result property="f106" column="f_106"/>
        <result property="f108" column="f_108"/>
        <result property="f119" column="f_119"/>
        <result property="f116" column="f_116"/>
        <result property="fchartnumber" column="fchartnumber"/>
        <result property="f107" column="f_107"/>
        <result property="f112" column="f_112"/>
        <result property="f113" column="f_113"/>
        <result property="f114" column="f_114"/>
        <result property="f115" column="f_115"/>
        <result property="solutionid" column="solutionid"/>
        <result property="positionid" column="positionid"/>
        <result property="forderprice" column="forderprice"/>
        <result property="ftaxrate" column="ftaxrate"/>
        <result property="storage" column="storage"/>
        
        <result property="shortnumber" column="shortnumber"/>
        <result property="itemparentcode" column="itemparentcode"/>
    </resultMap>
    <resultMap id="RM.BaseItem.includeAdminName" class="com.terrence.crm.dol.bean.BaseItem">
        <result property="baseitemid" column="baseitemid"/>
        <result property="itemcode" column="itemcode"/>
        <result property="itemname" column="itemname"/>
        <result property="formatno" column="formatno"/>
        <result property="createdate" column="createdate"/>
        <result property="wfstatus" column="wfstatus"/>
        <result property="fitemid" column="fitemid"/>
        <result property="picpath" column="picpath"/>
        <result property="adminid" column="adminid"/>
        <result property="auditor" column="auditor"/>
        <result property="verifier" column="verifier"/>
        <result property="usestatus" column="usestatus"/>
        <result property="itemproperty" column="itemproperty"/>
        <result property="finishstatus" column="finishstatus"/>
        <result property="admin" resultMap="RM.BaseItem.admin"/>
        <result property="checkname" column="checkname"/>
        <result property="cycleid" column="cycleid"/>
        <result property="fsaleprice" column="fsaleprice"/>
        <result property="taxrate" column="taxrate"/>
        <result property="unitid" column="unitid"/>
        <result property="unitname" column="unitname"/>
        <result property="fqtymin" column="fqtymin"/>
        <result property="secinv" column="secinv"/>
        <result property="seriescode" column="seriescode"/>
        <result property="isdeduct" column="isdeduct"/>
        <result property="refercost" column="refercost"/>
        <result property="buytime" column="buytime"/>
        <result property="maketime" column="maketime"/>
        <result property="isbatch" column="isbatch"/>
        <result property="isbarcode" column="isbarcode"/>
        <result property="categoryid" column="categoryid"/>
        <result property="ischeck" column="ischeck"/>
        <result property="itemcls" column="itemcls"/>
        <result property="youtput" column="youtput"/>
        <result property="lastoutput" column="lastoutput"/>
        <result property="existdemand" column="existdemand"/>
        <result property="makingnums" column="makingnums"/>
        <result property="forecast" column="forecast"/>
        <result property="checkednum" column="checkednum"/>
        <result property="unchecknum" column="unchecknum"/>
        <result property="sumdemand" column="sumdemand"/>
         <result property="responsible" column="responsible"/>
        <result property="supplierid" column="supplierid"/>
        <result property="fissnmanager" column="fissnmanager"/>
        <result property="topicid" column="topicid"/>
        <result property="f101" column="f_101"/>
        <result property="f106" column="f_106"/>
        <result property="f108" column="f_108"/>
        <result property="f119" column="f_119"/>
        <result property="f116" column="f_116"/>
        <result property="fchartnumber" column="fchartnumber"/>
        <result property="f107" column="f_107"/>
        <result property="f112" column="f_112"/>
        <result property="f113" column="f_113"/>
        <result property="f114" column="f_114"/>
        <result property="f115" column="f_115"/>
        <result property="solutionid" column="solutionid"/>
        <result property="positionid" column="positionid"/>
        <result property="forderprice" column="forderprice"/>
        <result property="ftaxrate" column="ftaxrate"/>
        <result property="storage" column="storage"/>
        <result property="responsibleName" column="responsibleName"/>
        <result property="topic" resultMap="RM.Topic.Name"/>
        <result property="supplier" resultMap="RM.Supplier.suppliername"/>
        <result property="finspectionlevel" column="finspectionlevel"/>
         <result property="workinstructor" column="workinstructor"/>
         <result property="checktab" column="checktab"/>
         <result property="rpid" column="rpid"/>
         <result property="f102" column="f_102"/>
    </resultMap>
    
  <resultMap id="RM.BaseItem.includeAdminNameVer" class="com.terrence.crm.dol.bean.BaseItem">
        <result property="itemcode" column="itemcode"/>
        <result property="itemname" column="itemname"/>
        <result property="formatno" column="formatno"/>
        <result property="admin" resultMap="RM.BaseItem.admin"/>
        <result property="checkname" column="checkname"/>
        <result property="itemVer" resultMap="RM.BaseItem.ItemVer"/>

  </resultMap>
  
	<resultMap id="RM.BaseItem.ItemVer" class="com.terrence.crm.dol.bean.ItemVer">
        <result property="wfstatus" column="wfstatus"/>
        <result property="finishstatus" column="finishstatus"/>
        <result property="fverid" column="fverid"/>
        <result property="fversion" column="fversion"/>
        <result property="isdefault" column="isdefault"/>
        
    </resultMap>
	
  
  
    
    <resultMap id="RM.BaseItem.list.baseitem.Page" class="com.terrence.crm.dol.bean.BaseItem">
        <result property="baseitemid" column="baseitemid"/>
        <result property="itemcode" column="itemcode"/>
        <result property="itemname" column="itemname"/>
        <result property="formatno" column="formatno"/>
        <result property="createdate" column="createdate"/>
        <result property="wfstatus" column="wfstatus"/>
        <result property="fitemid" column="fitemid"/>
        <result property="picpath" column="picpath"/>
        <result property="adminid" column="adminid"/>
        <result property="auditor" column="auditor"/>
        <result property="verifier" column="verifier"/>
        <result property="usestatus" column="usestatus"/>
        <result property="itemproperty" column="itemproperty"/>
        <result property="finishstatus" column="finishstatus"/>
        <result property="cycleid" column="cycleid"/>
        <result property="fsaleprice" column="fsaleprice"/>
        <result property="taxrate" column="taxrate"/>
        <result property="unitid" column="unitid"/>
        <result property="unitname" column="unitname"/>
        <result property="fqtymin" column="fqtymin"/>
        <result property="secinv" column="secinv"/>
        <result property="seriescode" column="seriescode"/>
        <result property="isdeduct" column="isdeduct"/>
        <result property="refercost" column="refercost"/>
        <result property="buytime" column="buytime"/>
        <result property="maketime" column="maketime"/>
        <result property="isbatch" column="isbatch"/>
        <result property="isbarcode" column="isbarcode"/>
        <result property="categoryid" column="categoryid"/>
        <result property="ischeck" column="ischeck"/>
        <result property="itemcls" column="itemcls"/>
        <result property="youtput" column="youtput"/>
        <result property="lastoutput" column="lastoutput"/>
        <result property="existdemand" column="existdemand"/>
        <result property="makingnums" column="makingnums"/>
        <result property="forecast" column="forecast"/>
        <result property="checkednum" column="checkednum"/>
        <result property="unchecknum" column="unchecknum"/>
        <result property="sumdemand" column="sumdemand"/>
        <result property="responsible" column="responsible"/>
        <result property="supplierid" column="supplierid"/>
        <result property="fissnmanager" column="fissnmanager"/>
        <result property="topicid" column="topicid"/>
        <result property="f101" column="f_101"/>
        <result property="f106" column="f_106"/>
        <result property="f108" column="f_108"/>
        <result property="f119" column="f_119"/>
        <result property="f116" column="f_116"/>
        <result property="fchartnumber" column="fchartnumber"/>
        <result property="f107" column="f_107"/>
        <result property="f112" column="f_112"/>
        <result property="f113" column="f_113"/>
        <result property="f114" column="f_114"/>
        <result property="f115" column="f_115"/>
        <result property="solutionid" column="solutionid"/>
        <result property="positionid" column="positionid"/>
        <result property="forderprice" column="forderprice"/>
        <result property="ftaxrate" column="ftaxrate"/>
        <result property="storage" column="storage"/>
        <result property="supplier" resultMap="RM.Supplier.suppliername"/>
        <result property="admin" resultMap="RM.BaseItem.admin"/>
    </resultMap>
    
    
    
    
    
    <resultMap id="RM.BaseItem.list.baseitem.itemclass.Page" class="com.terrence.crm.dol.bean.BaseItem"><!-- 2013/10/16采购系统，物料管理 -->
        <result property="baseitemid" column="baseitemid"/>
        <result property="itemcode" column="itemcode"/>
        <result property="itemname" column="itemname"/>
        <result property="formatno" column="formatno"/>
        <result property="createdate" column="createdate"/>
        <result property="wfstatus" column="wfstatus"/>
        <result property="fitemid" column="fitemid"/>
        <result property="picpath" column="picpath"/>
        <result property="adminid" column="adminid"/>
        <result property="auditor" column="auditor"/>
        <result property="verifier" column="verifier"/>
        <result property="usestatus" column="usestatus"/>
        <result property="itemproperty" column="itemproperty"/>
        <result property="finishstatus" column="finishstatus"/>
        <result property="cycleid" column="cycleid"/>
        <result property="fsaleprice" column="fsaleprice"/>
        <result property="taxrate" column="taxrate"/>
        <result property="unitid" column="unitid"/>
        <result property="unitname" column="unitname"/>
        <result property="fqtymin" column="fqtymin"/>
        <result property="secinv" column="secinv"/>
        <result property="seriescode" column="seriescode"/>
        <result property="isdeduct" column="isdeduct"/>
        <result property="refercost" column="refercost"/>
        <result property="buytime" column="buytime"/>
        <result property="maketime" column="maketime"/>
        <result property="isbatch" column="isbatch"/>
        <result property="isbarcode" column="isbarcode"/>
        <result property="categoryid" column="categoryid"/>
        <result property="ischeck" column="ischeck"/>
        <result property="itemcls" column="itemcls"/>
        <result property="youtput" column="youtput"/>
        <result property="lastoutput" column="lastoutput"/>
        <result property="existdemand" column="existdemand"/>
        <result property="makingnums" column="makingnums"/>
        <result property="forecast" column="forecast"/>
        <result property="checkednum" column="checkednum"/>
        <result property="unchecknum" column="unchecknum"/>
        <result property="sumdemand" column="sumdemand"/>
        <result property="responsible" column="responsible"/>
        <result property="supplierid" column="supplierid"/>
        <result property="fissnmanager" column="fissnmanager"/>
        <result property="topicid" column="topicid"/>
        <result property="f101" column="f_101"/>
        <result property="f106" column="f_106"/>
        <result property="f108" column="f_108"/>
        <result property="f119" column="f_119"/>
        <result property="f116" column="f_116"/>
        <result property="fchartnumber" column="fchartnumber"/>
        <result property="f107" column="f_107"/>
        <result property="f112" column="f_112"/>
        <result property="f113" column="f_113"/>
        <result property="f114" column="f_114"/>
        <result property="f115" column="f_115"/>
        <result property="solutionid" column="solutionid"/>
        <result property="positionid" column="positionid"/>
        <result property="forderprice" column="forderprice"/>
        <result property="ftaxrate" column="ftaxrate"/>
        <result property="storage" column="storage"/>
        <result property="supplier" resultMap="RM.Supplier.suppliername"/>
        <result property="admin" resultMap="RM.BaseItem.admin"/>
        <result property="suppliertype" resultMap="RM.BaseItem.supplierType"/>
    </resultMap>
    
    
    
    
    
    
    
        
    <resultMap id="RM.BaseItem.admin" class="com.terrence.crm.dol.bean.Admin">
    	<result property="adminName" column="adminName"/>
    </resultMap>
    
     <resultMap id="RM.Topic.Name" class="com.terrence.crm.dol.bean.Topic">
    	<result property="topicname" column="topicname"/>
    </resultMap>
    
    <!-- 2013-08-13 -->
     <resultMap id="RM.BaseItem.supplierType" class="com.terrence.crm.dol.bean.SupplierType">
    	<result property="typename" column="typename"/>
    </resultMap>
    
    
    <resultMap id="RM.Supplier.suppliername" class="com.terrence.crm.dol.bean.Supplier">
        <result property="fname" column="fname"/>
    </resultMap>
    
    <resultMap class="com.terrence.crm.dol.bean.BaseItem" id="RM.BaseItem.Pd">
    	<result property="baseitemid" column="baseitemid"/>
        <result property="itemcode" column="itemcode"/>
        <result property="itemname" column="itemname"/>
        <result property="formatno" column="formatno"/>
        <result property="createdate" column="createdate"/>
        <result property="wfstatus" column="wfstatus"/>
        <result property="fitemid" column="fitemid"/>
        <result property="picpath" column="picpath"/>
        <result property="adminid" column="adminid"/>
        <result property="auditor" column="auditor"/>
        <result property="verifier" column="verifier"/>
        <result property="usestatus" column="usestatus"/>
        <result property="itemproperty" column="itemproperty"/>
        <result property="finishstatus" column="finishstatus"/>
        <result property="cycleid" column="cycleid"/>
        <result property="fsaleprice" column="fsaleprice"/>
        <result property="taxrate" column="taxrate"/>
        <result property="unitid" column="unitid"/>
        <result property="unitname" column="unitname"/>
        <result property="fqtymin" column="fqtymin"/>
        <result property="secinv" column="secinv"/>
        <result property="seriescode" column="seriescode"/>
        <result property="isdeduct" column="isdeduct"/>
        <result property="refercost" column="refercost"/>
        <result property="buytime" column="buytime"/>
        <result property="maketime" column="maketime"/>
        <result property="isbatch" column="isbatch"/>
        <result property="isbarcode" column="isbarcode"/>
        <result property="categoryid" column="categoryid"/>
        <result property="ischeck" column="ischeck"/>
        <result property="itemcls" column="itemcls"/>
        <result property="youtput" column="youtput"/>
        <result property="lastoutput" column="lastoutput"/>
        <result property="existdemand" column="existdemand"/>
        <result property="makingnums" column="makingnums"/>
        <result property="forecast" column="forecast"/>
        <result property="checkednum" column="checkednum"/>
        <result property="unchecknum" column="unchecknum"/>
        <result property="sumdemand" column="sumdemand"/>
        <result property="responsible" column="responsible"/>
        <result property="supplierid" column="supplierid"/>
        <result property="fissnmanager" column="fissnmanager"/>
        <result property="topicid" column="topicid"/>
        <result property="f101" column="f_101"/>
        <result property="f106" column="f_106"/>
        <result property="f108" column="f_108"/>
        <result property="f119" column="f_119"/>
        <result property="f116" column="f_116"/>
        <result property="fchartnumber" column="fchartnumber"/>
        <result property="f107" column="f_107"/>
        <result property="f112" column="f_112"/>
        <result property="f113" column="f_113"/>
        <result property="f114" column="f_114"/>
        <result property="f115" column="f_115"/>
        <result property="solutionid" column="solutionid"/>
        <result property="positionid" column="positionid"/>
        <result property="forderprice" column="forderprice"/>
        <result property="ftaxrate" column="ftaxrate"/>
        <result property="storage" column="storage"/>
        <result property="pdExamineSolution" resultMap="RM.BaseItem.Pd.pdExamineSolution"/>
    </resultMap>
    <resultMap class="com.terrence.crm.dol.bean.PdExamineSolution" id="RM.BaseItem.Pd.pdExamineSolution">
    	<result property="solutionname" column="solutionname"/>
    </resultMap>  
	<resultMap class="com.terrence.crm.dol.bean.BaseItem" id="RM.BaseItem.Process" groupBy="itemcode">
		<result property="baseitemid" column="baseitemid"/>
		<result property="itemcode" column="itemcode"/>
        <result property="itemname" column="itemname"/>
        <result property="wfstatus" column="wfstatus"/>
        <result property="usestatus" column="usestatus"/>
        <result property="itemproperty" column="itemproperty"/>
        <result property="finishstatus" column="finishstatus"/>
        <result property="itemDoc" resultMap="RM.BaseItem.ItemDoc"/>
        <result property="listbom" column="itemcode" select="findItemByBom"/>
        <result property="listItemPorcess" column="baseitemid" select="RM.BaseItem.ListItemprocess"/>
	</resultMap>
	
	<resultMap  id="RM.BaseItem.ProcessVersion" class="com.terrence.crm.dol.bean.BaseItem" groupBy="itemcode">
		<result property="baseitemid" column="baseitemid"/>
		<result property="itemcode" column="itemcode"/>
        <result property="itemname" column="itemname"/>
        <result property="wfstatus" column="wfstatus"/>
        <result property="usestatus" column="usestatus"/>
        <result property="itemproperty" column="itemproperty"/>
        <result property="finishstatus" column="finishstatus"/>
        <result property="itemDoc" resultMap="RM.BaseItem.ItemDoc"/>
        <result property="listorderbom" column="itemcode" select="findItemByOrderBom"/>
        <result property="listitemversion" column="baseitemid" select="BaseItem.findItemVersion"/>
        
	</resultMap>
	
	<resultMap id="RM.BaseItem.ItemVersion" class="com.terrence.crm.dol.bean.ItemVer">
        <result property="fverid" column="fverid"/>
        <result property="baseitemid" column="baseitemid"/>
        <result property="fversion" column="fversion"/>
        <result property="itemcode" column="itemcode"/>
        <result property="isdefault" column="isdefault"/>
        <result property="finishstatus" column="finishstatus"/>
        <result property="wfstatus" column="wfstatus"/>
        
    </resultMap>
		
	<resultMap class="com.terrence.crm.dol.bean.ItemDoc" id="RM.BaseItem.ItemDoc">
		<result property="docname" column="docname"/>
		<result property="docpath" column="docpath"/>
		<result property="isexist" column="isexist"/>
	</resultMap>
	<resultMap id="RM.ItemProcess.BaseItem" class="com.terrence.crm.dol.bean.ItemProcess">
		<result property="itemprocessid" column="itemprocessid"/>
        <result property="processid" column="processid"/>
        <result property="processname" column="processname"/>
        <result property="orderid" column="orderid"/>
        <result property="preparemins" column="preparemins"/>
        <result property="processmins" column="processmins"/>
        <result property="keypoint" column="keypoint"/>
        <result property="explain" column="explain"/>
        <result property="programname" column="programname"/>
    </resultMap>  
	<resultMap class="com.terrence.crm.dol.bean.Bom" id="RM.BaseItem.Bom">
		<result property="parentcode" column="parentcode"/>
        <result property="parentname" column="parentname"/>
        <result property="parentqty" column="parentqty"/>
        <result property="parentunitname" column="parentunitname"/>
	</resultMap>
	
	<resultMap class="com.terrence.crm.dol.bean.OrderBom" id="RM.BaseItem.OrderBom">
		<result property="parentcode" column="parentcode"/>
        <result property="parentname" column="parentname"/>
        <result property="parentqty" column="parentqty"/>
        <result property="parentunitname" column="parentunitname"/>
	</resultMap>
	
	<resultMap id="RM.BaseItem.AlluseItem" class="com.terrence.crm.dol.bean.BaseItem">
		   <result property="baseitemid" column="baseitemid"/>
        <result property="itemcode" column="itemcode"/>
        <result property="itemname" column="itemname"/>
        <result property="formatno" column="formatno"/>
        <result property="itemproperty" column="itemproperty"/>
        <result property="unitname" column="unitname"/>
        <result property="fqtymin" column="fqtymin"/>
        <result property="secinv" column="secinv"/>
        <result property="isdeduct" column="isdeduct"/>
        <result property="buytime" column="buytime"/>
        <result property="isbatch" column="isbatch"/>
        <result property="isbarcode" column="isbarcode"/>
        <result property="ischeck" column="ischeck"/>
        <result property="itemcls" column="itemcls"/>
        <result property="youtput" column="youtput"/>
        <result property="maketime" column="maketime"/>
        <result property="refercost" column="refercost"/>
        <result property="itemcls" column="itemcls"/>
        
        
        <result property="cycle" resultMap="RM.BaseItem.Cycle"/>
	</resultMap>
	<resultMap id="RM.BaseItem.DefaultProcess"  class="com.terrence.crm.dol.bean.ItemProcess" >
		<result property="procedurename" column="procedurename"/>
        <result property="devicename" column="devicename"/>
        <result property="processname" column="processname"/>
        <result property="preparemins" column="preparemins"/>
        <result property="processmins" column="processmins"/>
	</resultMap>
	<resultMap class="com.terrence.crm.dol.bean.BaseItem" id="RM.BaseItem.Topic.Size">
		<result property="baseitemid" column="baseitemid"/>
		<result property="itemcode" column="itemcode"/>
        <result property="itemname" column="itemname"/>
        <result property="formatno" column="formatno"/>
        <result property="issize" column="issize"/>
        <result property="topicid" column="topicid"/>
        <result property="topic" resultMap="RM.BaseItem.Topic.Size.Detail"/>
	</resultMap>
	<resultMap class="com.terrence.crm.dol.bean.Topic" id="RM.BaseItem.Topic.Size.Detail">
		<result property="topicname" column="topicname"/>
	</resultMap>
	
	<!-- 关联盘库选择的物料返回结果 -->
	<resultMap class="com.terrence.crm.dol.bean.BaseItem" id="RM.BaseItem.listTakeStockItems">
		<result property="itemcode" column="itemcode"/>
        <result property="itemname" column="itemname"/>
        <result property="formatno" column="formatno"/>
		<result property="unitname" column="unitname"/>
		<result property="itemstocknum" column="itemstocknum"/>
		<result property="batchno" column="batchno"/>
	</resultMap>
	
	<resultMap class="com.terrence.crm.dol.bean.BaseItem" id="RM.BaseItem.listToPosition">
		<result property="baseitemid" column="baseitemid"/>
		<result property="itemcode" column="itemcode"/>
        <result property="itemname" column="itemname"/>
        <result property="formatno" column="formatno"/>
	
	</resultMap>
	<resultMap class="com.terrence.crm.dol.bean.BaseItem" id="RM.BaseItem.listToPositionsys">
		<result property="baseitemid" column="baseitemid"/>
		<result property="itemcode" column="itemcode"/>
        <result property="itemname" column="itemname"/>
        <result property="formatno" column="formatno"/>
	    <result property="positionname" column="positionname"/>
	
	</resultMap>
	<!-- 盘库返回结果 -->
	<resultMap id="RM.BaseItem.findItem.takestock" class="com.terrence.crm.dol.bean.BaseItem">
		 <result property="baseitemid" column="baseitemid"/>
        <result property="itemcode" column="itemcode"/>
        <result property="itemname" column="itemname"/>
        <result property="formatno" column="formatno"/>
        <result property="unitname" column="unitname"/>
        <result property="isbatch" column="isbatch"/>
        <result property="storage" column="storage"/>
        <result property="unitid" column="unitid"/>
        <result property="f102" column="f_102"/>
        <result property="f101" column="f_101"/>
        <result property="fissnmanager" column="fissnmanager"/>
       	<result property="fsaleprice" column="fsaleprice"/>
        <result property="responsible" column="responsible"/>
        <result property="supplierid" column="supplierid"/>
        <result property="forderprice" column="forderprice"/>
        <result property="ftaxrate" column="ftaxrate"/>
        <result property="stockName" column="stockName"/>
        <result property="supplier" resultMap="RM.Supplier.suppliername"/>
        <result property="admin" resultMap="RM.BaseItem.admin.find.porequest"/>
        <!-- 库存数 -->
        <result property="inventoryBatch" resultMap="RM.BaseItem.inventoryBatch"/>
	</resultMap>
	
	<resultMap id="RM.BaseItem.findItem.porequest" class="com.terrence.crm.dol.bean.BaseItem">
		 <result property="baseitemid" column="baseitemid"/>
        <result property="itemcode" column="itemcode"/>
        <result property="itemname" column="itemname"/>
        <result property="formatno" column="formatno"/>
        <result property="unitname" column="unitname"/>
        <result property="isbatch" column="isbatch"/>
        <result property="storage" column="storage"/>
        <result property="unitid" column="unitid"/>
        <result property="f102" column="f_102"/>
        <result property="f101" column="f_101"/>
        <result property="fissnmanager" column="fissnmanager"/>
       	<result property="fsaleprice" column="fsaleprice"/>
        <result property="responsible" column="responsible"/>
        <result property="supplierid" column="supplierid"/>
        <result property="forderprice" column="forderprice"/>
        <result property="ftaxrate" column="ftaxrate"/>
        <result property="stockName" column="stockName"/>
        <result property="supplier" resultMap="RM.Supplier.suppliername"/>
        <result property="admin" resultMap="RM.BaseItem.admin.find.porequest"/>
        <result property="deptid" column="deptid"/>
        <result property="deptname" column="teamname"/>
	</resultMap>
	<!-- 库存返回结果集 -->
	<resultMap id="RM.BaseItem.findItem.plsheet" class="com.terrence.crm.dol.bean.BaseItem">
		 <result property="baseitemid" column="baseitemid"/>
        <result property="itemcode" column="itemcode"/>
        <result property="itemname" column="itemname"/>
        <result property="formatno" column="formatno"/>
        <result property="unitname" column="unitname"/>
        <result property="isbatch" column="isbatch"/>
        <result property="storage" column="storage"/>
        <result property="unitid" column="unitid"/>
        <result property="f102" column="f_102"/>
        <result property="f101" column="f_101"/>
        <result property="fissnmanager" column="fissnmanager"/>
       	<result property="fsaleprice" column="fsaleprice"/>
        <result property="responsible" column="responsible"/>
        <result property="supplierid" column="supplierid"/>
        <result property="forderprice" column="forderprice"/>
        <result property="ftaxrate" column="ftaxrate"/>
        <result property="stockName" column="stockName"/>
        
        <result property="itemstocknum" column="itemstocknum"/>
		<result property="batchno" column="batchno"/>
	</resultMap>
	 <resultMap id="RM.BaseItem.admin.find.porequest" class="com.terrence.crm.dol.bean.Admin">
    	<result property="adminName" column="adminName"/>
    </resultMap>
	
	
	 <resultMap id="RM.BaseItem.getBaseByColumn" class="com.terrence.crm.dol.bean.BaseItem">
    	<result property="baseitemid" column="baseitemid"/>
        <result property="itemcode" column="itemcode"/>
        <result property="itemname" column="itemname"/>
        <result property="formatno" column="formatno"/>
        <result property="fullname" column="fullname"/>
    </resultMap>
    
	
	 <resultMap id="RM.BaseItem.getpositionBycode" class="com.terrence.crm.dol.bean.BaseItem">
    	<result property="baseitemid" column="baseitemid"/>
    	<result property="itemposition" column="baseitemid" select="BaseItem.getpositionBycode.finditemposition"/>
    </resultMap>
    
	<resultMap id="RM.BaseItem.itempositions" class="com.terrence.crm.dol.bean.ItemPostion">
    	<result property="positionid" column="positionid"/>
    </resultMap>
	
	
	<resultMap id="RM.BaseItem.pdkey" class="com.terrence.crm.dol.bean.BaseItem">
    	<result property="itemcode" column="itemcode"/>
    	<result property="itemname" column="itemname"/>
    	<result property="formatno" column="formatno"/>
    	<result property="f102" column="f102"/>
    </resultMap>
    
    <resultMap id="RM.BaseItem.find.inItemKey" class="com.terrence.crm.dol.bean.BaseItem">
    	<result property="itemcode" column="itemcode"/>
    	<result property="itemname" column="itemname"/>
    	<result property="formatno" column="formatno"/>
    	<result property="f102" column="f102"/>
    	<result property="itemproperty" column="itemproperty"/>
    	<result property="topicid" column="topicid"/>
    	
    	
    </resultMap>
	
    
	<resultMap class="com.terrence.crm.dol.bean.BaseItem" id="RM.BaseItem.Page.namecode">
		<result property="itemcode" column="itemcode"/>
        <result property="itemname" column="itemname"/>
        <result property="formatno" column="formatno"/>
	</resultMap>
	
	
	<resultMap id="RM.BaseItem.find.bitem" class="com.terrence.crm.dol.bean.BaseItem">
       	<result property="fitemid" column="fitemid"/>
       	<result property="storage" column="storage"/>
    </resultMap>
    
    <resultMap id="RM.BaseItem.find.bitem.issn" class="com.terrence.crm.dol.bean.BaseItem">
       	<result property="fitemid" column="fitemid"/>
       	<result property="storage" column="storage"/>
       	<result property="fissnmanager" column="fissnmanager"/>
       	
    </resultMap>
    
    <resultMap id="RM.BaseItem.find.bitem.finditembase" class="com.terrence.crm.dol.bean.BaseItem">
       	<result property="fitemid" column="fitemid"/>
       	<result property="storage" column="storage"/>
       	<result property="unitid" column="unitid"/>
    </resultMap>
	
	
	
	<resultMap id="RM.BaseItem.find.listToInventory" class="com.terrence.crm.dol.bean.BaseItem">
	
	    <result property="baseitemid" column="baseitemid"/>
        <result property="itemcode" column="itemcode"/>
        <result property="itemname" column="itemname"/>
        <result property="formatno" column="formatno"/>
       	<result property="unitid" column="unitid"/>
       	<result property="unitname" column="unitname"/>
       	<result property="isbatch" column="isbatch"/>
       	<result property="fissnmanager" column="fissnmanager"/>
       	
       	<result property="inventoryBatch" resultMap="RM.BaseItem.inventoryBatch"/>
    </resultMap>
    
	<resultMap class="com.terrence.crm.dol.bean.InventoryBatch" id="RM.BaseItem.inventoryBatch.takestock">
       	<result property="batchno" column="batchno"/>
       	<result property="fqty" column="fqtyreal"/>
       	<result property="stockname" column="fname"/>
       	
	</resultMap>
	
	<resultMap class="com.terrence.crm.dol.bean.InventoryBatch" id="RM.BaseItem.inventoryBatch">
	 	<result property="batchid" column="batchid"/>
       	<result property="batchno" column="batchno"/>
       	<result property="fqty" column="fqtyreal"/>
       	<result property="fitemid" column="fitemid"/>
       	<result property="stockname" column="fname"/>
       	<result property="dbno" column="dbno"/>
	</resultMap>	
	
	<resultMap class="com.terrence.crm.dol.bean.BaseItem" id="RM.BaseItem.getfitemid">
		<result property="fitemid" column="fitemid"/>
	</resultMap>
	
	
	<resultMap id="RM.BaseItem.in.itemStepInstructor" class="com.terrence.crm.dol.bean.BaseItem">
       
        <result property="itemcode" column="itemcode"/>
       <result property="baseitemid" column="baseitemid"/>
	</resultMap>
	
	
	<resultMap id="RM.BaseItem.materialAssembkyScheme" class="com.terrence.crm.dol.bean.BaseItem">
    	<result property="baseitemid" column="baseitemid"/>
        <result property="itemcode" column="itemcode"/>
        <result property="itemname" column="itemname"/>
        <result property="formatno" column="formatno"/>
        <result property="guideid" column="guideid"/>
        <result property="craftid" column="craftid"/>
        <result property="assembkyid" column="assembkyid"/>
        <result property="crfis" column="crfis"/>
        <result property="assis" column="assis"/>
        <result property="guideis" column="guideis"/>
        <result property="areaName" column="areaName"/>
        <result property="plateid" column="plateid"/>
        <result property="pnpid" column="pnpid"/>
    </resultMap>
    
    <resultMap id="RM.BaseItem.materialAssembkyScheme.NEW" class="com.terrence.crm.dol.bean.BaseItem">
    	<result property="baseitemid" column="baseitemid"/>
        <result property="itemcode" column="itemcode"/>
        <result property="itemname" column="itemname"/>
        <result property="formatno" column="formatno"/>
        <result property="guideid" column="guideid"/>
        <result property="craftid" column="craftid"/>
        <result property="assembkyid" column="assembkyid"/>
        <result property="crfis" column="crfis"/>
        <result property="assis" column="assis"/>
        <result property="guideis" column="guideis"/>
        <result property="areaName" column="areaName"/>
        <result property="apid" column="apid"/>
         <result property="rpid" column="rpid"/>
         <result property="fname" column="fname"/>
        
        <result property="plateList" column="{itemcode=itemcode,baseitemid=baseitemid}" select="baseitem.platename.data.forSelect"/>
    </resultMap>
    
    <resultMap id="RM.PdNameplate.data.in.Baseitem" class="com.terrence.crm.dol.bean.PdNameplate">
        <result property="pnpid" column="pnpid"/>
        <result property="plateid" column="plateid"/>
        <result property="itemcode" column="itemcode"/>
        <result property="baseitemid" column="baseitemid"/>
        <result property="platename" column="platename"/>
    </resultMap>
    
    
    <resultMap id="RM.BaseItem.find.guide.data" class="com.terrence.crm.dol.bean.BaseItem">
    	<result property="baseitemid" column="baseitemid"/>
        <result property="itemcode" column="itemcode"/>
        <result property="guideid" column="guideid"/>
        <result property="craftid" column="craftid"/>
        <result property="assemblyGuideList" column="guideid" select="guideid.in.baseitem.find.Guide"/>
    </resultMap>
	
	<resultMap id="AssemblyGuide.RM.in.baseitem.data" class="com.terrence.crm.dol.bean.AssemblyGuide">
        <result property="guideid" column="guideid"/>
        <result property="guidename" column="guidename"/>
        <result property="createdate" column="createdate"/>
        <result property="fexplain" column="fexplain"/>
        <result property="fversion" column="fversion"/>
       <result property="agitemList" column="guideid" select="ass.guideid.in.baseitem"/>
    </resultMap>
	
	
	<resultMap id="AssemblyGuideItem.RM.in.itembase" class="com.terrence.crm.dol.bean.AssemblyGuideItem">
        <result property="itemid" column="itemid"/>
        <result property="guideid" column="guideid"/>
        <result property="itemname" column="itemname"/>
        <result property="fexplain" column="fexplain"/>
    </resultMap>
    
    <resultMap id="RM.BaseItem.find.keyitemcode" class="com.terrence.crm.dol.bean.BaseItem">
    	<result property="baseitemid" column="baseitemid"/>
        <result property="itemcode" column="itemcode"/>
        <result property="itemname" column="itemname"/>
        <result property="formatno" column="formatno"/>
        <result property="pdkey" column="pdkey"/>
    </resultMap>
    
    
    <resultMap id="RM.BaseItem.Trial.findPagebind" class="com.terrence.crm.dol.bean.BaseItem">
        <result property="baseitemid" column="baseitemid"/>
        
        <result property="itemcode" column="itemcode"/>
        <result property="itemname" column="itemname"/>
        <result property="formatno" column="formatno"/>
        <result property="rid" column="rid"/>
    </resultMap>
    
    
     <resultMap class="com.terrence.crm.dol.bean.InventoryBatch" id="RM.BaseItem.InventoryBatch.SNum.management"><!-- 序列号管理用 -->
    	<result property="fqty" column="fqty"/>
        <result property="fqty2" column="fqty2"/>
        <result property="dbno" column="dbno"/>
        <result property="fitemid" column="fitemid"/>
    </resultMap>
    <resultMap id="RM.BaseItem.serialNum.management" class="com.terrence.crm.dol.bean.BaseItem">
        <result property="baseitemid" column="baseitemid"/>
        <result property="itemcode" column="itemcode"/>
        <result property="itemname" column="itemname"/>
        <result property="formatno" column="formatno"/>
        <result property="fissnmanager" column="fissnmanager"/>
        <result property="stockName" column="stockName"/>
        <result property="inventoryBatch" resultMap="RM.BaseItem.InventoryBatch.SNum.management"/>
    </resultMap>
    

    
<!-- 外购序列号物料任务单查询 -->
	<resultMap id="RM.BaseItem.findPage.buy.SN" class="com.terrence.crm.dol.bean.BaseItem">
		<result property="itemcode" column="itemcode"/>   
		<result property="itemsn" column="itemsn"/>
		<result property="fqty" column="fqty"/>
		<result property="inputfqty" column="inputfqty"/>
		
		<result property="createdateBegin" column="createdateBegin"/>
		<result property="createdateEnd" column="createdateEnd"/>
		   
	   
		<result property="tasklist" column="{itemcode=itemcode,itemsn=itemsn,createdateBegin=createdateBegin,createdateEnd=createdateEnd}" select="BaseItem.findpicking.buy.SN.findTaskitem"/>
	</resultMap>

    
<!-- 物料任务单查询 -->
	<resultMap id="RM.BaseItem.findPage.SN" class="com.terrence.crm.dol.bean.BaseItem">
		<result property="itemcode" column="itemcode"/>   
		<result property="itemsn" column="itemsn"/>
		<result property="fqty" column="fqty"/>
		<result property="inputfqty" column="inputfqty"/>
		
		<result property="createdateBegin" column="createdateBegin"/>
		<result property="createdateEnd" column="createdateEnd"/>
		   
		<result property="pickinglist" column="{itemcode=itemcode,itemsn=itemsn}" select="BaseItem.findpickingByFbillno.SN"/>   
		<result property="tasklist" column="{itemcode=itemcode,itemsn=itemsn,createdateBegin=createdateBegin,createdateEnd=createdateEnd}" select="BaseItem.findpicking.SN.findTaskitem"/>
	</resultMap>
<!-- 批次管理物料任务单查询 -->
	<resultMap id="RM.BaseItem.findPage.batch" class="com.terrence.crm.dol.bean.BaseItem">
		<result property="itemcode" column="itemcode"/>   
		<result property="itemsn" column="itemsn"/>
		<result property="fqty" column="fqty"/>
		<result property="inputfqty" column="inputfqty"/>
		
		<result property="createdateBegin" column="createdateBegin"/>
		<result property="createdateEnd" column="createdateEnd"/>
		
		<result property="pickinglist" column="{itemcode=itemcode,itemsn=itemsn}" select="BaseItem.findpickingByFbillno.SN"/>   
		<result property="tasklist" column="{itemcode=itemcode,itemsn=itemsn,createdateBegin=createdateBegin,createdateEnd=createdateEnd}" select="BaseItem.findpicking.batch.findTaskitem"/>
	</resultMap>
<!-- 外购批次管理物料任务单查询 -->
	<resultMap id="RM.BaseItem.findPage.buy.batchno" class="com.terrence.crm.dol.bean.BaseItem">
		<result property="itemcode" column="itemcode"/>   
		<result property="itemsn" column="itemsn"/>
		<result property="fqty" column="fqty"/>
		<result property="inputfqty" column="inputfqty"/>
		
		<result property="createdateBegin" column="createdateBegin"/>
		<result property="createdateEnd" column="createdateEnd"/>
		
		   
		<result property="tasklist" column="{itemcode=itemcode,itemsn=itemsn,createdateBegin=createdateBegin,createdateEnd=createdateEnd}" select="BaseItem.findpicking.buy.batch.findTaskitem"/>
	</resultMap>

    
     <resultMap id="BaseItem.getentity.result" class="com.terrence.crm.dol.bean.BaseItem">
        <result property="baseitemid" column="baseitemid"/>
        <result property="itemcode" column="itemcode"/>
        <result property="itemname" column="itemname"/>
        <result property="formatno" column="formatno"/>
    </resultMap>

	
	
	
<!--物料 -->
	<resultMap id="RM.BaseItem.getitem.SN" class="com.terrence.crm.dol.bean.BaseItem">
		   
		<result property="itemcode" column="itemcode"/>   
		<result property="itemsn" column="itemsn"/>   
		<result property="pickinglist" column="{itemcode=itemcode,itemsn=itemsn}" select="BaseItem.findpicking.SN"/>   
		<result property="tasklist" column="{itemcode=itemcode,itemsn=itemsn}" select="BaseItem.findpicking.SN.findTask"/>   
	</resultMap>

<!--领料单 -->
	<resultMap id="RM.BaseItem.findpicking.SN" class="com.terrence.crm.dol.bean.Picking">
		<result property="pickingid" column="pickingid"/>
		<result property="fbillno" column="fbillno"/>
		<result property="fdate" column="fdate"/>
		<result property="itemcode" column="itemcode"/>
		<result property="fqty" column="fqty"/>
		
	</resultMap>
	<!-- 根据任务单物料,获取任务单的领料单 -->
	<resultMap id="RM.BaseItem.findpickingByFbillno.SN" class="com.terrence.crm.dol.bean.Picking">
		<result property="pickingid" column="pickingid"/>
		<result property="fbillno" column="fbillno"/>
		<result property="fdate" column="fdate"/>
	</resultMap>
<!--任务单,包含入库单,质检单 -->
	<resultMap id="RM.BaseItem.findpicking.SN.findTask" class="com.terrence.crm.dol.bean.AssemblyTask">
		<result property="taskcode" column="fbillno"/>
 		<result property="id" column="fbillnoid"/>
 		<result property="createdate" column="createdate"/>
 		<result property="batchno" column="batchno"/>
 		<result property="itemcode" column="itemcode"/>
 		<result property="isbatch" column="isbatch"/>
 		
 		
 		
 		<result property="pickinglist" column="{fbillno=fbillno,batchno=batchno}" select="BaseItem.findpicking.SN.findTask.findpickinglist"/>
		<result property="putstoragelist" column="{fbillno=fbillno,batchno=batchno}" select="BaseItem.findpicking.SN.findTask.findPutstorage"/>
		<result property="checklist" column="{fbillno=fbillno,batchno=batchno}" select="BaseItem.findpicking.SN.findTask.findchecklist"/>
		
	</resultMap>
<!--外购任务单,包含入库单,质检单 -->
	<resultMap id="RM.BaseItem.findpicking.buy.SN.findTask" class="com.terrence.crm.dol.bean.AssemblyTask">
		<result property="taskcode" column="fbillno"/>
 		<result property="id" column="fbillnoid"/>
 		<result property="createdate" column="createdate"/>
 		<result property="batchno" column="batchno"/>
 		<result property="itemcode" column="itemcode"/>
 		<result property="orderid" column="orderid"/>
 		<result property="waitid" column="waitid"/>
 		
		<result property="putstoragelist" column="{fbillno=fbillno,batchno=batchno,orderid=orderid}" select="BaseItem.findpicking.buy.SN.findTask.findPutstorage"/>
		<result property="checklist" column="{fbillno=fbillno,batchno=batchno,waitid=waitid}" select="BaseItem.findpicking.buy.SN.findTask.findchecklist"/>
		
	</resultMap>
	
	
	
	
	
	
	
<!-- 下级任务单 -->
	<resultMap id="RM.BaseItem.findpicking.SN.findTask.Next" class="com.terrence.crm.dol.bean.AssemblyTask">
		<result property="taskcode" column="fbillno"/>
 		<result property="id" column="fbillnoid"/>
 		<result property="createdate" column="createdate"/>
 		<result property="batchno" column="batchno"/>
 		<result property="itemcode" column="itemcode"/>
 		<result property="isbatch" column="isbatch"/>
 		
 		<result property="pickinglist" column="{fbillno=fbillno,batchno=batchno}" select="BaseItem.findpicking.SN.findTask.findpickinglist.next"/>
		<result property="putstoragelist" column="{fbillno=fbillno,batchno=batchno}" select="BaseItem.findpicking.SN.findTask.findPutstorage.next"/>
		<result property="checklist" column="{fbillno=fbillno,batchno=batchno}" select="BaseItem.findpicking.SN.findTask.findchecklist"/>
		
	</resultMap>
	
	
	
	
<!--批次任务单,包含入库单,质检单 -->
	<resultMap id="RM.BaseItem.findpicking.batch.findTask" class="com.terrence.crm.dol.bean.AssemblyTask">
		<result property="taskcode" column="fbillno"/>
 		<result property="id" column="fbillnoid"/>
 		<result property="createdate" column="createdate"/>
 		<result property="batchno" column="batchno"/>
 		<result property="itemcode" column="itemcode"/>
 		<result property="isbatch" column="isbatch"/>
 		
 		<result property="pickinglist" column="{fbillno=fbillno,batchno=batchno}" select="BaseItem.findpicking.batch.findTask.findpickinglist"/>
		<result property="putstoragelist" column="{fbillno=fbillno,batchno=batchno}" select="BaseItem.findpicking.SN.findTask.findPutstorage"/>
		<result property="checklist" column="{fbillno=fbillno,batchno=batchno}" select="BaseItem.findpicking.SN.findTask.findchecklist"/>
		
	</resultMap>
<!--外购批次任务单,包含入库单,质检单 -->
	<resultMap id="RM.BaseItem.findpicking.buy.batch.findTask" class="com.terrence.crm.dol.bean.AssemblyTask">
		<result property="taskcode" column="fbillno"/>
 		<result property="id" column="fbillnoid"/>
 		<result property="createdate" column="createdate"/>
 		<result property="batchno" column="batchno"/>
 		<result property="itemcode" column="itemcode"/>
 		<result property="isbatch" column="isbatch"/>
 		
		<result property="putstoragelist" column="{fbillno=fbillno,batchno=batchno,itemcode=itemcode}" select="BaseItem.findpicking.buy.findTask.findPutstorage"/>
		<result property="checklist" column="{fbillno=fbillno,batchno=batchno,itemcode=itemcode}" select="BaseItem.findpicking.buy.findTask.findchecklist"/>
	</resultMap>
		
	
<!-- 质检单据 -->
	
	<resultMap id="RM.BaseItem.findpicking.SN.findTask.findchecklist" class="com.terrence.crm.dol.bean.PdQm">
		<result property="fbillno" column="fbillno"/>
		<result property="qmid" column="qmid"/>
		<result property="fbilldate" column="fbilldate"/>
		
	</resultMap>
	
	
<!-- 入库单 -->	
	<resultMap id="RM.BaseItem.findpicking.SN.findTask.findPutstorage" class="com.terrence.crm.dol.bean.Putstorage">
		<result property="finterid" column="finterid"/>
		<result property="fbillno" column="fbillno"/>
		<result property="creatdate" column="creatdate"/>
		<result property="itemcode" column="itemcode"/>
		<result property="snlist" column="{itemcode=itemcode,finterid=finterid}"  select="BaseItem.findpicking.SN.findTask.findPutstorage.findSN"/>
	</resultMap>

<!-- 入库单序列号集合 -->
	
	<resultMap id="RM.BaseItem.findpicking.SN.findTask.findPutstorage.findSN" class="com.terrence.crm.dol.bean.BaseItem">
		<result property="itemsn" column="fbatchno"/>
	</resultMap>
	
	
	
	
	
	<resultMap id="RM.BaseItem.findList.getbatch" class="com.terrence.crm.dol.bean.BaseItem">
		<result property="itemsn" column="itemsn"/>
		<result property="itemcode" column="itemcode"/>
	</resultMap>
	
	
	
	<resultMap id="RM.BaseItem.getBaseFqty" class="com.terrence.crm.dol.bean.BaseItem">
		<result property="itemcode" column="itemcode"/>
        <result property="itemname" column="itemname"/>
        <result property="formatno" column="formatno"/>
	    <result property="fqty" column="fqty"/>
	</resultMap>
	
	
	<resultMap id="RM.BaseItem.gettopicid" class="com.terrence.crm.dol.bean.BaseItem">
		<result property="topicid" column="topicid"/>
	</resultMap>
	
	 <resultMap id="RM.BaseItem.BaseItem.data.base" class="com.terrence.crm.dol.bean.BaseItem">
        <result property="guideis" column="guideis"/>
        <result property="guideid" column="guideid"/>
      <result property="itemcode" column="itemcode"/>
        <result property="itemname" column="itemname"/>
        <result property="formatno" column="formatno"/>

  </resultMap>

	
	<resultMap id="RM.BaseItem.getIsbatch.Issn" class="com.terrence.crm.dol.bean.BaseItem">
		<result property="isbatch" column="isbatch"/>
		<result property="fissnmanager" column="fissnmanager"/>
		<result property="itemcode" column="itemcode"/>
		
	</resultMap>
	

	

	<resultMap id="RM.BaseItem.findlist.findurl" class="com.terrence.crm.dol.bean.BaseItem">
		<result property="itemcode" column="itemcode"/>
		<result property="url" column="url"/>
		
	</resultMap>

	<resultMap id="ItemBase.data.factoryReport.data" class="com.terrence.crm.dol.bean.BaseItem">
		<result property="itemname" column="itemname"/>
        <result property="formatno" column="formatno"/>
        <result property="fissnmanager" column="fissnmanager"/>
	    <result property="rpid" column="rpid"/>
	    <result property="installdiagram" column="installdiagram"/>
	    <result property="maintainpartdiagram" column="maintainpartdiagram"/>
	</resultMap>

	
	
	

	<resultMap id="RM.BaseItem.getByTecsn" class="com.terrence.crm.dol.bean.BaseItem">
		<result property="itemcode" column="itemcode"/>
		<result property="formatno" column="formatno"/>
		<result property="f119" column="f119"/>
		<result property="f116" column="f116"/>
		
		<result property="f107" column="f107"/>
		<result property="f106" column="f106"/>
		<result property="f108" column="f108"/>
		<result property="icitemDesign" resultMap="RM.BaseItem.getByTecsn.IcitemDesign"/>
		<result property="orderproduct" resultMap="RM.BaseItem.getByTecsn.orderproduct"/>
		
		
	</resultMap>
	

	
	<resultMap id="RM.BaseItem.getByTecsn.IcitemDesign" class="com.terrence.crm.dol.bean.IcitemDesign">
		<result property="baseitemid" column="baseitemid" />
		<result property="fdn" column="fdn" />
		<result property="fpn" column="fpn" />
		<result property="fpdname" column="fpdname" />
		<result property="fpdtype" column="fpdtype" />
		<result property="fmaxip" column="fmaxip" />
		<result property="fps" column="fps" />
		<result property="fipr" column="fipr" />
		<result property="fbpu" column="fbpu" />
		<result property="fopr" column="fopr" />
		<result property="fwd" column="fwd" />
		<result property="fwds" column="fwds" />
		<result property="fpds" column="fpds" />
		<result property="fbody" column="fbody" />
		<result property="fcg" column="fcg" />
		<result property="structlen" column="structlen" />
		<result property="allowpresure" column="allowpresure" />
		<result property="structtype" column="structtype" />
		<result property="fgas" column="fgas" />
		<result property="otemprange" column="otemprange" />
		<result property="mindifference" column="mindifference" />
		<result property="chambermax" column="chambermax" />
		<result property="pressmax" column="pressmax" />
		<result property="setpressure" column="setpressure" />
		<result property="soverpressure" column="soverpressure" />
		<result property="soverpressureval" column="soverpressureval" />
		<result property="sunderpressure" column="sunderpressure" />
		<result property="sunderpressureval" column="sunderpressureval" />
		<result property="resptime" column="resptime" />
		<result property="resetdifferent" column="resetdifferent" />
	
		<result property="oldfeatures" column="oldfeatures" />
		<result property="fheart" column="fheart" />
		<result property="trip" column="trip" />
		<result property="cv" column="cv" />
		<result property="mfbody" column="mfbody" />
		<result property="allowdvalue" column="allowdvalue" />
		<result property="structure" column="structure" />
		<result property="voltage" column="voltage" />
		<result property="protecttype" column="protecttype" />
		<result property="insignal" column="insignal" />
		<result property="fixed" column="fixed" />
		<result property="jdrank" column="jdrank" />
		<result property="basedvalue" column="basedvalue" />
		<result property="returndvalue" column="returndvalue" />
		<result property="diearea" column="diearea" />
		<result property="tripdvalue" column="tripdvalue" />

	
	
	
	</resultMap>
	
	
	<resultMap id="RM.BaseItem.getByTecsn.orderproduct" class="com.terrence.crm.dol.bean.OrdersProduct">
			<result property="fbillno" column="fbillno" />
			<result property="createtime" column="createtime" />
			<result property="changetime" column="changetime" />
			<result property="changeuser" column="changeuser" />
			<result property="priority" column="priority" />
			<result property="amount" column="amount" />
			<result property="mininpressure" column="mininpressure" />
			<result property="maxinpressure" column="maxinpressure" />
			<result property="minoutpressure" column="minoutpressure" />
			<result property="maxoutpressure" column="maxoutpressure" />
			<result property="outpressure" column="outpressure" />
			<result property="inpressure" column="inpressure" />
			<result property="turnpressue" column="turnpressue" />
			<result property="blowpressure" column="blowpressure" />
			<result property="fclose" column="fclose" />
			<result property="unitname" column="unitname" />
			<result property="deleverydate" column="deleverydate" />
			<result property="status" column="status" />
			<result property="lastamount" column="lastamount" />
			<result property="innum" column="innum" />
			<result property="existednums" column="existednums" />
			<result property="making" column="making" />
			<result property="youtput" column="youtput" />
			<result property="cyclename" column="cyclename" />
			<result property="ratio" column="ratio" />
			<result property="planednum" column="planednum" />
			<result property="lastinnum" column="lastinnum" />
			<result property="notes" column="notes" />
			<result property="unitid" column="unitid" />
			<result property="morehighpressure" column="morehighpressure" />
			<result property="morelowpressure" column="morelowpressure" />
			<result property="ftaxprice" column="ftaxprice" />
			<result property="fprice" column="fprice" />
			<result property="fallamount" column="fallamount" />
			<result property="famount" column="famount" />
			<result property="fcess" column="fcess" />
			<result property="ftaxamount" column="ftaxamount" />
			<result property="fpricediscount" column="fpricediscount" />
			<result property="fstockqty" column="fstockqty" />
	</resultMap>
	
	
	
	<resultMap class="com.terrence.crm.dol.bean.BaseItem" id="BaseItem.MR.select.update.datalist.result">
		<result property="existdemand4" column="existdemand4"/>
		<result property="makingnums4" column="makingnums4"/>
		<result property="checkednum4" column="checkednum4"/>
		<result property="unchecknum4" column="unchecknum4"/>
		<result property="sumdemand4" column="sumdemand4"/>
		<result property="existdemand" column="existdemand"/>
		<result property="makingnums" column="makingnums"/>
		<result property="checkednum" column="checkednum"/>
		<result property="unchecknum" column="unchecknum"/>
		<result property="sumdemand" column="sumdemand"/>
		<result property="baseitemid" column="baseitemid"/>
		<result property="planfqty" column="planfqty"/>
		<result property="planfqty4" column="planfqty4"/>
	</resultMap>
	
	<!-- 用于select查询公用抽取的列 -->
	<sql id="BaseItem.columns">
	    <![CDATA[
        	t_base_item.baseitemid ,
        	t_base_item.itemcode ,
        	t_base_item.itemname ,
        	t_base_item.formatno ,
        	t_base_item.createdate ,
        	t_base_item.wfstatus ,
        	t_base_item.fitemid ,
        	t_base_item.picpath ,
        	t_base_item.adminid ,
        	t_base_item.auditor ,
        	t_base_item.verifier ,
        	t_base_item.usestatus ,
        	t_base_item.itemproperty ,
        	t_base_item.finishstatus ,
        	t_base_item.cycleid ,
        	t_base_item.fsaleprice ,
        	t_base_item.taxrate ,
        	t_base_item.unitid ,
        	t_base_item.unitname ,
        	t_base_item.fqtymin ,
        	t_base_item.secinv ,
        	t_base_item.seriescode ,
        	t_base_item.isdeduct ,
        	t_base_item.refercost ,
        	t_base_item.buytime ,
        	t_base_item.maketime ,
        	t_base_item.isbatch ,
        	t_base_item.isbarcode,
        	t_base_item.categoryid ,
        	t_base_item.ischeck,
        	t_base_item.itemcls ,
        	t_base_item.youtput ,
        	t_base_item.lastoutput,
        	t_base_item.existdemand ,
        	t_base_item.makingnums  ,
        	t_base_item.forecast ,
        	t_base_item.checkednum ,
        	t_base_item.unchecknum ,
        	t_base_item.sumdemand ,
        	t_base_item.responsible ,
        	t_base_item.supplierid ,
        	t_base_item.fissnmanager  ,
        	t_base_item.topicid ,
        	t_base_item.f_101 ,
        	t_base_item.f_106 ,
        	t_base_item.f_108 ,
        	t_base_item.f_119 ,
        	t_base_item.f_116 ,
        	t_base_item.fchartnumber ,
        	t_base_item.f_107 ,
        	t_base_item.f_112 ,
        	t_base_item.f_113 ,
        	t_base_item.f_114 ,
        	t_base_item.f_115 ,
        	t_base_item.solutionid ,
        	t_base_item.positionid,
        	t_base_item.forderprice ,
        	t_base_item.ftaxrate ,
        	t_base_item.storage,
        	t_base_item.workinstructor,
        	t_base_item.shortnumber,
			t_base_item.flevel,
			t_base_item.pid,
        	t_base_item.itemparentcode,
        	t_base_item.fullname
	    ]]>
	</sql>
	<sql id="BaseItem.columns1">
	    <![CDATA[
        	t_base_item.baseitemid ,
        	t_base_item.itemcode ,
        	t_base_item.itemname ,
        	t_base_item.formatno ,
        	t_base_item.createdate ,
        	t_base_item.wfstatus ,
        	t_base_item.fitemid ,
        	t_base_item.picpath ,
        	t_base_item.adminid ,
        	t_base_item.auditor ,
        	t_base_item.verifier ,
        	t_base_item.usestatus ,
        	t_base_item.itemproperty ,
        	t_base_item.finishstatus ,
        	t_base_item.cycleid ,
        	t_base_item.fsaleprice ,
        	t_base_item.taxrate ,
        	t_base_item.unitid ,
        	t_base_item.unitname ,
        	t_base_item.fqtymin ,
        	t_base_item.secinv ,
        	t_base_item.seriescode ,
        	t_base_item.isdeduct ,
        	t_base_item.refercost ,
        	t_base_item.buytime ,
        	t_base_item.maketime ,
        	t_base_item.isbatch ,
        	t_base_item.isbarcode,
        	t_base_item.categoryid ,
        	t_base_item.ischeck,
        	t_base_item.itemcls ,
        	t_base_item.youtput ,
        	t_base_item.lastoutput,
        	t_base_item.existdemand ,
        	t_base_item.makingnums  ,
        	t_base_item.forecast ,
        	t_base_item.checkednum ,
        	t_base_item.unchecknum ,
        	t_base_item.sumdemand ,
        	t_base_item.responsible ,
        	t_base_item.supplierid ,
        	t_base_item.fissnmanager  ,
        	t_base_item.topicid ,
        	t_base_item.f_101 ,
        	t_base_item.f_106 ,
        	t_base_item.f_108 ,
        	t_base_item.f_119 ,
        	t_base_item.f_116 ,
        	t_base_item.fchartnumber ,
        	t_base_item.f_107 ,
        	t_base_item.f_112 ,
        	t_base_item.f_113 ,
        	t_base_item.f_114 ,
        	t_base_item.f_115 ,
        	t_base_item.solutionid ,
        	t_base_item.positionid,
        	t_base_item.forderprice ,
        	t_base_item.ftaxrate ,
        	t_base_item.storage,
        	t_base_item.workinstructor,
        	t_base_item.shortnumber,
			t_base_item.flevel,
			t_base_item.pid,
        	t_base_item.itemparentcode,
        	t_base_item.fullname,
        	t_base_item.f_102
	    ]]>
	</sql>
	<sql id="BaseItem.columnsv">
	    <![CDATA[
        	v_base_item_ptree.baseitemid,
      v_base_item_ptree.itemcode,
      v_base_item_ptree.itemname,
      v_base_item_ptree.itemclass,
      v_base_item_ptree.itemparentcode,
      v_base_item_ptree.shortNumber,
      v_base_item_ptree.deleted,
      v_base_item_ptree.detail,
      v_base_item_ptree.pid,
      v_base_item_ptree.flevel
	    ]]>
	</sql>
	<!-- 向原表中插入 -->
    <insert id="ItemBasic.insertfromk3syncdetail" >
    
         INSERT INTO
        	t_base_item (
        	baseitemid,
        	
        	itemcode,
        	itemname ,
        	createdate ,
        	itemparentcode ,
        	deleted,
        	detail,
        	flevel,
        	shortnumber
        	
        ) VALUES (
        	#baseitemid#,
        	
        	#itemcode#,
        	#itemname#,
        	#createdate#,
        	#itemparentcode#,
        	#deleted#,
        	#detail#,
        	#flevel#,
        	#shortnumber#
        )
    
    
    </insert>
    
    <!-- 从ERP中取出物料属性放到WEB端 -->
    <insert id="BaseItem.insert.getERPDateToWeb" >
    insert into t_base_item (baseitemid,detail,deleted,itemcode,itemparentcode,
  
  itemname,formatno,createdate,wfstatus,fitemid,fsaleprice,taxrate,unitid,unitname,itemproperty,isbatch,fissnmanager)
		select top 1 (SELECT  tNextValue  FROM [TerrenceProductionCZ].[dbo].[t_web_identity])  , 1,
		k3item.FDeleted, k3item.fnumber,
		
		LEFT(k3item.fnumber , 
  len(  k3item.fnumber ) 
  -len( LEFT( reverse(k3item.fnumber), patindex( '%.%',reverse(k3item.fnumber) )-1  ))-1
  ),
		
		k3item.fname,k3item.fmodel,getdate(),0,k3item.fitemid,fsaleprice,fimposttaxrate,funitid,unit.fname,ferpclsid ,fbatchmanager,fissnmanage
		from AIS20120813194456.dbo.t_icitem as k3item 
		,AIS20120813194456.dbo.t_measureunit unit 
		where  not exists(
		select itemcode from t_base_item where k3item.fnumber=t_base_item.itemcode
		and patindex('%.%',reverse(t_base_item.itemcode))>1
		
		) and k3item.funitid=unit.fmeasureunitid
    </insert>
    
	
	<!-- 向原表中插入 -->
    <insert id="BaseItem.insert.detail" >
         INSERT INTO
        	t_base_item (
        	   baseitemid,
		       itemcode,
		       itemname,
		       itemclass,
		       itemparentcode,
		       shortnumber,
		       deleted,
		       detail,
		       pid,
		       flevel
        	
        ) VALUES (
               #baseitemid#,
		       #itemcode#,
		       #itemname#,
		       #itemclass#,
		       #itemparentcode#,
		       #shortnumber#,
		       #deleted#,
		       #detail#,
		       #pid#,
		       #flevel#
        )
    </insert>
	
	
   <insert id="BaseItem.insert" >
    <![CDATA[
        INSERT INTO
        t_base_item (
        	itemcode ,
        	itemname ,
        	formatno ,
        	createdate ,
        	wfstatus ,
        	fitemid,
        	finishstatus ,
        	existdemand ,
        	makingnums 
        ) VALUES (
        	#itemcode# ,
        	#itemname# ,
        	#formatno# ,
        	#createdate# ,
        	#wfstatus# ,
        	#fitemid#,
        	0,0,0
        )
    ]]> 
    <!--
    mysql:		type="post" SELECT  select last_insert_id()
    sqlserver:	type="post" SELECT  @@identity  AS  ID
    oracle:		type="pre" 	SELECT  sequenceName.nextval AS ID FROM DUAL
    DB2:		type="pre"	values nextval for sequenceName
    -->
        <selectKey resultClass="java.lang.Long" type="post" keyProperty="baseitemid" >
            SELECT  @@identity  AS  ID
        </selectKey>
    </insert>
    <insert id="BaseItem.sync.item">
    insert into t_base_item (itemcode,itemname,formatno,createdate,wfstatus,fitemid,fsaleprice,taxrate,unitid,unitname,itemproperty,itemcls,
	youtput,lastoutput,secinv,cycleid)
	select k3item.fnumber,k3item.fname,k3item.fmodel,getdate(),0,k3item.fitemid,fsaleprice,fimposttaxrate,funitid,unit.fname,ferpclsid,1,0,0,0,5
	 from AIS20120813194456.dbo.t_icitem as k3item,AIS20120813194456.dbo.t_measureunit unit  where k3item.fnumber in(
	select distinct itemcode from t_valid_item ) and k3item.funitid=unit.fmeasureunitid
	and not exists(select * from t_base_item where t_base_item.itemcode=k3item.fnumber)
    </insert>
    
     <update id="BaseItem.save.Solution" parameterClass="com.terrence.crm.dol.bean.BaseItem"><!-- 2013/10/29产品方案绑定 -->
    	UPDATE t_base_item set solutionid = #solutionid# where itemcode=#itemcode#;
    </update>
    <!-- 排产中跟新目录树,如果有孩子,孩子的父级代码,及自己代码的父级代码也将被更新, -->
    <update id="BaseItem.itemchildcode" parameterClass="com.terrence.crm.dol.bean.BaseItem">
    	update t_base_item 
        set itemcode=replace (itemcode,itemparentcode+'.',#itemparentcode#+'.' ),itemparentcode=#itemparentcode#
           where itemparentcode=#olditemparentcode#;
    </update>
    <!-- K3中跟新目录树,如果有孩子,孩子的父级代码,及自己代码的父级代码也将被更新, -->
    <update id="BaseItem.k3itemchildcode" parameterClass="com.terrence.crm.dol.bean.BaseItem">
        
    </update>
    
 	<update id="BaseItem.update.category" parameterClass="com.terrence.crm.dol.bean.BaseItem">
    	UPDATE t_base_item set categoryid = #categoryid# where baseitemid in ($ids$);
    </update>
    <update id="BaseItem.update.category.release" parameterClass="com.terrence.crm.dol.bean.BaseItem">
    	UPDATE t_base_item set categoryid = null where  baseitemid in ($ids$);
    </update>
	<update id="BaseItem.update" parameterClass="com.terrence.crm.dol.bean.BaseItem">         
        UPDATE t_base_item 
        <dynamic prepend="SET">
	        <isNotEmpty prepend="," property="itemcode">
	        	itemcode = #itemcode# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="itemname">
	        	itemname = #itemname# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="itemparentcode">
	        	itemparentcode = #itemparentcode# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="formatno">
	        	formatno = #formatno# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="createdate">
	        	createdate = #createdate# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="wfstatus">
	        	wfstatus = #wfstatus# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="fitemid">
	        	fitemid = #fitemid# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="picpath">
	        	picpath = #picpath# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="adminid">
	        	adminid = #adminid# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="auditor">
	        	auditor = #auditor# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="verifier">
	        	verifier = #verifier# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="usestatus">
	        	usestatus = #usestatus# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="itemproperty">
	        	itemproperty = #itemproperty# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="finishstatus">
	        	finishstatus = #finishstatus# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="cycleid">
	        	cycleid = #cycleid# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="fsaleprice">
	        	fsaleprice = #fsaleprice# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="taxrate">
	        	taxrate = #taxrate# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="unitid">
	        	unitid = #unitid# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="unitname">
	        	unitname = #unitname# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="fqtymin">
	        	fqtymin = #fqtymin# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="secinv">
	        	secinv = #secinv# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="seriescode">
	        	seriescode = #seriescode# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="isdeduct">
	        	isdeduct = #isdeduct# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="refercost">
	        	refercost = #refercost# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="buytime">
	        	buytime = #buytime# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="maketime">
	        	maketime = #maketime# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="isbatch">
	        	isbatch = #isbatch# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="isbarcode">
	        	isbarcode = #isbarcode# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="categoryid">
	        	categoryid = #categoryid# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="ischeck">
	        	ischeck = #ischeck# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="itemcls">
	        	itemcls = #itemcls# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="youtput">
	        	youtput = #youtput# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="lastoutput">
	        	lastoutput = #lastoutput# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="existdemand">
	        	existdemand = #existdemand# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="makingnums">
	        	makingnums = #makingnums# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="forecast">
	        	forecast = #forecast# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="checkednum">
	        	checkednum = #checkednum# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="unchecknum">
	        	unchecknum = #unchecknum# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="sumdemand">
	        	sumdemand = #sumdemand# 
	        </isNotEmpty>
	         <isNotEmpty prepend="," property="responsible">
	        	responsible = #responsible# 
	        </isNotEmpty>
	         <isNotEmpty prepend="," property="supplierid">
	        	supplierid = #supplierid# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="fissnmanager">
	        	fissnmanager = #fissnmanager# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="topicid">
	        	topicid = #topicid# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="f101">
	        	f_101 = #f101# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="f106">
	        	f_106 = #f106# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="f108">
	        	f_108 = #f108# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="f119">
	        	f_119 = #f119# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="f116">
	        	f_116 = #f116# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="fchartnumber">
	        	fchartnumber = #fchartnumber# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="f107">
	        	f_107 = #f107# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="f112">
	        	f_112 = #f112# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="f113">
	        	f_113 = #f113# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="f114">
	        	f_114 = #f114# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="f115">
	        	f_115 = #f115# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="solutionid">
	        	solutionid = #solutionid# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="positionid">
	        	positionid = #positionid# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="issize">
	        	issize = #issize# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="itemclass">
	        	itemclass=#itemclass#
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="forderprice">
	        	forderprice = #forderprice# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="ftaxrate">
	        	ftaxrate = #ftaxrate# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="workinstructor">
	        	workinstructor = #workinstructor# 
	        </isNotEmpty>
	         <isNotEmpty prepend="," property="checktab">
	        	checktab = #checktab# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="rpid">
	        	rpid = #rpid# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="deleted">
	        	deleted = #deleted# 
	        </isNotEmpty>
	        
	        <isNotEmpty prepend="," property="installdiagram">
	        	installdiagram = #installdiagram# 
	        </isNotEmpty>
	        
	        <isNotEmpty prepend="," property="maintainpartdiagram">
	        	maintainpartdiagram = #maintainpartdiagram# 
	        </isNotEmpty>
	          <isNotEmpty prepend="," property="existdemand4">
	        	existdemand4 = #existdemand4# 
	        </isNotEmpty>
	         <isNotEmpty prepend="," property="makingnums4">
	        	makingnums4 = #makingnums4# 
	        </isNotEmpty>
	         <isNotEmpty prepend="," property="checkednum4">
	        	checkednum4 = #checkednum4# 
	        </isNotEmpty>
	         <isNotEmpty prepend="," property="unchecknum4">
	        	unchecknum4 = #unchecknum4# 
	        </isNotEmpty>
	         <isNotEmpty prepend="," property="sumdemand4">
	        	sumdemand4 = #sumdemand4# 
	        </isNotEmpty>
	         <isNotEmpty prepend="," property="planfqty">
	        	planfqty = #planfqty# 
	        </isNotEmpty>
	         <isNotEmpty prepend="," property="planfqty4">
	        	planfqty4 = #planfqty4# 
	        </isNotEmpty>
	    </dynamic>
        WHERE 
	        baseitemid = #baseitemid# 
    </update>
    
    <!-- 假删除 -->
    <update id="BaseItem.updateMultiple" parameterClass="com.terrence.crm.dol.bean.BaseItem" >
        UPDATE t_base_item
        <dynamic prepend="SET">
	        <isNotEmpty prepend="," property="deleted">
	        	deleted = #deleted# 
	        </isNotEmpty>
     	</dynamic>
        WHERE
        baseitemid in ($ids$) 
    </update>
    
    
    
    <!-- 2013-8-10 批量修改-->
    <update id="BaseItem.update.updateById" parameterClass="com.terrence.crm.dol.bean.BaseItem">         
        UPDATE t_base_item 
        <dynamic prepend="SET">
        	<isNotEmpty prepend="," property="responsible">
	        	responsible = #responsible# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="supplierid">
	        	supplierid = #supplierid# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="topicid">
	        	topicid = #topicid# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="fissnmanager">
	        	fissnmanager = #fissnmanager# 
	        </isNotEmpty>
	         <isNotEmpty prepend="," property="isbatch">
	        	isbatch = #isbatch# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="itemlevel">
	        	itemlevel = #itemlevel# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="rpid">
	        	rpid = #rpid# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="deleted">
	        	deleted = #deleted# 
	        </isNotEmpty>
	          <isNotEmpty prepend="," property="deptid">
	        	 deptid= #deptid# 
	        </isNotEmpty>
	         <isNotEmpty prepend="," property="storage">
	        	 storage= #storage# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="itemproperty">
	        	 itemproperty= #itemproperty# 
	        </isNotEmpty>
     	</dynamic>
     	WHERE
     		baseitemid in ($ids$)
     </update>
     
     
       <!-- 修改订单价格和税率-->
    <update id="BaseItem.update.Ftax.in.poorderentry" parameterClass="com.terrence.crm.dol.bean.BaseItem">         
        UPDATE t_base_item 
        <dynamic prepend="SET">
        	<isNotEmpty prepend="," property="forderprice">
	        	forderprice = #forderprice# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="ftaxrate">
	        	ftaxrate = #ftaxrate# 
	        </isNotEmpty>
     	</dynamic>
     	WHERE
     		itemcode = #itemcode#
     </update>
     
     
      <update id="BaseItem.update.updateBaseItemById" parameterClass="com.terrence.crm.dol.bean.BaseItem">         
        UPDATE t_base_item 
        <dynamic prepend="SET">
        	<isNotEmpty prepend="," property="responsible">
	        	responsible = #responsible# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="supplierid">
	        	supplierid = #supplierid# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="topicid">
	        	topicid = #topicid# 
	        </isNotEmpty>
	          <isNotEmpty prepend="," property="itemclass">
	        	itemclass = #itemclass# 
	        </isNotEmpty>
	          <isNotEmpty prepend="," property="buytime">
	        	buytime = #buytime# 
	        </isNotEmpty>
     	</dynamic>
     	WHERE
     		baseitemid in ($ids$)
     </update>
    <update id="BaseItem.update.finspectionlevel" parameterClass="com.terrence.crm.dol.bean.BaseItem">
    	UPDATE t_ICItemQuality
    		<dynamic prepend="SET">
        	<isNotEmpty prepend="," property="finspectionlevel">
	        	finspectionlevel = #finspectionlevel# 
	        </isNotEmpty>
     	</dynamic>
    	WHERE
     		baseitemid in ($ids$)
    </update>
    
    
    <update id="BaseItem.update.data.to.guide" parameterClass="com.terrence.crm.dol.bean.BaseItem"><!-- 装配记录绑定 -->
    	UPDATE t_base_item
    		set guideid = #guideid#,guideis=#guideis#
    	WHERE
     		baseitemid in ($baseitemids$)
    </update>
    
       <update id="BaseItem.update.for.the.rpid" parameterClass="com.terrence.crm.dol.bean.BaseItem"><!-- 出厂报告套式绑定 -->
    	UPDATE t_base_item
    		set rpid=#rpid#
    	WHERE
     		baseitemid in ($baseitemids$)
    </update>
    
    
     <update id="BaseItem.update.craftid.or.assembkyid" parameterClass="com.terrence.crm.dol.bean.BaseItem"><!-- 检测、装配工艺规程绑定 -->
    	UPDATE t_base_item
    		set 
    		 <isNotEmpty property="craftid">
	        	craftid = #craftid# ,t_base_item.crfis = #crfis# 
	        </isNotEmpty>
	          <isNotEmpty  property="assembkyid">
	        	assembkyid = #assembkyid# ,t_base_item.assis = #assis# 
	        </isNotEmpty>
    	WHERE
     		baseitemid =#baseitemid#
     		
    </update>
    
    <update id="BaseItem.update.for.assis.crfis" parameterClass="com.terrence.crm.dol.bean.BaseItem"><!-- 检测、装配工艺规程状态修改 -->
    	UPDATE t_base_item
    		set 
    		 <isNotEmpty property="crfis">
	        	t_base_item.crfis = #crfis# 
	        </isNotEmpty>
	          <isNotEmpty  property="assis">
	        	t_base_item.assis = #assis# 
	        </isNotEmpty>
    	WHERE
     		itemcode =#itemcode#
     		
    </update>
    
    <select id="BaseItem.count.finspectionlevel" resultClass="long">
    	<![CDATA[
        select 
        count(*)
        from t_ICItemQuality WHERE
     		baseitemid in ($ids$)
    ]]>
    </select>
    <!-- 更新物料代码 -->
    <update id="BaseItem.updateByItemcode" parameterClass="com.terrence.crm.dol.bean.BaseItem">         
        UPDATE t_base_item 
        <dynamic prepend="SET">
            <isNotEmpty prepend="," property="itemname">
	        	itemname = #itemname# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="itemcode">
	        	itemcode = #itemcode# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="detail">
	        	detail = #detail# 
	        </isNotEmpty>
	    </dynamic>
	   WHERE 
	        itemcode = #foldnumber# 
    </update>
    <update id="BaseItem.update.ByItemcode" parameterClass="com.terrence.crm.dol.bean.BaseItem">         
        UPDATE t_base_item 
        <dynamic prepend="SET">
	        <isNotEmpty prepend="," property="itemcode">
	        	itemcode = #itemcode# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="itemname">
	        	itemname = #itemname# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="formatno">
	        	formatno = #formatno# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="createdate">
	        	createdate = #createdate# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="wfstatus">
	        	wfstatus = #wfstatus# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="fitemid">
	        	fitemid = #fitemid# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="picpath">
	        	picpath = #picpath# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="adminid">
	        	adminid = #adminid# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="auditor">
	        	auditor = #auditor# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="verifier">
	        	verifier = #verifier# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="usestatus">
	        	usestatus = #usestatus# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="itemproperty">
	        	itemproperty = #itemproperty# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="finishstatus">
	        	finishstatus = #finishstatus# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="cycleid">
	        	cycleid = #cycleid# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="fsaleprice">
	        	fsaleprice = #fsaleprice# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="taxrate">
	        	taxrate = #taxrate# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="unitid">
	        	unitid = #unitid# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="unitname">
	        	unitname = #unitname# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="fqtymin">
	        	fqtymin = #fqtymin# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="secinv">
	        	secinv = #secinv# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="seriescode">
	        	seriescode = #seriescode# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="isdeduct">
	        	isdeduct = #isdeduct# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="refercost">
	        	refercost = #refercost# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="buytime">
	        	buytime = #buytime# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="maketime">
	        	maketime = #maketime# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="isbatch">
	        	isbatch = #isbatch# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="isbarcode">
	        	isbarcode = #isbarcode# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="categoryid">
	        	categoryid = #categoryid# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="ischeck">
	        	ischeck = #ischeck# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="itemcls">
	        	itemcls = #itemcls# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="youtput">
	        	youtput = #youtput# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="lastoutput">
	        	lastoutput = #lastoutput# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="existdemand">
	        	existdemand = #existdemand# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="makingnums">
	        	makingnums = #makingnums# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="fissnmanager">
	        	fissnmanager = #fissnmanager# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="topicid">
	        	topicid = #topicid# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="f101">
	        	f_101 = #f101# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="f106">
	        	f_106 = #f106# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="f108">
	        	f_108 = #f108# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="f119">
	        	f_119 = #f119# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="f116">
	        	f_116 = #f116# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="fchartnumber">
	        	fchartnumber = #fchartnumber# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="f107">
	        	f_107 = #f107# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="f112">
	        	f_112 = #f112# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="f113">
	        	f_113 = #f113# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="f114">
	        	f_114 = #f114# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="f115">
	        	f_115 = #f115# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="solutionid">
	        	solutionid = #solutionid# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="positionid">
	        	positionid = #positionid# 
	        </isNotEmpty>
	         <isNotEmpty prepend="," property="issize">
	        	issize = #issize# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="itemclass">
	        	itemclass=#itemclass#
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="forderprice">
	        	forderprice = #forderprice# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="ftaxrate">
	        	ftaxrate = #ftaxrate# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="workinstructor">
	        	workinstructor = #workinstructor# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="bomStatus">
	        	bomstatus = #bomStatus# 
	        </isNotEmpty>
	    </dynamic>
        WHERE 
	        itemcode = #itemcode# 
    </update>
    <update id="BaseItem.updateBaseItemName">
    	update t_base_item set t_base_item.itemname=k3.FName 
 			from AIS20120813194456.dbo.t_icitem k3 
 				where t_base_item.itemcode=k3.FNumber
 				and k3.FName!= t_base_item.itemname
    </update>
    <!-- 新增计划计算  开始-->
    <update id="BaseItem.update.Checkednum.Clear">
	    update t_base_item set checkednum=0 where not exists (select * from(select sum(plannum) num ,itemcode from t_prod_plan_detail where property=0 and status=1 group by itemcode) ys
		where t_base_item.itemcode=ys.itemcode)
    </update>
    <update id="BaseItem.update.Checkednum">
	    update t_base_item set checkednum=ys.num from (select sum(plannum) num ,itemcode from t_prod_plan_detail where property=0 and status=1 group by itemcode) ys
		where t_base_item.itemcode=ys.itemcode
    </update>
    <update id="BaseItem.update.Unchecknum.Clear">
    update t_base_item set unchecknum=0 where not exists(select * from(select sum(plannum) num ,itemcode from t_prod_plan_detail 
	where property=0 and status=0 group by itemcode) ys where t_base_item.itemcode=ys.itemcode)
    </update>
    <update id="BaseItem.update.Unchecknum">
	    update t_base_item set unchecknum=ys.num from (select sum(plannum) num ,itemcode from t_prod_plan_detail where property=0 and status=0 group by itemcode) ys
		where t_base_item.itemcode=ys.itemcode
    </update>
    <update id="BaseItem.update.Existdemand">
	    update t_base_item set existdemand=ys.num from (select sum(amount) num,itemcode from t_orders_product,t_order where checkstatus=1 and t_orders_product.orderid=t_order.id group by itemcode) ys
		where t_base_item.itemcode=ys.itemcode
    </update>
    <update id="BaseItem.update.Forecast">
	    update t_base_item set forecast=0 where t_base_item.categoryid is not null
    </update>
    <update id="Baseitem.update.Makingnum.init">
    	update t_base_item set makingnums=0
    </update>
    <update id="Baseitem.update.Makingnum">
    	update t_base_item set makingnums=icmo.fqty from (select sum(fqty) fqty,itemcode from t_icmo where performstatus in(0,1,2) and isdel=0 group by itemcode) icmo
		where t_base_item.itemcode=icmo.itemcode
    </update>
    
   <!--方案绑定 --> 
     <update id="BaseItem.update.BaseItemBangById" parameterClass="com.terrence.crm.dol.bean.BaseItem">         
        UPDATE t_base_item 
        <dynamic prepend="SET">
        	<isNotEmpty prepend="," property="topicid">
	        	topicid = #topicid# 
	        </isNotEmpty>
	       
     	</dynamic>
     	WHERE
     		baseitemid in ($ids$)
     </update>
     
    <!-- 仓库绑定物料 --> 
     <update id="BaseItem.update.BaseItemBindPosition" parameterClass="com.terrence.crm.dol.bean.BaseItem">         
        UPDATE t_base_item 
        <dynamic prepend="SET">
        	<isNotEmpty prepend="," property="storage">
	        	storage = #storage# 
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="deptid">
	        	deptid = #deptid# 
	        </isNotEmpty>
     	</dynamic>
     	WHERE
     		baseitemid in ($allupdateid$)
     </update>
     
      <update id="BaseItem.update.data.fsaleprice" parameterClass="com.terrence.crm.dol.bean.BaseItem"><!-- 销售出库单更新销售价格 -->
    	UPDATE t_base_item set fsaleprice = #fsaleprice# where  itemcode = #itemcode#;
    </update>
     <!--{call BaseItemSyncData()}-->
     <procedure id="BaseItemSyncData">
     		{call BaseItemSyncData()}
     </procedure>
     <procedure id="BaseItemSyncData2">
     		{call BaseItemSyncData2()}
     </procedure>
    <!-- 新增计划计算  结束-->
	<delete id="BaseItem.delete" parameterClass="java.lang.Long">
    <![CDATA[
        delete from t_base_item where
       baseitemid = #baseitemid# 
    ]]>
    </delete>
    
    <delete id="BaseItem.deleteMultiple">
    <![CDATA[
        DELETE FROM 
        	t_base_item 
        WHERE
       baseitemid in ($baseitemid$) 
    ]]>
    </delete>
    
     
    
    <select id="BaseItem.getById" resultMap="RM.BaseItem.Detail">
	    select <include refid="BaseItem.columns"/>
	    
	        from t_base_item 
	        where 
		        baseitemid = #baseitemid# 
	    
    </select>
    <!-- ssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss -->
	<select id="BaseItem.getByProperty" resultMap="RM.BaseItem.includeAdminName">
		select <include refid="BaseItem.columns"/> ,t_base_item.checktab
			,t_admin.adminName ,c.adminName checkname,t.adminName responsibleName,
			t_topic.topicname,t_supplier.fname,t_ICItemQuality.finspectionlevel as finspectionlevel
			,t_report_package.fname rpname,t_report_package.pid rpid, t_base_item.f_102
		from t_base_item left join t_admin 
			on t_base_item.adminid=t_admin.adminId
			left join t_admin c on
			 t_base_item.auditor=c.adminId
			left join t_admin t on
			 t_base_item.responsible=t.adminId
			 left join t_topic on
			 t_base_item.topicid=t_topic.topicid
			 left join t_supplier on
			 t_base_item.supplierid = t_supplier.supplierid
			left join t_ICItemQuality
       	on t_base_item.baseitemid= t_ICItemQuality.baseitemid
       	left join t_report_package on t_base_item.rpid = t_report_package.pid 	
		 where $propertyName$=#propertyValue#
	</select>
	
	
	
	<select id="BaseItem.getByItemCode" resultMap="RM.BaseItem.Inventory.Cycle">
		select <include refid="BaseItem.columns"/>,t_inventory_batch.fqty,t_inventory_batch.fqty2,t_process_cycle.cyclename
		,t_process_cycle.ratio from t_base_item left join (select itemcode,sum(fqty) fqty,sum(fqty2) fqty2 from t_inventory_batch group by itemcode) t_inventory_batch
		 on t_base_item.itemcode=t_inventory_batch.itemcode 
		left join t_process_cycle on t_base_item.cycleid=t_process_cycle.cycleid
		where t_base_item.itemcode=#itemcode#
	</select>
	<select id="BaseItem.getByItemCodeSingle" resultMap="RM.BaseItem">
		select <include refid="BaseItem.columns"/> from t_base_item 
		where t_base_item.itemcode=#itemcode#
	</select>
	<sql id="BaseItem.findItemPage.where">
	    <dynamic prepend="WHERE">
			<isNotEmpty prepend="AND" property="baseitemid">
	             t_base_item.baseitemid = #baseitemid#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="itemcode">
	             t_base_item.itemcode = #itemcode# 
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="itemparentcode">	             
	             t_base_item.itemparentcode like ('$itemparentcode$%') 
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="itemname">
	             t_base_item.itemname like ('%$itemname$%') 
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="formatno">
	             t_base_item.formatno = #formatno#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="createdateBegin">
	             t_base_item.createdate &gt;= #createdateBegin#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="createdateEnd">
	             t_base_item.createdate &lt;= #createdateEnd#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="wfstatus">
	             t_base_item.wfstatus = #wfstatus#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="fitemid">
	             t_base_item.fitemid = #fitemid#
	       </isNotEmpty>
	       <isNotEmpty prepend="And" property="picpath">
	        	picpath = #picpath# 
	        </isNotEmpty>
	        <isNotEmpty prepend="AND" property="adminid">
	             t_base_item.adminid = #adminid#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="auditor">
	             t_base_item.auditor = #auditor#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="verifier">
	             t_base_item.verifier = #verifier#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="usestatus">
	             t_base_item.usestatus = #usestatus#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="itemproperty">
	             t_base_item.itemproperty = #itemproperty#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="finishstatus">
	             t_base_item.finishstatus = #finishstatus#
	       </isNotEmpty>
	        <isNotEmpty prepend="AND" property="parentcode">
	       		t_order_bom.parentcode like ('%$parentcode$%')
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="cycleid">
	             t_base_item.cycleid = #cycleid#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="fsaleprice">
	             t_base_item.fsaleprice = #fsaleprice#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="taxrate">
	             t_base_item.taxrate = #taxrate#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="unitid">
	             t_base_item.unitid = #unitid#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="unitname">
	             t_base_item.unitname = #unitname#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="fqtymin">
	             t_base_item.fqtymin = #fqtymin#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="secinv">
	             t_base_item.secinv = #secinv#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="seriescode">
	             t_base_item.seriescode = #seriescode#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="isdeduct">
	             t_base_item.isdeduct = #isdeduct#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="refercost">
	             t_base_item.refercost = #refercost#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="buytime">
	             t_base_item.buytime = #buytime#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="maketime">
	             t_base_item.maketime = #maketime#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="isbatch">
	             t_base_item.isbatch = #isbatch#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="isbarcode">
	             t_base_item.isbarcode = #isbarcode#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="categoryid">
	             t_base_item.categoryid = #categoryid#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="categoryids">
	       	t_base_item.categoryid in ($categoryids$)
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="categorynull">
	             t_base_item.categoryid is null
	       </isNotEmpty>
	       <isNotEmpty prepend="and" property="categroynotnull">
	       		t_base_item.categoryid is not null
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="ischeck">
	             t_base_item.ischeck = #ischeck#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="itemcls">
	             t_base_item.itemcls = #itemcls#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="youtput">
	             t_base_item.youtput = #youtput#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="lastoutput">
	             t_base_item.lastoutput = #lastoutput#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="existdemand">
	             t_base_item.existdemand = #existdemand#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="makingnums">
	             t_base_item.makingnums = #makingnums#
	       </isNotEmpty>
	        <isNotEmpty prepend="AND" property="checkedIdList">		
	             t_base_item.baseitemid in         
		             <iterate property="checkedIdList" open="(" close=")" conjunction=",">
		             	 '$checkedIdList[]$'
					</iterate> 
		   </isNotEmpty>
		   <isNotEmpty prepend="AND" property="fissnmanager">
	             t_base_item.fissnmanager = #fissnmanager#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="topicid">
	             t_base_item.topicid = #topicid#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="f101">
	             t_base_item.f_101 = #f101#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="f106">
	             t_base_item.f_106 = #f106#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="f108">
	             t_base_item.f_108 = #f108#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="f119">
	             t_base_item.f_119 = #f119#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="f116">
	             t_base_item.f_116 = #f116#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="fchartnumber">
	             t_base_item.fchartnumber = #fchartnumber#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="f107">
	             t_base_item.f_107 = #f107#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="f112">
	             t_base_item.f_112 = #f112#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="f113">
	             t_base_item.f_113 = #f113#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="f114">
	             t_base_item.f_114 = #f114#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="f115">
	             t_base_item.f_115 = #f115#
	       </isNotEmpty>
	        <isNotEmpty prepend="AND" property="responsible">
	             t_base_item.responsible = #responsible#
	       </isNotEmpty>
	        <isNotEmpty prepend="AND" property="supplierid">
	             t_base_item.supplierid = #supplierid#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="solutionid">
	             t_base_item.solutionid = #solutionid#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="positionid">
	        	t_base_item.positionid = #positionid# 
	        </isNotEmpty>
	        <isNotEmpty prepend="AND" property="issize">
	       		t_base_item.issize=#issize#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="topicids">
	       	t_base_item.topicid $topicids$
	       </isNotEmpty>
	       <isNotEmpty prepend="and" property="itemprefix">
		        <iterate property="itemprefix" open="(" close=")" conjunction="or">
		             	t_base_item.itemcode like '$itemprefix[]$%'
				</iterate> 
	       </isNotEmpty>
	       <isNotEmpty prepend="and" property="itemclass">
	        	t_base_item.itemclass=#itemclass#
	        </isNotEmpty>
	        <isNotEmpty prepend="and" property="issolution">
			t_base_item.solutionid $issolution$
		</isNotEmpty>
		 <isNotEmpty prepend="AND" property="solutionids">
	       	t_base_item.solutionid $solutionids$
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="forderprice">
	             t_base_item.forderprice = #forderprice#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="ftaxrate">
	             t_base_item.ftaxrate = #ftaxrate#
	       </isNotEmpty>
			<isNotEmpty prepend="AND" property="finspectionlevel">
	             t_ICItemQuality.finspectionlevel = #finspectionlevel#
	       </isNotEmpty>
	        <isNotEmpty prepend="AND" property="workinstructor">
	        	t_base_item.workinstructor = #workinstructor# 
	        </isNotEmpty>
	        <isNotEmpty prepend="AND" property="fbomisuse">
	        	t_base_item.fbomisuse = #fbomisuse# 
	        </isNotEmpty>
	        
	         <isNotEmpty prepend="AND" property="fbomis">
	        	t_base_item.fbomisuse $fbomis$
	        </isNotEmpty>
	         <isNotEmpty prepend="AND" property="bomStatus">
	        	t_base_item.bomstatus = #bomStatus#
	        </isNotEmpty>
	        <isNotEmpty prepend="AND" property="itemlevel">
	        	t_base_item.itemlevel = #itemlevel#
	        </isNotEmpty>
	        
	        <isNotEmpty prepend="AND" property="deleted">
	        	 t_base_item.deleted = #deleted#
	        </isNotEmpty>
	        
	        <isNotEmpty prepend="AND" property="detail">
	        	 t_base_item.detail = #detail#
	        </isNotEmpty>
	        
	        <isNotEmpty prepend="AND" property="flevel">
	        	 t_base_item.flevel = #flevel#
	        </isNotEmpty>
	        
	        <isNotEmpty prepend="AND" property="pid">
	        	 t_base_item.pid = #pid#
	        </isNotEmpty>
	        
	    </dynamic>	
	</sql>
	<sql id="BaseItem.findPage.where">
	    <dynamic prepend="WHERE">
			<isNotEmpty prepend="AND" property="baseitemid">
	             t_base_item.baseitemid = #baseitemid#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="itemcode">
	             t_base_item.itemcode like ('%$itemcode$%') 
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="itemparentcode">	             
	             t_base_item.itemparentcode like ('$itemparentcode$%') 
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="itemname">
	             t_base_item.itemname like ('%$itemname$%') 
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="formatno">
	             t_base_item.formatno = #formatno#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="createdateBegin">
	             t_base_item.createdate &gt;= #createdateBegin#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="createdateEnd">
	             t_base_item.createdate &lt;= #createdateEnd#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="wfstatus">
	             t_base_item.wfstatus = #wfstatus#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="fitemid">
	             t_base_item.fitemid = #fitemid#
	       </isNotEmpty>
	       <isNotEmpty prepend="And" property="picpath">
	        	picpath = #picpath# 
	        </isNotEmpty>
	        <isNotEmpty prepend="AND" property="adminid">
	             t_base_item.adminid = #adminid#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="auditor">
	             t_base_item.auditor = #auditor#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="verifier">
	             t_base_item.verifier = #verifier#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="usestatus">
	             t_base_item.usestatus = #usestatus#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="itemproperty">
	             t_base_item.itemproperty = #itemproperty#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="finishstatus">
	             t_base_item.finishstatus = #finishstatus#
	       </isNotEmpty>
	        <isNotEmpty prepend="AND" property="parentcode">
	       		t_order_bom.parentcode like ('%$parentcode$%')
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="cycleid">
	             t_base_item.cycleid = #cycleid#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="fsaleprice">
	             t_base_item.fsaleprice = #fsaleprice#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="taxrate">
	             t_base_item.taxrate = #taxrate#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="unitid">
	             t_base_item.unitid = #unitid#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="unitname">
	             t_base_item.unitname = #unitname#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="fqtymin">
	             t_base_item.fqtymin = #fqtymin#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="secinv">
	             t_base_item.secinv = #secinv#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="seriescode">
	             t_base_item.seriescode = #seriescode#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="isdeduct">
	             t_base_item.isdeduct = #isdeduct#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="refercost">
	             t_base_item.refercost = #refercost#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="buytime">
	             t_base_item.buytime = #buytime#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="maketime">
	             t_base_item.maketime = #maketime#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="isbatch">
	             t_base_item.isbatch = #isbatch#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="isbarcode">
	             t_base_item.isbarcode = #isbarcode#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="categoryid">
	             t_base_item.categoryid = #categoryid#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="categoryids">
	       	t_base_item.categoryid in ($categoryids$)
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="categorynull">
	             t_base_item.categoryid is null
	       </isNotEmpty>
	       <isNotEmpty prepend="and" property="categroynotnull">
	       		t_base_item.categoryid is not null
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="ischeck">
	             t_base_item.ischeck = #ischeck#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="itemcls">
	             t_base_item.itemcls = #itemcls#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="youtput">
	             t_base_item.youtput = #youtput#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="lastoutput">
	             t_base_item.lastoutput = #lastoutput#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="existdemand">
	             t_base_item.existdemand = #existdemand#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="makingnums">
	             t_base_item.makingnums = #makingnums#
	       </isNotEmpty>
	        <isNotEmpty prepend="AND" property="checkedIdList">		
	             t_base_item.baseitemid in         
		             <iterate property="checkedIdList" open="(" close=")" conjunction=",">
		             	 '$checkedIdList[]$'
					</iterate> 
		   </isNotEmpty>
		   <isNotEmpty prepend="AND" property="fissnmanager">
	             t_base_item.fissnmanager = #fissnmanager#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="topicid">
	             t_base_item.topicid = #topicid#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="f101">
	             t_base_item.f_101 = #f101#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="f106">
	             t_base_item.f_106 = #f106#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="f108">
	             t_base_item.f_108 = #f108#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="f119">
	             t_base_item.f_119 = #f119#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="f116">
	             t_base_item.f_116 = #f116#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="fchartnumber">
	             t_base_item.fchartnumber = #fchartnumber#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="f107">
	             t_base_item.f_107 = #f107#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="f112">
	             t_base_item.f_112 = #f112#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="f113">
	             t_base_item.f_113 = #f113#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="f114">
	             t_base_item.f_114 = #f114#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="f115">
	             t_base_item.f_115 = #f115#
	       </isNotEmpty>
	        <isNotEmpty prepend="AND" property="responsible">
	             t_base_item.responsible = #responsible#
	       </isNotEmpty>
	        <isNotEmpty prepend="AND" property="supplierid">
	             t_base_item.supplierid = #supplierid#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="solutionid">
	             t_base_item.solutionid = #solutionid#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="positionid">
	        	t_base_item.positionid = #positionid# 
	        </isNotEmpty>
	        <isNotEmpty prepend="AND" property="issize">
	       		t_base_item.issize=#issize#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="topicids">
	       	t_base_item.topicid $topicids$
	       </isNotEmpty>
	       <isNotEmpty prepend="and" property="itemprefix">
		        <iterate property="itemprefix" open="(" close=")" conjunction="or">
		             	t_base_item.itemcode like '$itemprefix[]$%'
				</iterate> 
	       </isNotEmpty>
	       <isNotEmpty prepend="and" property="itemclass">
	        	t_base_item.itemclass=#itemclass#
	        </isNotEmpty>
	        <isNotEmpty prepend="and" property="issolution">
			t_base_item.solutionid $issolution$
		</isNotEmpty>
		 <isNotEmpty prepend="AND" property="solutionids">
	       	t_base_item.solutionid $solutionids$
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="forderprice">
	             t_base_item.forderprice = #forderprice#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="ftaxrate">
	             t_base_item.ftaxrate = #ftaxrate#
	       </isNotEmpty>
			<isNotEmpty prepend="AND" property="finspectionlevel">
	             t_ICItemQuality.finspectionlevel = #finspectionlevel#
	       </isNotEmpty>
	        <isNotEmpty prepend="AND" property="workinstructor">
	        	t_base_item.workinstructor = #workinstructor# 
	        </isNotEmpty>
	        <isNotEmpty prepend="AND" property="fbomisuse">
	        	t_base_item.fbomisuse = #fbomisuse# 
	        </isNotEmpty>
	        
	         <isNotEmpty prepend="AND" property="fbomis">
	        	t_base_item.fbomisuse $fbomis$
	        </isNotEmpty>
	         <isNotEmpty prepend="AND" property="bomStatus">
	        	t_base_item.bomstatus = #bomStatus#
	        </isNotEmpty>
	        <isNotEmpty prepend="AND" property="itemlevel">
	        	t_base_item.itemlevel = #itemlevel#
	        </isNotEmpty>
	        
	        <isNotEmpty prepend="AND" property="deleted">
	        	 t_base_item.deleted = #deleted#
	        </isNotEmpty>
	        
	        <isNotEmpty prepend="AND" property="detail">
	        	 t_base_item.detail = #detail#
	        </isNotEmpty>
	        
	        <isNotEmpty prepend="AND" property="flevel">
	        	 t_base_item.flevel = #flevel#
	        </isNotEmpty>
	        
	        <isNotEmpty prepend="AND" property="pid">
	        	 t_base_item.pid = #pid#
	        </isNotEmpty>
	        
	    </dynamic>	
	</sql>
	
	<sql id="BaseItem.findPage.wherev">
	    <dynamic prepend="WHERE">
			<isNotEmpty prepend="AND" property="baseitemid">
	             v_base_item_ptree.baseitemid = #baseitemid#
	       </isNotEmpty>
			<isNotEmpty prepend="AND" property="itemcode">
	             v_base_item_ptree.itemcode = #itemcode#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="itemparentcode">	             
	             v_base_item_ptree.itemparentcode = #itemparentcode#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="shortnumber">	             
	             v_base_item_ptree.shortnumber = #shortnumber#
	       </isNotEmpty>
			<isNotEmpty prepend="AND" property="itemname">
	             v_base_item_ptree.itemname = #itemname#
	       </isNotEmpty>
	     
	       <isNotEmpty prepend="and" property="itemclass">
	        	v_base_item_ptree.itemclass=#itemclass#
	        </isNotEmpty>
	        <isNotEmpty prepend="AND" property="deleted">
	        	 v_base_item_ptree.deleted = #deleted#
	        </isNotEmpty>
	        
	        <isNotEmpty prepend="AND" property="detail">
	        	 v_base_item_ptree.detail = #detail#
	        </isNotEmpty>
	        <isNotEmpty prepend="AND" property="pid">
	        	 v_base_item_ptree.pid = #pid#
	        </isNotEmpty>
	        <isNotEmpty prepend="AND" property="flevel">
	        	 v_base_item_ptree.flevel = #flevel#
	        </isNotEmpty>
	        
	        
	        
	    </dynamic>	
	</sql>
	
	<sql id="BaseItem.findPage.WU.where">
	     
			<isNotEmpty prepend="AND" property="baseitemid">
	             t_base_item.baseitemid = #baseitemid#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="itemcode">
	             t_base_item.itemcode like ('%$itemcode$%') 
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="itemname">
	             t_base_item.itemname like ('%$itemname$%') 
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="formatno">
	             t_base_item.formatno = #formatno#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="createdateBegin">
	             t_base_item.createdate &gt;= #createdateBegin#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="createdateEnd">
	             t_base_item.createdate &lt;= #createdateEnd#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="wfstatus">
	             t_base_item.wfstatus = #wfstatus#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="fitemid">
	             t_base_item.fitemid = #fitemid#
	       </isNotEmpty>
	       <isNotEmpty prepend="And" property="picpath">
	        	picpath = #picpath# 
	        </isNotEmpty>
	        <isNotEmpty prepend="AND" property="adminid">
	             t_base_item.adminid = #adminid#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="auditor">
	             t_base_item.auditor = #auditor#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="verifier">
	             t_base_item.verifier = #verifier#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="usestatus">
	             t_base_item.usestatus = #usestatus#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="itemproperty">
	             t_base_item.itemproperty = #itemproperty#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="finishstatus">
	             t_base_item.finishstatus = #finishstatus#
	       </isNotEmpty>
	        <isNotEmpty prepend="AND" property="parentcode">
	       		t_bom.parentcode like ('%$parentcode$%')
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="cycleid">
	             t_base_item.cycleid = #cycleid#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="fsaleprice">
	             t_base_item.fsaleprice = #fsaleprice#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="taxrate">
	             t_base_item.taxrate = #taxrate#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="unitid">
	             t_base_item.unitid = #unitid#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="unitname">
	             t_base_item.unitname = #unitname#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="fqtymin">
	             t_base_item.fqtymin = #fqtymin#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="secinv">
	             t_base_item.secinv = #secinv#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="seriescode">
	             t_base_item.seriescode = #seriescode#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="isdeduct">
	             t_base_item.isdeduct = #isdeduct#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="refercost">
	             t_base_item.refercost = #refercost#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="buytime">
	             t_base_item.buytime = #buytime#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="maketime">
	             t_base_item.maketime = #maketime#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="isbatch">
	             t_base_item.isbatch = #isbatch#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="isbarcode">
	             t_base_item.isbarcode = #isbarcode#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="categoryid">
	             t_base_item.categoryid = #categoryid#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="categoryids">
	       	t_base_item.categoryid in ($categoryids$)
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="categorynull">
	             t_base_item.categoryid is null
	       </isNotEmpty>
	       <isNotEmpty prepend="and" property="categroynotnull">
	       		t_base_item.categoryid is not null
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="ischeck">
	             t_base_item.ischeck = #ischeck#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="itemcls">
	             t_base_item.itemcls = #itemcls#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="youtput">
	             t_base_item.youtput = #youtput#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="lastoutput">
	             t_base_item.lastoutput = #lastoutput#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="existdemand">
	             t_base_item.existdemand = #existdemand#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="makingnums">
	             t_base_item.makingnums = #makingnums#
	       </isNotEmpty>
	        <isNotEmpty prepend="AND" property="checkedIdList">		
	             t_base_item.baseitemid in         
		             <iterate property="checkedIdList" open="(" close=")" conjunction=",">
		             	 '$checkedIdList[]$'
					</iterate> 
		   </isNotEmpty>
		   <isNotEmpty prepend="AND" property="fissnmanager">
	             t_base_item.fissnmanager = #fissnmanager#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="topicid">
	             t_base_item.topicid = #topicid#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="f101">
	             t_base_item.f_101 = #f101#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="f106">
	             t_base_item.f_106 = #f106#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="f108">
	             t_base_item.f_108 = #f108#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="f119">
	             t_base_item.f_119 = #f119#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="f116">
	             t_base_item.f_116 = #f116#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="fchartnumber">
	             t_base_item.fchartnumber = #fchartnumber#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="f107">
	             t_base_item.f_107 = #f107#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="f112">
	             t_base_item.f_112 = #f112#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="f113">
	             t_base_item.f_113 = #f113#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="f114">
	             t_base_item.f_114 = #f114#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="f115">
	             t_base_item.f_115 = #f115#
	       </isNotEmpty>
	        <isNotEmpty prepend="AND" property="responsible">
	             t_base_item.responsible = #responsible#
	       </isNotEmpty>
	        <isNotEmpty prepend="AND" property="supplierid">
	             t_base_item.supplierid = #supplierid#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="solutionid">
	             t_base_item.solutionid = #solutionid#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="positionid">
	        	t_base_item.positionid = #positionid# 
	        </isNotEmpty>
	        <isNotEmpty prepend="AND" property="issize">
	       		t_base_item.issize=#issize#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="topicids">
	       	t_base_item.topicid $topicids$
	       </isNotEmpty>
	       <isNotEmpty prepend="and" property="itemprefix">
		        <iterate property="itemprefix" open="(" close=")" conjunction="or">
		             	t_base_item.itemcode like '$itemprefix[]$%'
				</iterate> 
	       </isNotEmpty>
	       <isNotEmpty prepend="and" property="itemclass">
	        	t_base_item.itemclass=#itemclass#
	        </isNotEmpty>
	    <isNotEmpty prepend="AND" property="forderprice">
	             t_base_item.forderprice = #forderprice#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="ftaxrate">
	             t_base_item.ftaxrate = #ftaxrate#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="workinstructor">
	        	t_base_item.workinstructor = #workinstructor# 
	        </isNotEmpty>
	         <isNotEmpty prepend="AND" property="fbomisuse">
	        	t_base_item.fbomisuse = #fbomisuse# 
	        </isNotEmpty>
	</sql>
	
	<sql id="BaseItem.findPage.BANG.where">
	    
			<isNotEmpty prepend="AND" property="baseitemid">
	             t_base_item.baseitemid = #baseitemid#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="itemcode">
	             t_base_item.itemcode like ('%$itemcode$%') 
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="itemname">
	             t_base_item.itemname like ('%$itemname$%') 
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="formatno">
	             t_base_item.formatno = #formatno#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="createdateBegin">
	             t_base_item.createdate &gt;= #createdateBegin#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="createdateEnd">
	             t_base_item.createdate &lt;= #createdateEnd#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="wfstatus">
	             t_base_item.wfstatus = #wfstatus#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="fitemid">
	             t_base_item.fitemid = #fitemid#
	       </isNotEmpty>
	       <isNotEmpty prepend="And" property="picpath">
	        	picpath = #picpath# 
	        </isNotEmpty>
	        <isNotEmpty prepend="AND" property="adminid">
	             t_base_item.adminid = #adminid#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="auditor">
	             t_base_item.auditor = #auditor#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="verifier">
	             t_base_item.verifier = #verifier#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="usestatus">
	             t_base_item.usestatus = #usestatus#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="itemproperty">
	             t_base_item.itemproperty = #itemproperty#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="finishstatus">
	             t_base_item.finishstatus = #finishstatus#
	       </isNotEmpty>
	        <isNotEmpty prepend="AND" property="parentcode">
	       		t_bom.parentcode like ('%$parentcode$%')
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="cycleid">
	             t_base_item.cycleid = #cycleid#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="fsaleprice">
	             t_base_item.fsaleprice = #fsaleprice#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="taxrate">
	             t_base_item.taxrate = #taxrate#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="unitid">
	             t_base_item.unitid = #unitid#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="unitname">
	             t_base_item.unitname = #unitname#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="fqtymin">
	             t_base_item.fqtymin = #fqtymin#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="secinv">
	             t_base_item.secinv = #secinv#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="seriescode">
	             t_base_item.seriescode = #seriescode#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="isdeduct">
	             t_base_item.isdeduct = #isdeduct#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="refercost">
	             t_base_item.refercost = #refercost#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="buytime">
	             t_base_item.buytime = #buytime#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="maketime">
	             t_base_item.maketime = #maketime#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="isbatch">
	             t_base_item.isbatch = #isbatch#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="isbarcode">
	             t_base_item.isbarcode = #isbarcode#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="categoryid">
	             t_base_item.categoryid = #categoryid#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="categoryids">
	       	t_base_item.categoryid in ($categoryids$)
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="categorynull">
	             t_base_item.categoryid is null
	       </isNotEmpty>
	       <isNotEmpty prepend="and" property="categroynotnull">
	       		t_base_item.categoryid is not null
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="ischeck">
	             t_base_item.ischeck = #ischeck#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="itemcls">
	             t_base_item.itemcls = #itemcls#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="youtput">
	             t_base_item.youtput = #youtput#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="lastoutput">
	             t_base_item.lastoutput = #lastoutput#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="existdemand">
	             t_base_item.existdemand = #existdemand#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="makingnums">
	             t_base_item.makingnums = #makingnums#
	       </isNotEmpty>
	        <isNotEmpty prepend="AND" property="checkedIdList">		
	             t_base_item.baseitemid in         
		             <iterate property="checkedIdList" open="(" close=")" conjunction=",">
		             	 '$checkedIdList[]$'
					</iterate> 
		   </isNotEmpty>
		   <isNotEmpty prepend="AND" property="fissnmanager">
	             t_base_item.fissnmanager = #fissnmanager#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="topicid">
	             t_base_item.topicid = #topicid#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="f101">
	             t_base_item.f_101 = #f101#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="f106">
	             t_base_item.f_106 = #f106#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="f108">
	             t_base_item.f_108 = #f108#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="f119">
	             t_base_item.f_119 = #f119#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="f116">
	             t_base_item.f_116 = #f116#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="fchartnumber">
	             t_base_item.fchartnumber = #fchartnumber#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="f107">
	             t_base_item.f_107 = #f107#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="f112">
	             t_base_item.f_112 = #f112#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="f113">
	             t_base_item.f_113 = #f113#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="f114">
	             t_base_item.f_114 = #f114#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="f115">
	             t_base_item.f_115 = #f115#
	       </isNotEmpty>
	        <isNotEmpty prepend="AND" property="responsible">
	             t_base_item.responsible = #responsible#
	       </isNotEmpty>
	        <isNotEmpty prepend="AND" property="supplierid">
	             t_base_item.supplierid = #supplierid#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="solutionid">
	             t_base_item.solutionid = #solutionid#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="positionid">
	        	t_base_item.positionid = #positionid# 
	        </isNotEmpty>
	        <isNotEmpty prepend="AND" property="issize">
	       		t_base_item.issize=#issize#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="topicids">
	       	t_base_item.topicid $topicids$
	       </isNotEmpty>
	       <isNotEmpty prepend="and" property="itemprefix">
		        <iterate property="itemprefix" open="(" close=")" conjunction="or">
		             	t_base_item.itemcode like '$itemprefix[]$%'
				</iterate> 
	       </isNotEmpty>
	       <isNotEmpty prepend="and" property="itemclass">
	        	t_base_item.itemclass=#itemclass#
	        </isNotEmpty>
		<isNotEmpty prepend="and" property="issolution">
			t_base_item.solutionid $issolution$
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="forderprice">
	             t_base_item.forderprice = #forderprice#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="ftaxrate">
	             t_base_item.ftaxrate = #ftaxrate#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="workinstructor">
	        	t_base_item.workinstructor = #workinstructor# 
	        </isNotEmpty>
	         <isNotEmpty prepend="AND" property="fbomisuse">
	        	t_base_item.fbomisuse = #fbomisuse# 
	        </isNotEmpty>
	</sql>
	
	
	 <sql id="BaseItem.findPage.and">
	    
			<isNotEmpty prepend="AND" property="baseitemid">
	             t_base_item.baseitemid = #baseitemid#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="itemcode">	             
	             t_base_item.itemcode like ('%$itemcode$%') 
	       </isNotEmpty>
	       
	       <isNotEmpty prepend="AND" property="itemparentcode">	             
	             t_base_item.itemparentcode like ('$itemparentcode$%') 
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="itemname">
	             t_base_item.itemname like ('%$itemname$%')
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="formatno">
	             t_base_item.formatno = #formatno#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="wfstatus">
	             t_base_item.wfstatus = #wfstatus#
	       </isNotEmpty>
			<isNotEmpty prepend="AND" property="createdateBegin">
	             t_base_item.createdate &gt;= #createdateBegin#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="createdateEnd">
	             t_base_item.createdate &lt;= #createdateEnd#
	       </isNotEmpty>
	    	<isNotEmpty prepend="AND" property="fitemid">
	             t_base_item.fitemid = #fitemid#
	       </isNotEmpty>
	       <isNotEmpty prepend="and" property="picpath">
	        	picpath = #picpath# 
	        </isNotEmpty>
	        <isNotEmpty prepend="AND" property="adminid">
	             t_base_item.adminid = #adminid#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="auditor">
	             t_base_item.auditor = #auditor#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="verifier">
	             t_base_item.verifier = #verifier#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="usestatus">
	             t_base_item.usestatus = #usestatus#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="itemproperty">
	             t_base_item.itemproperty = #itemproperty#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="finishstatus">
	             t_base_item.finishstatus = #finishstatus#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="parentcode">
	       		t_order_bom.parentcode like ('%$parentcode$%')
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="cycleid">
	             t_base_item.cycleid = #cycleid#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="fsaleprice">
	             t_base_item.fsaleprice = #fsaleprice#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="taxrate">
	             t_base_item.taxrate = #taxrate#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="unitid">
	             t_base_item.unitid = #unitid#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="unitname">
	             t_base_item.unitname = #unitname#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="fqtymin">
	             t_base_item.fqtymin = #fqtymin#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="secinv">
	             t_base_item.secinv = #secinv#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="seriescode">
	             t_base_item.seriescode = #seriescode#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="isdeduct">
	             t_base_item.isdeduct = #isdeduct#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="refercost">
	             t_base_item.refercost = #refercost#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="buytime">
	             t_base_item.buytime = #buytime#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="maketime">
	             t_base_item.maketime = #maketime#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="isbatch">
	             t_base_item.isbatch = #isbatch#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="isbarcode">
	             t_base_item.isbarcode = #isbarcode#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="categoryid">
	             t_base_item.categoryid = #categoryid#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="categoryids">
	       	t_base_item.categoryid in ($categoryids$)
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="categorynull">
	             t_base_item.categoryid is null
	       </isNotEmpty>
	       <isNotEmpty prepend="and" property="categroynotnull">
	       		t_base_item.categoryid is not null
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="ischeck">
	             t_base_item.ischeck = #ischeck#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="itemcls">
	             t_base_item.itemcls = #itemcls#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="youtput">
	             t_base_item.youtput = #youtput#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="lastoutput">
	             t_base_item.lastoutput = #lastoutput#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="existdemand">
	             t_base_item.existdemand = #existdemand#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="makingnums">
	             t_base_item.makingnums = #makingnums#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="checkedIdList">		             
		         t_base_item.baseitemid in         
		             <iterate property="checkedIdList" open="(" close=")" conjunction=",">
		             	 '$checkedIdList[]$'
					</iterate> 
		   </isNotEmpty>
		   <isNotEmpty prepend="AND" property="fissnmanager">
	             t_base_item.fissnmanager = #fissnmanager#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="topicid">
	             t_base_item.topicid = #topicid#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="f101">
	             t_base_item.f_101 = #f101#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="f106">
	             t_base_item.f_106 = #f106#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="f108">
	             t_base_item.f_108 = #f108#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="f119">
	             t_base_item.f_119 = #f119#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="f116">
	             t_base_item.f_116 = #f116#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="fchartnumber">
	             t_base_item.fchartnumber = #fchartnumber#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="f107">
	             t_base_item.f_107 = #f107#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="f112">
	             t_base_item.f_112 = #f112#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="f113">
	             t_base_item.f_113 = #f113#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="f114">
	             t_base_item.f_114 = #f114#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="f115">
	             t_base_item.f_115 = #f115#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="responsible">
	             t_base_item.responsible = #responsible#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="supplierid">
	             t_base_item.supplierid = #supplierid#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="solutionid">
	             t_base_item.solutionid = #solutionid#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="positionid">
	        	t_base_item.positionid = #positionid# 
	        </isNotEmpty>
	        <isNotEmpty prepend="AND" property="issize">
	       		t_base_item.issize=#issize#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="topicids">
	       	t_base_item.topicid $topicids$
	       </isNotEmpty>
	       <isNotEmpty prepend="and" property="itemprefix">
		        <iterate property="itemprefix" open="(" close=")" conjunction="or">
		             	t_base_item.itemcode like '$itemprefix[]$%'
				</iterate> 
	       </isNotEmpty>
	       <isNotEmpty prepend="and" property="itemclass">
	        	t_base_item.itemclass=#itemclass#
	        </isNotEmpty>
	        <isNotEmpty prepend="and" property="issolution">
			t_base_item.solutionid $issolution$
		</isNotEmpty>
		 <isNotEmpty prepend="AND" property="solutionids">
	       	t_base_item.solutionid $solutionids$
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="forderprice">
	             t_base_item.forderprice = #forderprice#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="ftaxrate">
	             t_base_item.ftaxrate = #ftaxrate#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="finspectionlevel">
	             t_ICItemQuality.finspectionlevel = #finspectionlevel#
	       </isNotEmpty>
	       <isNotEmpty prepend="AND" property="workinstructor">
	        	t_base_item.workinstructor = #workinstructor# 
	        </isNotEmpty>
	        
	         <isNotEmpty prepend="AND" property="crfis">
	        	t_base_item.crfis = #crfis# 
	        </isNotEmpty>
	         <isNotEmpty prepend="AND" property="assis">
	        	t_base_item.assis = #assis# 
	        </isNotEmpty>
	         <isNotEmpty prepend="AND" property="guideis">
	        	t_base_item.guideis = #guideis# 
	        </isNotEmpty>
	
			 <isNotEmpty prepend="AND" property="crfiss">
	        	 $crfiss$ 
	        </isNotEmpty>
	         <isNotEmpty prepend="AND" property="assiss">
	        	 $assiss$ 
	        </isNotEmpty>
	         <isNotEmpty prepend="AND" property="guideiss">
	        	$guideiss$ 
	        </isNotEmpty>
	         <isNotEmpty prepend="AND" property="fbomisuse">
	        	t_base_item.fbomisuse = #fbomisuse# 
	        </isNotEmpty>
	          <isNotEmpty prepend="AND" property="checktab">
	        	t_base_item.checktab = #checktab# 
	        </isNotEmpty>
	        
	        <isNotEmpty prepend="AND" property="pdkey">
	        	t_pd_key.itemcode $pdkey$
	        </isNotEmpty>
	        
	         <isNotEmpty prepend="AND" property="fbomis">
	        	t_base_item.fbomisuse $fbomis$
	        </isNotEmpty>
			<isNotEmpty prepend="AND" property="bomStatus">
	        	t_base_item.bomstatus = #bomStatus#
	        </isNotEmpty>
	        
	         <isNotEmpty prepend="AND" property="itemlevel">
	        	t_base_item.itemlevel = #itemlevel#
	        </isNotEmpty>
	        
	        <isNotEmpty prepend="AND" property="plates">
	        	 $plates$
	        </isNotEmpty>
	        <isNotEmpty prepend="AND" property="deleted">
	        	 t_base_item.deleted = #deleted#
	        </isNotEmpty>
	        
	        <isNotEmpty prepend="AND" property="detail">
	        	 t_base_item.detail = #detail#
	        </isNotEmpty>
	        
	        <isNotEmpty prepend="AND" property="flevel">
	        	 t_base_item.flevel = #flevel#
	        </isNotEmpty>
	       
	        
	</sql> 
    
    <select id="BaseItem.findListv" resultMap="RM.BaseItemv">
    	SELECT 
    		<include refid="BaseItem.columnsv"/> 
    	FROM 
    		v_base_item_ptree
		<include refid="BaseItem.findPage.wherev"/>
		<isNotEmpty property="sortColumns">
			ORDER BY $sortColumns$
		</isNotEmpty>
    </select>
    
    <select id="BaseItem.findItemList" resultMap="RM.BaseItem">
    	SELECT 
    		<include refid="BaseItem.columns"/> 
    	FROM 
    		t_base_item
		<include refid="BaseItem.findItemPage.where"/>
		<isNotEmpty property="sortColumns">
			ORDER BY $sortColumns$
		</isNotEmpty>
    </select>
    
    <select id="BaseItem.findList" resultMap="RM.BaseItem">
    	SELECT 
    		<include refid="BaseItem.columns"/> 
    	FROM 
    		t_base_item
		<include refid="BaseItem.findPage.where"/>
		<isNotEmpty property="sortColumns">
			ORDER BY $sortColumns$
		</isNotEmpty>
    </select>
   <!--  
    <select id="BaseItem.findList.listToPosition" resultMap="RM.BaseItem.listToPosition">
    	SELECT 
    		t_base_item.baseitemid ,
        	t_base_item.itemcode ,
        	t_base_item.itemname ,
        	t_base_item.formatno 
    	FROM 
    		t_base_item
    		where 1=1
    		
    		<isNotEmpty prepend="AND" property="itemcode">t_base_item.itemcode like ('%$itemcode$%')</isNotEmpty>
			<isNotEmpty prepend="AND" property="itemname">t_base_item.itemname like ('%$itemname$%')</isNotEmpty>
	       
		<isNotEmpty property="sortColumns">
			ORDER BY $sortColumns$
		</isNotEmpty>
    </select>
    
    -->
    <!-- 排产上查找物料是否有库存 -->
    <select id="BaseItem.iteminventorynum" resultClass="long">
    <![CDATA[
        select 
        count(t_inventory_batch.fqty)
        from t_inventory_batch , t_base_item   
    ]]>
		    where t_inventory_batch.itemcode=t_base_item.itemcode  and t_inventory_batch.fqty>0 and t_inventory_batch.fqty2>0
    		<isNotEmpty prepend="AND" property="itemcode"> t_base_item.itemcode = #itemcode#</isNotEmpty>
    </select>
    <!-- K3上查找物料是否有库存 K33.AIS20120718093132.dbo.t_item 3帐号 5帐号AIS20120813194456 -->
    <select id="BaseItem.k3iteminventorynum" resultClass="long">
    <![CDATA[
        select 
        count(ic.fqty)
        FROM AIS20120813194456.dbo.t_item  as it ,AIS20120813194456.dbo.icinventory  as  ic
    ]]>
    		where it.fitemid=ic.fitemid   and ic.fqty>0
    		<isNotEmpty prepend="AND" property="itemcode"> it.fnumber = #itemcode#</isNotEmpty>
    </select>
    
    <select id="BaseItem.findList.listToPosition.count" resultClass="long">
    <![CDATA[
        select 
        count(*)
        from t_base_item
    ]]>
		    where 1=1
    		<isNotEmpty prepend="AND" property="itemcode"> t_base_item.itemcode like ('%$itemcode$%')</isNotEmpty>
			<isNotEmpty prepend="AND" property="itemname"> t_base_item.itemname like ('%$itemname$%')</isNotEmpty>
    		<isNotEmpty prepend="AND" property="storage"> t_base_item.storage = #storage#</isNotEmpty>
    		<isNotEmpty prepend="AND" property="unbind"> t_base_item.storage = 0</isNotEmpty>
    </select>
    
      <select id="BaseItem.findList.listToPosition" resultMap="RM.BaseItem.listToPosition">
    		SELECT 
    		t_base_item.baseitemid ,
        	t_base_item.itemcode ,
        	t_base_item.itemname ,
        	t_base_item.formatno 
    	FROM 
    		t_base_item
    	
    	where 1=1
    		<isNotEmpty prepend="AND" property="itemcode"> t_base_item.itemcode like ('%$itemcode$%')</isNotEmpty>
			<isNotEmpty prepend="AND" property="itemname"> t_base_item.itemname like ('%$itemname$%')</isNotEmpty>
    		<isNotEmpty prepend="AND" property="storage"> t_base_item.storage = #storage#</isNotEmpty>
    		<isNotEmpty prepend="AND" property="unbind"> t_base_item.storage = 0</isNotEmpty>
    	
	   <isNotEmpty property="notTop">
	   	   and baseitemid not in(select $notTop$ baseitemid from t_base_item 
	   	  	where 1=1
    		<isNotEmpty prepend="AND" property="itemcode"> t_base_item.itemcode like ('%$itemcode$%')</isNotEmpty>
			<isNotEmpty prepend="AND" property="itemname"> t_base_item.itemname like ('%$itemname$%')</isNotEmpty>
    		<isNotEmpty prepend="AND" property="storage"> t_base_item.storage = #storage#</isNotEmpty>
    		<isNotEmpty prepend="AND" property="unbind"> t_base_item.storage = 0</isNotEmpty>
	   	   <isNotEmpty property="sortColumns"> ORDER BY $sortColumns$	</isNotEmpty>) 
	   	</isNotEmpty>    
    	<isNotEmpty property="sortColumns">
			ORDER BY $sortColumns$
		</isNotEmpty>
    </select>
    
    <!-- 关联盘库单据选择的物料 排产上是按批次盘点的  帐套3-->
    <select id="BaseItem.findList.listTakeStockBatchItems" resultMap="RM.BaseItem.findItem.plsheet"> 
         select top 35 t_base_item.baseitemid ,t_base_item.itemcode itemcode ,t_base_item.itemname ,
    		t_base_item.formatno ,t_base_item.f_102,t_base_item.unitname,
    		t_base_item.forderprice,t_base_item.ftaxrate,t_base_item.f_101,
    		t_base_item.responsible,t_base_item.supplierid,
    		t_base_item.unitid,t_base_item.isbatch,t_base_item.storage storage,
    		t_base_item.fissnmanager,t_stock.fname stockName,t_base_item.fsaleprice,
    		t_inventory_batch.fqty  itemstocknum ,
    		t_inventory_batch.batchno
    		from t_base_item left join t_inventory_batch on t_base_item.itemcode = t_inventory_batch.itemcode
    		left join t_stock  on t_base_item.storage = t_stock.fitemid 
    		where 1 = 1 
    		<isNotEmpty prepend="AND" property="itemcode"> t_base_item.itemcode like ('%$itemcode$%')</isNotEmpty>
    		<isNotEmpty prepend="AND" property="storage"> t_inventory_batch.fitemid= #storage#</isNotEmpty>
    		AND t_base_item.storage=t_inventory_batch.fitemid
    		AND t_inventory_batch.dbno= 3
    </select>
    
    <!-- 关联盘库单据选择的物料 排产上是按批次盘点的  帐套4-->
    <select id="BaseItem.findList.listTakeStockBatchItems4" resultMap="RM.BaseItem.findItem.plsheet"> 
         select top 35 t_base_item.baseitemid ,t_base_item.itemcode itemcode ,t_base_item.itemname ,
    		t_base_item.formatno ,t_base_item.f_102,t_base_item.unitname,
    		t_base_item.forderprice,t_base_item.ftaxrate,t_base_item.f_101,
    		t_base_item.responsible,t_base_item.supplierid,
    		t_base_item.unitid,t_base_item.isbatch,t_base_item.storage storage,
    		t_base_item.fissnmanager,t_stock.fname stockName,t_base_item.fsaleprice,
    		t_inventory_batch.fqty2  itemstocknum ,
    		t_inventory_batch.batchno
    		from t_base_item left join t_inventory_batch on t_base_item.itemcode = t_inventory_batch.itemcode
    		left join t_stock  on t_base_item.storage = t_stock.fitemid 
    		where 1 = 1 
    		<isNotEmpty prepend="AND" property="itemcode"> t_base_item.itemcode like ('%$itemcode$%')</isNotEmpty>
    		<isNotEmpty prepend="AND" property="storage"> t_inventory_batch.fitemid= #storage#</isNotEmpty>
    		AND t_base_item.storage=t_inventory_batch.fitemid
    		AND t_inventory_batch.dbno= 4
    </select>
    
    <select id="BaseItem.findList.listTakeStockBatchItemsold3" resultMap="RM.BaseItem.findItem.plsheet"> 
    	select top 10 t_base_item.baseitemid ,t_base_item.itemcode ,t_base_item.itemname ,
    		t_base_item.formatno ,t_base_item.f_102,t_base_item.unitname,
    		t_base_item.forderprice,t_base_item.ftaxrate,t_base_item.f_101,
    		t_base_item.responsible,t_base_item.supplierid,
    		t_base_item.unitid,t_base_item.isbatch,t_base_item.storage,
    		t_base_item.fissnmanager,t_stock.fname stockName,t_base_item.fsaleprice,
    		t_inventory_batch.fqty  itemstocknum ,
    		t_inventory_batch.batchno
    		from t_base_item left join t_inventory_batch on t_base_item.itemcode = t_inventory_batch.itemcode
    		left join t_stock  on t_base_item.storage = t_stock.fitemid 
    		
    		
    		where 1 = 1
    		
    		<isNotEmpty prepend="AND" property="itemcode"> t_base_item.itemcode like ('%$itemcode$%')</isNotEmpty>
    		<isNotEmpty prepend="AND" property="storage"> t_inventory_batch.fitemid= #storage#</isNotEmpty>
    </select>
    
    <select id="BaseItem.findList.listTakeStockBatchItemsold2" resultMap="RM.BaseItem.listTakeStockItems">
	select  top 10 
	        t_base_item.itemcode, 
    		t_base_item.itemname,
    		t_base_item.formatno,
    		t_base_item.unitname ,
    		t_inventory_batch.fqty  itemstocknum ,
    		t_inventory_batch.batchno
    		 
    		from t_inventory_batch 
    		     left join t_base_item  on t_inventory_batch.itemcode=t_base_item.itemcode 
    		where 1 = 1
    		<isNotEmpty prepend="AND" property="itemcode"> t_base_item.itemcode like ('%$itemcode$%')</isNotEmpty>
    		<isNotEmpty prepend="AND" property="storage"> t_inventory_batch.fitemid= #storage#</isNotEmpty>
    </select>
    
    <!-- 关联盘库单据选择的物料 排产上是按批次盘点的-->
    <select id="BaseItem.findList.listTakeStockBatchItemsold" resultMap="RM.BaseItem.listTakeStockItems">
    select  top 10
    		t_base_item.itemcode, 
    		t_base_item.itemname,
    		t_base_item.formatno,
    		t_base_item.unitname ,
    		a.itemstocknum,
    		a.batchno
	FROM    t_base_item ,
			(
			SELECT   itemcode  , fqty itemstocknum ,batchno 
		  	FROM t_inventory_batch ,t_stock
		    where  t_inventory_batch.fitemid=t_stock.fitemid 
		           and  t_stock.fitemid=  #storage# 
		           and itemcode like ('%$itemcode$%') 
		           and dbno=3
			) as a 
	where   t_base_item.itemcode= a.itemcode and t_base_item.storage= #storage#  
	and     a.itemcode like ('%$itemcode$%')
	order by  t_base_item.itemcode
    </select>
    
    <!-- 关联盘库选择的物料 -->
    <select id="BaseItem.findList.listTakeStockItems" resultMap="RM.BaseItem.listTakeStockItems">
    select  top 10
    		t_base_item.itemcode, 
    		t_base_item.itemname,
    		t_base_item.formatno,
    		t_base_item.unitname ,
    		a.itemstocknum
	FROM    t_base_item ,
			(
			SELECT   itemcode  , SUM(fqty) itemstocknum  
		  	FROM t_inventory_batch ,t_stock
		    where  t_inventory_batch.fitemid=t_stock.fitemid 
		           and  t_stock.fitemid=  #storage# 
		           and itemcode like ('%$itemcode$%') 
		           and dbno=3
		    	   group by  itemcode   
			) as a 
	where   t_base_item.itemcode= a.itemcode and t_base_item.storage= #storage#  and     a.itemcode like ('%$itemcode$%')
    </select>
    
    
    
    <select id="BaseItem.findList.listToTeamPosition.count" resultClass="long">
    <![CDATA[
        select 
        count(*)
        from t_base_item
    ]]>
		    where 1=1
    		<isNotEmpty prepend="AND" property="itemcode"> t_base_item.itemcode like ('%$itemcode$%')</isNotEmpty>
			<isNotEmpty prepend="AND" property="itemname"> t_base_item.itemname like ('%$itemname$%')</isNotEmpty>
  			<isNotEmpty prepend="AND" property="deptid"> t_base_item.deptid= #deptid#</isNotEmpty>
    		<isNotEmpty prepend="AND" property="unbind"> t_base_item.deptid is null</isNotEmpty>
    </select>
    
      <select id="BaseItem.findList.listToTeamPosition" resultMap="RM.BaseItem.listToPosition">
    		SELECT 
    		t_base_item.baseitemid ,
        	t_base_item.itemcode ,
        	t_base_item.itemname ,
        	t_base_item.formatno 
    	FROM 
    		t_base_item
    	
    	where 1=1
    		<isNotEmpty prepend="AND" property="itemcode"> t_base_item.itemcode like ('%$itemcode$%')</isNotEmpty>
			<isNotEmpty prepend="AND" property="itemname"> t_base_item.itemname like ('%$itemname$%')</isNotEmpty>
    		<isNotEmpty prepend="AND" property="deptid"> t_base_item.deptid= #deptid#</isNotEmpty>
    		<isNotEmpty prepend="AND" property="unbind"> t_base_item.deptid is null</isNotEmpty>
    	
	   <isNotEmpty property="notTop">
	   	   and baseitemid not in(select $notTop$ baseitemid from t_base_item 
	   	  	where 1=1
    		<isNotEmpty prepend="AND" property="itemcode"> t_base_item.itemcode like ('%$itemcode$%')</isNotEmpty>
			<isNotEmpty prepend="AND" property="itemname"> t_base_item.itemname like ('%$itemname$%')</isNotEmpty>
    		<isNotEmpty prepend="AND" property="deptid"> t_base_item.deptid= #deptid#</isNotEmpty>
    		<isNotEmpty prepend="AND" property="unbind"> t_base_item.deptid is null</isNotEmpty>
    	
	   	   <isNotEmpty property="sortColumns"> ORDER BY $sortColumns$	</isNotEmpty>) 
	   	</isNotEmpty>    
    	<isNotEmpty property="sortColumns">
			ORDER BY $sortColumns$
		</isNotEmpty>
    </select>
    
    
       <select id="BaseItem.findList.listToPositionsys.count" resultClass="long">
    <![CDATA[
        select 
        count(*)
        from t_base_item
    ]]>
		    where 1=1
    		<isNotEmpty prepend="AND" property="itemcode"> t_base_item.itemcode like ('%$itemcode$%')</isNotEmpty>
			<isNotEmpty prepend="AND" property="itemname"> t_base_item.itemname like ('%$itemname$%')</isNotEmpty>
    		<isNotEmpty prepend="AND" property="storage"> t_base_item.storage != 0</isNotEmpty>
    		<isNotEmpty prepend="AND" property="unbind"> t_base_item.storage = 0</isNotEmpty>
    </select>
    
      <select id="BaseItem.findList.listToPositionsys" resultMap="RM.BaseItem.listToPositionsys">
    		SELECT 
    		t_base_item.baseitemid ,
        	t_base_item.itemcode ,
        	t_base_item.itemname ,
        	t_base_item.formatno ,
        	t_positions.positionname positionname
    	FROM 
    		t_base_item left join t_positions on t_base_item.storage=t_positions.positionid
    	
    	where 1=1
    		<isNotEmpty prepend="AND" property="itemcode"> t_base_item.itemcode like ('%$itemcode$%')</isNotEmpty>
			<isNotEmpty prepend="AND" property="itemname"> t_base_item.itemname like ('%$itemname$%')</isNotEmpty>
    		<isNotEmpty prepend="AND" property="storage"> t_base_item.storage != 0</isNotEmpty>
    		<isNotEmpty prepend="AND" property="unbind"> t_base_item.storage = 0</isNotEmpty>
    	
	   <isNotEmpty property="notTop">
	   	   and baseitemid not in(select $notTop$ baseitemid from t_base_item 
	   	  	where 1=1
    		<isNotEmpty prepend="AND" property="itemcode"> t_base_item.itemcode like ('%$itemcode$%')</isNotEmpty>
			<isNotEmpty prepend="AND" property="itemname"> t_base_item.itemname like ('%$itemname$%')</isNotEmpty>
    		<isNotEmpty prepend="AND" property="storage"> t_base_item.storage != 0</isNotEmpty>
    		<isNotEmpty prepend="AND" property="unbind"> t_base_item.storage = 0</isNotEmpty>
    	
	   	   <isNotEmpty property="sortColumns"> ORDER BY $sortColumns$	</isNotEmpty>) 
	   	</isNotEmpty>    
    	<isNotEmpty property="sortColumns">
			ORDER BY $sortColumns$
		</isNotEmpty>
    </select>
    
    
    
    
    
    
    
    <select id="BaseItem.findPage.Order.count" resultClass="long">
    <![CDATA[
        select 
        count(*)
        from t_base_item
    ]]>
		<include refid="BaseItem.findPage.where"/>    
    </select>
    <!-- 订单添加时查询 -->
    <select id="BaseItem.findPage.Order" resultMap="RM.BaseItem">
    	select <include refid="BaseItem.columns"/> from t_base_item   where 1=1
	   <isNotEmpty property="notTop">
	   	   and baseitemid not in(select $notTop$ baseitemid from t_base_item <include refid="BaseItem.findPage.where"/>
	   	   <isNotEmpty property="sortColumns"> ORDER BY $sortColumns$	</isNotEmpty>) 
	   	</isNotEmpty>    
	   	<include refid="BaseItem.findPage.and"/>
    	<isNotEmpty property="sortColumns">
			ORDER BY $sortColumns$
		</isNotEmpty>
    </select>
    <select id="BaseItem.findPage.z.count" resultClass="long">
    <![CDATA[
        select 
        count(*)
        from t_base_item left join t_ICItemQuality
       	on t_base_item.baseitemid= t_ICItemQuality.baseitemid
    ]]>
		<include refid="BaseItem.findPage.where"/>    
    </select>
    <!--
    	分页查询已经使用Dialect进行分页,也可以不使用Dialect直接编写分页
    	因为分页查询将传 #offset#,#pageSize#,#lastRows# 三个参数,不同的数据库可以根于此三个参数属性应用不同的分页实现
    -->
    <select id="BaseItem.findPage.z" resultMap="RM.BaseItem.Page.z">
	    select 
    	t_base_item.installdiagram,
    	t_base_item.maintainpartdiagram,
	    t_base_item.baseitemid ,t_base_item.itemcode ,t_base_item.itemname ,t_base_item.formatno ,t_base_item.itemproperty ,t_base_item.secinv ,
	    t_base_item.youtput ,t_base_item.unitname ,t_base_item.ischeck,t_base_item.fqtymin ,t_base_item.isdeduct ,t_base_item.refercost ,t_base_item.buytime,
        t_base_item.checkednum ,t_base_item.unchecknum ,t_base_item.existdemand,t_base_item.forecast ,t_base_item.isbatch ,t_base_item.isbarcode,t_base_item.fissnmanager  ,
        t_process_cycle.cyclename ,v_invnetory_batch.sqty fqty,v_invnetory_batch.sqty2 fqty2,t_admin.adminName,t_supplier.fname,t_ICItemQuality.finspectionlevel as finspectionlevel,
        t_base_item.workinstructor,t_base_item.checktab,t_base_item.bomstatus ,t_base_item.itemlevel,t_report_package.fname rpname,t_report_package.pid rpid   
	    from t_base_item left join t_process_cycle on t_base_item.cycleid=t_process_cycle.cycleid left join v_invnetory_batch on
	    t_base_item.itemcode=v_invnetory_batch.itemcode  left join t_admin on t_base_item.responsible = t_admin.adminId left join t_supplier
	    on t_base_item.supplierid = t_supplier.supplierid left join t_ICItemQuality
       	on t_base_item.baseitemid= t_ICItemQuality.baseitemid
       	left join t_report_package on t_base_item.rpid = t_report_package.pid 
	   where 1=1
	   <isNotEmpty property="notTop">
	   	   and t_base_item.baseitemid not in(select $notTop$ t_base_item.baseitemid from t_base_item left join t_ICItemQuality
       	on t_base_item.baseitemid= t_ICItemQuality.baseitemid<include refid="BaseItem.findPage.where"/>
	   	   <isNotEmpty property="sortColumns"> ORDER BY $sortColumns$	</isNotEmpty>) 
	   	</isNotEmpty>    
	   	<include refid="BaseItem.findPage.and"/>
    	<isNotEmpty property="sortColumns">
			ORDER BY $sortColumns$
		</isNotEmpty>
    </select>
    <select id="BaseItem.findPage.count" resultClass="long">
    <![CDATA[
        select 
        count(*)
        from t_base_item
    ]]>
		<include refid="BaseItem.findPage.where"/>    
    </select>
    <!--
    -->
    <select id="BaseItem.findPage" resultMap="RM.BaseItem.Page">
	    select t_base_item.baseitemid ,t_base_item.itemcode ,t_base_item.itemname ,t_base_item.formatno ,t_base_item.itemproperty ,t_base_item.secinv ,
	    t_base_item.youtput ,t_base_item.unitname ,t_base_item.ischeck,t_base_item.fqtymin ,t_base_item.isdeduct ,t_base_item.refercost ,
        t_base_item.checkednum ,t_base_item.unchecknum ,t_base_item.existdemand,t_base_item.forecast ,t_base_item.isbatch ,t_base_item.isbarcode,t_base_item.fissnmanager  ,t_base_item.bomstatus  ,
        t_process_cycle.cyclename ,v_invnetory_batch.sqty fqty,v_invnetory_batch.sqty2 fqty2,t_admin.adminName,t_supplier.fname
	    from t_base_item left join t_process_cycle on t_base_item.cycleid=t_process_cycle.cycleid left join v_invnetory_batch on
	    t_base_item.itemcode=v_invnetory_batch.itemcode  left join t_admin on t_base_item.responsible = t_admin.adminId left join t_supplier
	    on t_base_item.supplierid = t_supplier.supplierid
	   where 1=1
	   <isNotEmpty property="notTop">
	   	   and baseitemid not in(select $notTop$ baseitemid from t_base_item <include refid="BaseItem.findPage.where"/>
	   	   <isNotEmpty property="sortColumns"> ORDER BY $sortColumns$	</isNotEmpty>) 
	   	</isNotEmpty>    
	   	<include refid="BaseItem.findPage.and"/>
    	<isNotEmpty property="sortColumns">
			ORDER BY $sortColumns$
		</isNotEmpty>
		
    </select>
    
    
    
    
    
	
	<select id="BaseItem.Process.Parent.findPage.count" resultClass="long">
    <![CDATA[
        select 
        count(*)
        from t_base_item left join t_order_bom on t_base_item.itemcode=t_order_bom.itemcode 
    ]]>
    where 1=1 
		and t_order_bom.parentcode=#parentcode#
		<include refid="BaseItem.findPage.and"/>    
    </select> 
	<select id="BaseItem.Process.Parent.findPage" resultMap="RM.BaseItem.ProcessVersion">
	select t_base_item.baseitemid,t_base_item.itemcode,t_base_item.itemname,t_base_item.wfstatus,t_item_doc.docname,t_item_doc.docpath,
	t_item_doc.isexist,t_base_item.usestatus,t_base_item.itemproperty,t_base_item.finishstatus
	from 
	t_base_item left join t_item_doc on 
	t_base_item.itemcode=t_item_doc.itemcode 
	left join t_order_bom on t_base_item.itemcode=t_order_bom.itemcode
	where 1=1 
		and t_order_bom.parentcode=#parentcode#
	<isNotEmpty property="notTop">
	and baseitemid not in(select $notTop$ baseitemid from t_base_item left join t_item_doc on t_base_item.itemcode=t_item_doc.itemcode 
	left join t_bom on t_base_item.itemcode=t_bom.itemcode
	where 1=1 
		and t_order_bom.parentcode=#parentcode#
	 <include refid="BaseItem.findPage.and"/>
   	   <isNotEmpty property="sortColumns"> ORDER BY $sortColumns$	</isNotEmpty>) 
   	</isNotEmpty> 
	<include refid="BaseItem.findPage.and"/>
    	order by t_base_item.itemcode desc
	</select>
	
	<select id="BaseItem.Process.findPage.count" resultClass="long">
	    <![CDATA[
	        select 
	        count(*)
	        from t_base_item 
	    ]]>
		<include refid="BaseItem.findPage.where"/>    
    </select>
	 
	 <select id="BaseItem.Process.findPage" resultMap="RM.BaseItem.ProcessVersion">
	select t_base_item.baseitemid,t_base_item.itemcode,t_base_item.itemname,t_base_item.wfstatus,
	t_item_doc.docname,t_item_doc.docpath,t_item_doc.isexist,t_base_item.usestatus,
	t_base_item.itemproperty,t_base_item.finishstatus
	from t_base_item 
		left join t_item_doc 
			on t_base_item.itemcode=t_item_doc.itemcode 
	where 1=1 
		<isNotEmpty property="notTop">
		and baseitemid not in(select $notTop$ baseitemid from t_base_item <include refid="BaseItem.findPage.where"/>
	   	   <isNotEmpty property="sortColumns"> ORDER BY $sortColumns$	</isNotEmpty>) 
	   	</isNotEmpty> 
		<include refid="BaseItem.findPage.and"/>
	    	order by t_base_item.itemcode desc
	</select>
	
	<select id="BaseItem.Process.findAllItemProcess" resultMap="RM.BaseItem.Process">
	select t_base_item.baseitemid,t_base_item.itemcode,t_base_item.itemname,t_base_item.wfstatus,t_item_doc.docname,t_item_doc.docpath,
	t_item_doc.isexist,t_base_item.usestatus,t_base_item.itemproperty,t_base_item.finishstatus
	from t_base_item left join t_item_doc on t_base_item.itemcode=t_item_doc.itemcode 
	order by t_base_item.itemcode desc
	</select>
	
	<!-- 同步物料目录树 -->
	<select id="BaseItem.syncK3ItemDetail" resultMap="RM.ItemDetailK3">
	 select t_item.*
		from AIS20120813194456.dbo.v_itemdetail  as t_item 
		where  not exists
  ( select t_base_item.itemcode from  [TerrenceProductionCZ].[dbo].[t_base_item] as t_base_item
    where t_item.fnumber=t_base_item.itemcode  and t_base_item.detail=0  )
	</select>
	
	
	<statement id="getItemProcessByItemCode" parameterClass="String" resultMap="RM.ItemProcess.BaseItem"> 
      select t_item_process.itemprocessid,t_item_process.processid,t_item_process.processname,t_item_process.orderid,
      t_item_process.preparemins,t_item_process.processmins,t_item_process.keypoint,t_item_process.explain,t_item_process.programname from t_item_process where t_item_process.itemcode = #value# 
      order by itemprocessid
	</statement> 
	<statement id="findItemByBom" parameterClass="String" resultMap="RM.BaseItem.Bom">
	select parentcode,parentname,parentqty,parentunitname from t_bom where itemcode=#value#
	</statement>
	<statement id="findItemByOrderBom" parameterClass="String" resultMap="RM.BaseItem.OrderBom">
	select parentcode,parentname,parentqty,parentunitname from t_order_bom where itemcode=#value#
	</statement>
	
	<select id="Baseitem.findList.Temp" resultMap="RM.BaseItem.Detail">
	select <include refid="BaseItem.columns"/> from t_base_item where categoryid is not null and youtput>0
	</select>
	 
	<select id="Baseitem.findList.Changed.Youtput" resultMap="RM.BaseItem.Detail">
	select <include refid="BaseItem.columns"/> from t_base_item where youtput!=lastoutput
	</select>
	<!-- 更新单位用量变化的年需求量2,配合orderBomSqlMap.xml里的1，4 -->
	<update id="BaseItem.Update.Youtput">
		update t_base_item set youtput=ff.youtput1+ff.youtput from (select sum(youtput1) youtput1,youtput,f1.parentcode from (select youtput*(parentqty-childqty) youtput1,t_base_item.itemcode,parentcode from t_base_item,t_order_bom 
		where t_base_item.itemcode=t_order_bom.itemcode and t_order_bom.parentqty!=t_order_bom.childqty) f1,
		(select youtput,t_order_bom.itemcode,t_order_bom.parentcode from t_base_item,t_order_bom where t_base_item.itemcode=t_order_bom.parentcode 
		and t_order_bom.parentqty!=t_order_bom.childqty) f2 where f1.parentcode=f2.parentcode and f1.itemcode=f2.itemcode
		group by youtput,f1.parentcode) ff
		where t_base_item.itemcode=ff.parentcode
	</update>
	
	<!-- 导出所有使用中的物料 -->
	<select id="BaseItem.findAllUseItem" resultMap="RM.BaseItem.AlluseItem">
    <!-- 	select <include refid="BaseItem.columns"/>,t_process_cycle.cyclename  from t_base_item left join t_process_cycle on t_base_item.cycleid=t_process_cycle.cycleid where 1=1
	    -->
	select t_base_item.baseitemid, t_base_item.itemcode,t_base_item.itemname,t_base_item.formatno
			,t_base_item.itemproperty,t_base_item.secinv,t_process_cycle.cyclename
			,t_base_item.youtput,t_base_item.unitname,t_base_item.ischeck,t_base_item.fqtymin
			,t_base_item.isdeduct,t_base_item.refercost,t_base_item.buytime
			,t_base_item.maketime,t_base_item.isbatch,t_base_item.isbarcode ,t_base_item.itemcls
	from
	        t_base_item 
	    left join
	        t_process_cycle 
	            on t_base_item.cycleid=t_process_cycle.cycleid 
		       where 2=2 
	   	<include refid="BaseItem.findPage.and"/>
    	    ORDER BY    t_base_item.baseitemid DESC
		
	</select>

<select id="RM.BaseItem.ListItemprocess" resultMap="RM.BaseItem.DefaultProcess">
		select t_procedure.procedurename,c.processname,c.devicename,c.preparemins,c.processmins from t_item_procedure 
		left join 
			(select t_item_process.processname,t_device.devicename,t_item_process.preparemins,t_item_process.processmins,t_item_process.isdefault,t_item_process.itemprocedureid 
				from 
				t_item_process left join t_device on t_item_process.deviceid=t_device.deviceid
				 where t_item_process.isdefault=1 ) c
		on t_item_procedure.itemprocedureid=c.itemprocedureid
		left join t_procedure	
		 on t_item_procedure.procedureid=t_procedure.procedurerid

where t_item_procedure.itemid=#baseitemid# and c.isdefault=1
order by t_item_procedure.seqno asc

</select>	

<select id="BaseItem.Topic.Size.findPage.count" resultClass="long">
<![CDATA[
select count(*) from t_base_item left join t_topic
on t_base_item.topicid=t_topic.topicid
]]>
<include refid="BaseItem.findPage.where"/>
</select>
<select id="BaseItem.Topic.Size.findPage" resultMap="RM.BaseItem.Topic.Size">
<![CDATA[
select t_base_item.baseitemid,t_base_item.itemcode,t_base_item.itemname,t_base_item.formatno
,t_base_item.topicid,t_base_item.issize,t_topic.topicname from t_base_item left join t_topic
on t_base_item.topicid=t_topic.topicid where 1=1 
]]>
<isNotEmpty property="notTop">
	and baseitemid not in(select $notTop$ baseitemid from t_base_item <include refid="BaseItem.findPage.where"/>
   	   <isNotEmpty property="sortColumns"> ORDER BY $sortColumns$	</isNotEmpty>) 
</isNotEmpty> 
<include refid="BaseItem.findPage.and"/>
    	order by $sortColumns$ 
	   
</select>	

  <select id="BaseItem.listBaseitem.findPage.count" resultClass="long">
    <![CDATA[
        select 
        count(*)
        from t_base_item
    ]]>
		  where 1=1  and t_base_item.itemcode not like '080%' 
	   	    and t_base_item.itemcode not like '081%' and t_base_item.itemcode not like '082%'
	   	   <include refid="BaseItem.findPage.and"/>   
    </select>

 <select id="BaseItem.listBaseitem.findPage" resultMap="RM.BaseItem.list.baseitem.itemclass.Page"><!-- 采购系统中供应商管理的物料管理 -->
	    select <include refid="BaseItem.columns"/>,t_supplier.fname,t_admin.adminName,t_supplier_type.typename
	    from t_base_item  left join t_supplier on t_base_item.supplierid = t_supplier.supplierid
	    		left join t_admin on t_base_item.responsible = t_admin.adminId
	    		left join t_supplier_type on t_base_item.itemclass = t_supplier_type.typeid
	    		
	   where 1=1  and t_base_item.itemcode not like '080%' 
	   	    and t_base_item.itemcode not like '081%' and t_base_item.itemcode not like '082%'
	   <isNotEmpty property="notTop">
	   	   and baseitemid not in(select $notTop$ baseitemid from t_base_item 
	   	    where 1=1  and t_base_item.itemcode not like '080%' 
	   	    and t_base_item.itemcode not like '081%' and t_base_item.itemcode not like '082%'
	   	   <include refid="BaseItem.findPage.and"/>
	   	   <isNotEmpty property="sortColumns"> ORDER BY $sortColumns$	</isNotEmpty>) 
	   	</isNotEmpty>    
	   	<include refid="BaseItem.findPage.and"/>
    	<isNotEmpty property="sortColumns">
			ORDER BY $sortColumns$
		</isNotEmpty>
		
    </select>
    
    <select id="BaseItem.listBaseitem.findPage.WU.count" resultClass="long">
    <![CDATA[
        select 
        count(*)
        from t_base_item
    ]]>
     where 1 = 1 and (responsible is null or t_base_item.supplierid is null or itemclass is null  or  buytime is null)  and t_base_item.itemcode not like '080%' 
	   	    and t_base_item.itemcode not like '081%' and t_base_item.itemcode not like '082%'
		<include refid="BaseItem.findPage.WU.where"/>    
    </select>
    
    <select id="BaseItem.listBaseitem.findPage.WU" resultMap="RM.BaseItem.list.baseitem.itemclass.Page"><!-- 采购系统中供应商管理的物料管理,负责人没绑定 -->
	    select <include refid="BaseItem.columns"/>,t_supplier.fname,t_admin.adminName,t_supplier_type.typename
	    from t_base_item  left join t_supplier on t_base_item.supplierid = t_supplier.supplierid
	    		left join t_admin on t_base_item.responsible = t_admin.adminId
	    		left join t_supplier_type on t_base_item.itemclass = t_supplier_type.typeid
	    		
	   where 1=1 and  (responsible is null or t_base_item.supplierid is null or itemclass is null or  buytime is null)  and t_base_item.itemcode not like '080%' 
	   	    and t_base_item.itemcode not like '081%' and t_base_item.itemcode not like '082%'
	   <isNotEmpty property="notTop">
	   	   and baseitemid not in(select $notTop$ baseitemid from t_base_item 
	   	    where 1=1 and  (responsible is null or t_base_item.supplierid is null or itemclass is null  or  buytime is null) and t_base_item.itemcode not like '080%' 
	   	    and t_base_item.itemcode not like '081%' and t_base_item.itemcode not like '082%'
	   	    <include refid="BaseItem.findPage.and"/>
	   	   <isNotEmpty property="sortColumns"> ORDER BY $sortColumns$	</isNotEmpty>) 
	   	</isNotEmpty>    
	   	<include refid="BaseItem.findPage.and"/>
    	<isNotEmpty property="sortColumns">
			ORDER BY $sortColumns$
		</isNotEmpty>
		
    </select>
    
        <select id="BaseItem.listBaseitem.findPage.BANG.count" resultClass="long">
    <![CDATA[
        select 
        count(*)
        from t_base_item
    ]]> where    1 = 1 and responsible is not null  and t_base_item.supplierid is not null and itemclass is not null  and buytime is not null  and t_base_item.itemcode not like '080%' 
	   	    and t_base_item.itemcode not like '081%' and t_base_item.itemcode not like '082%'
		<include refid="BaseItem.findPage.BANG.where"/>    
    </select>
    
    <select id="BaseItem.listBaseitem.findPage.BANG" resultMap="RM.BaseItem.list.baseitem.itemclass.Page"><!-- 采购系统中供应商管理的物料管理，负责人已绑定 -->
	    select <include refid="BaseItem.columns"/>,t_supplier.fname,t_admin.adminName,t_supplier_type.typename
	    from t_base_item  left join t_supplier on t_base_item.supplierid = t_supplier.supplierid
	    		left join t_admin on t_base_item.responsible = t_admin.adminId
	    		left join t_supplier_type on t_base_item.itemclass = t_supplier_type.typeid
	    		
	   where 1=1 and  responsible is not null and t_base_item.supplierid is not null and itemclass is not null and buytime is not null  and t_base_item.itemcode not like '080%' 
	   	    and t_base_item.itemcode not like '081%' and t_base_item.itemcode not like '082%'
	   <isNotEmpty property="notTop">
	   	   and baseitemid not in(select $notTop$ baseitemid from t_base_item 
	   	    where 1=1 and  responsible is not null and t_base_item.supplierid is not null and itemclass is not null  and buytime is not null
	   	     and t_base_item.itemcode not like '080%' 
	   	    and t_base_item.itemcode not like '081%' and t_base_item.itemcode not like '082%'
	   	   <include refid="BaseItem.findPage.and"/>
	   	   <isNotEmpty property="sortColumns"> ORDER BY $sortColumns$	</isNotEmpty>) 
	   	</isNotEmpty>    
	   	<include refid="BaseItem.findPage.and"/>
    	<isNotEmpty property="sortColumns">
			ORDER BY $sortColumns$
		</isNotEmpty>
		
    </select>
 
 
 
  <select id="BaseItem.find.baseitem" resultMap="RM.BaseItem.list.baseitem.Page">
	    select <include refid="BaseItem.columns"/>,t_supplier.fname,t_admin.adminName
	    from t_base_item  left join t_supplier on t_base_item.supplierid = t_supplier.supplierid
	    		left join t_admin on t_base_item.responsible = t_admin.adminId
	        where 
		        baseitemid = #baseitemid# 
	    
    </select>
<select id="BaseItem.Pd.findPage.count" resultClass="long">
	select count(*) from t_base_item  <include refid="BaseItem.findPage.where"/>
</select>
<select id="BaseItem.Pd.findPage" resultMap="RM.BaseItem.Pd">
	SELECT <include refid="BaseItem.columns"/>,t_pd_examine_solution.solutionname FROM t_base_item
	left join t_pd_examine_solution on t_base_item.solutionid=t_pd_examine_solution.solutionid 	where 1=1 
 	<isNotEmpty property="notTop">
	and baseitemid not in(select $notTop$ baseitemid from t_base_item <include refid="BaseItem.findPage.where"/>
   	   <isNotEmpty property="sortColumns"> ORDER BY $sortColumns$	</isNotEmpty>) 
	</isNotEmpty> 
 	<include refid="BaseItem.findPage.and"/> order by $sortColumns$ 
</select>

<select id="BaseItem.find.baseitem.List" resultMap="RM.BaseItem.list.baseitem.itemclass.Page">
	    select <include refid="BaseItem.columns"/>,t_supplier.fname,t_admin.adminName,t_supplier_type.typename
	    from t_base_item  left join t_supplier on t_base_item.supplierid = t_supplier.supplierid
	    		left join t_admin on t_base_item.responsible = t_admin.adminId
	    		left join t_supplier_type on t_base_item.itemclass = t_supplier_type.typeid
	        where 
		        baseitemid = #baseitemid# 
	    
    </select>
    
    <select id="BaseItem.getSolutionById"  resultMap="RM.BaseItem.Pd">
    	select <include refid="BaseItem.columns"/>,t_pd_examine_solution.solutionname from t_base_item
	left join t_pd_examine_solution on t_base_item.solutionid=t_pd_examine_solution.solutionid 	where 1=1 and baseitemid = #baseitemid# 
    </select>

    
    
    <select id="BaseItem.findItemVersion"  resultMap="RM.BaseItem.ItemVersion">
	select 	t_item_ver.fverid ,	t_item_ver.baseitemid ,	t_item_ver.fversion ,t_item_ver.itemcode ,
	t_item_ver.isdefault,t_item_ver.finishstatus,t_item_ver.wfstatus
        	from t_item_ver where t_item_ver.baseitemid=#value#
    </select>
    
	    
	<select id="BaseItem.getByEntityVer" resultMap="RM.BaseItem.includeAdminNameVer">
		select t_base_item.itemcode,
				t_base_item.itemname,
				t_base_item.formatno,
				t_item_ver.finishstatus,
				t_item_ver.wfstatus,
				t_item_ver.fverid,
				t_item_ver.fversion,
				t_item_ver.isdefault,
				t_admin.adminName ,
				c.adminName checkname
		from t_base_item,t_item_ver left join t_admin 
			on t_item_ver.adminid=t_admin.adminId
			left join t_admin c on
			 t_item_ver.auditor=c.adminId
		
		 where t_base_item.itemcode=#itemcode# 
		 and t_item_ver.baseitemid= t_base_item.baseitemid 
		 and t_item_ver.fverid=#fverid# 
	</select>
	
	<!-- 盘盈盘亏查询物料信息 -->
	<select id="BaseItem.findItem.takestock" resultMap="RM.BaseItem.findItem.takestock">
    	select top 10 t_base_item.baseitemid ,t_base_item.itemcode ,t_base_item.itemname ,t_base_item.formatno ,t_base_item.f_102,t_base_item.unitname,
    		t_base_item.forderprice,t_base_item.ftaxrate,t_base_item.f_101,t_base_item.responsible,t_base_item.supplierid,t_supplier.fname,t_admin.adminName,
    		t_base_item.unitid,t_base_item.isbatch,t_base_item.storage,t_base_item.fissnmanager,t_stock.fname stockName,t_base_item.fsaleprice,t_inventory_batch.fqty
    		,t_inventory_batch.batchno,t_inventory_batch.fqty
    		 
    		from t_base_item left join t_supplier on t_base_item.supplierid = t_supplier.supplierid
    		left join t_admin on t_base_item.responsible = t_admin.adminId 
    		left join t_stock  on t_base_item.storage = t_stock.fitemid 
    		left join t_inventory_batch on t_base_item.itemcode = t_inventory_batch.itemcode
    		
    		where 1 = 1
    		
    		<isNotEmpty prepend="AND" property="itemcode"> t_base_item.itemcode like ('%$itemcode$%')</isNotEmpty>
			<isNotEmpty prepend="AND" property="itemname"> t_base_item.itemname like ('%$itemname$%')</isNotEmpty>
    </select>
	
    <select id="BaseItem.findItem.porequest" resultMap="RM.BaseItem.findItem.porequest"><!-- 采购申请明细用、销售出库也用 -->
    	select top 10 t_base_item.baseitemid ,t_base_item.itemcode ,t_base_item.itemname ,t_base_item.formatno ,t_base_item.f_102,t_base_item.unitname,
    		t_base_item.forderprice,t_base_item.ftaxrate,t_base_item.f_101,t_base_item.responsible,t_base_item.supplierid,t_supplier.fname,t_admin.adminName,
    		t_base_item.unitid,t_base_item.isbatch,t_base_item.storage,t_base_item.fissnmanager,t_stock.fname stockName,t_base_item.fsaleprice,t_base_item.deptid,t_department.teamname
    		 
    		from t_base_item left join t_supplier on t_base_item.supplierid = t_supplier.supplierid
    		left join t_admin on t_base_item.responsible = t_admin.adminId 
    		left join t_stock  on t_base_item.storage = t_stock.fitemid 
    		left join t_department on t_base_item.deptid=t_department.teamid
    		
    		where 1 = 1 and t_base_item.detail=1
    		<isNotEmpty prepend="AND" property="itemcode"> t_base_item.itemcode like ('%$itemcode$%')</isNotEmpty>
			<isNotEmpty prepend="AND" property="itemname"> t_base_item.itemname like ('%$itemname$%')</isNotEmpty>
    </select>
    
    <select id="BaseItem.findItem.Poorder" resultMap="RM.BaseItem.findItem.porequest"><!-- 根据物料名称查询用于销售出库分录 -->
    	select top 10 t_base_item.baseitemid ,t_base_item.itemcode ,t_base_item.itemname ,t_base_item.formatno ,t_base_item.f_102,t_base_item.unitname,
    		t_base_item.forderprice,t_base_item.ftaxrate,t_base_item.f_101,t_base_item.responsible,t_base_item.supplierid,t_supplier.fname,t_admin.adminName,
    		t_base_item.unitid,t_base_item.isbatch,t_base_item.storage,t_base_item.fissnmanager,t_stock.fname stockName,t_base_item.fsaleprice,t_base_item.deptid,t_department.teamname
    		 
    		from t_base_item left join t_supplier on t_base_item.supplierid = t_supplier.supplierid
    		left join t_admin on t_base_item.responsible = t_admin.adminId 
    		left join t_stock  on t_base_item.storage = t_stock.fitemid 
    		left join t_department on t_base_item.deptid=t_department.teamid
    		where 1 = 1
    		<isNotEmpty prepend="AND" property="itemcode"> t_base_item.itemcode=#itemcode# </isNotEmpty>
			<isNotEmpty prepend="AND" property="itemname"> t_base_item.itemname=#itemname# </isNotEmpty>
    </select>

	<select id="BaseItem.getBaseByColumn" resultMap="RM.BaseItem.getBaseByColumn">
			select t_base_item.baseitemid ,t_base_item.itemcode ,t_base_item.itemname ,t_base_item.formatno,t_base_item.fullname
			from 
				t_base_item 
			where $columnName$=#columnValue#  
	</select>

	<select id="BaseItem.getpositionBycode" resultMap="RM.BaseItem.getpositionBycode">
			select t_base_item.baseitemid from t_base_item  
			where t_base_item.itemcode=#itemcode# 
	</select>

	<select id="BaseItem.getpositionBycode.finditemposition" resultMap="RM.BaseItem.itempositions">
				select t_item_postion.positionid 
				from t_item_postion  
				where t_item_postion.baseitemid=#baseitemid# 
	</select>
	
	<select id="BaseItem.pdkey.getByids" resultMap="RM.BaseItem.pdkey">
		select 	t_base_item.itemcode ,
        	t_base_item.itemname ,
        	t_base_item.formatno ,
        	t_base_item.f_102 f102
        	from t_base_item where baseitemid=#baseitemid# 			
	</select>




<select id="BaseItem.findPage.namecode.count" resultClass="long">
    <![CDATA[
        select 
        count(*)
        from t_base_item
    ]]>
		<include refid="BaseItem.findPage.where"/>    
    </select>
<select id="BaseItem.findPage.namecode" resultMap="RM.BaseItem.Page.namecode">
	    select t_base_item.baseitemid ,t_base_item.itemcode ,t_base_item.itemname ,t_base_item.formatno 
	    from t_base_item
	   where 1=1
	   <isNotEmpty property="notTop">
	   	   and baseitemid not in(select $notTop$ baseitemid from t_base_item 
	   	   where 1=1
			<isNotEmpty prepend="AND" property="itemcode">
	             t_base_item.itemcode like ('%$itemcode$%') 
	       </isNotEmpty>
	   	   
	   	   <isNotEmpty property="sortColumns"> ORDER BY $sortColumns$	</isNotEmpty>) 
	   	</isNotEmpty>    
	   	
	   	<isNotEmpty prepend="AND" property="itemcode">
	             t_base_item.itemcode like ('%$itemcode$%') 
	    </isNotEmpty>
	   	
    	<isNotEmpty property="sortColumns">
			ORDER BY $sortColumns$
		</isNotEmpty>
		
    </select>
    
    <select id="BaseItem.find.bitem" resultMap="RM.BaseItem.find.bitem"><!-- 查询 -->
			select t_base_item.fitemid,t_base_item.storage  from t_base_item  
			where t_base_item.itemcode=#itemcode# 
	</select>
	
	<select id="BaseItem.get.baseitemissn" resultMap="RM.BaseItem.find.bitem.issn"><!-- 查询包含是否序列号管理 -->
		select t_base_item.fitemid,t_base_item.storage,t_base_item.fissnmanager
		  from t_base_item  
			where t_base_item.itemcode=#itemcode#
	</select>
	
	
	
	 <select id="BaseItem.find.itemBase.find" resultMap="RM.BaseItem.find.bitem.finditembase"><!-- 查询物料内码 -->
			select t_base_item.fitemid,t_base_item.storage,t_base_item.unitid  from t_base_item  
			where t_base_item.itemcode=#itemcode# 
	</select>

	<!-- 待审出库单查询所有物料的库存及仓库 -->
 	<select id="BaseItem.find.listToInventory" resultMap="RM.BaseItem.find.listToInventory">
				
	    SELECT  t_base_item.baseitemid , t_base_item.itemcode , t_base_item.itemname , t_base_item.formatno ,
				 t_base_item.unitid ,t_base_item.unitname ,
				 t_base_item.unitname ,
				 t_base_item.isbatch ,
				 t_base_item.fissnmanager,
				 
				 t_inventory_batch.batchid,	
				 t_inventory_batch.batchno,
				 case t_inventory_batch.dbno when 3 then fqty-fqtylock when 4 then fqty2-fqtylock end fqtyreal,
				 t_inventory_batch.fitemid, t_stock.fname,t_inventory_batch.dbno
				 	
	    FROM
	        t_base_item ,t_inventory_batch left join t_stock on t_inventory_batch.fitemid=t_stock.fitemid
		where 
			 t_base_item.itemcode=t_inventory_batch.itemcode
			 and (case t_inventory_batch.dbno when 3 then fqty-fqtylock when 4 then fqty2-fqtylock end )>0
			<isNotEmpty prepend="AND" property="itemcode">
	             t_base_item.itemcode like ('%$itemcode$%') 
	    	</isNotEmpty>
		   	<isNotEmpty prepend="AND" property="itemname">
		         t_base_item.itemname like ('%$itemname$%') 
		    </isNotEmpty>
		    <isNotEmpty prepend="AND" property="fitemid">
		         t_inventory_batch.fitemid = #fitemid# 
		    </isNotEmpty>
		    <isNotEmpty prepend="AND" property="querydb">
		     t_inventory_batch.dbno=#querydb#
		    </isNotEmpty>
		    
				
	</select>

	<!-- 添加入库单查询所有物料的库存及仓库 -->
 	<select id="BaseItem.find.addlistToInventory" resultMap="RM.BaseItem.find.listToInventory">
				
	    SELECT  t_base_item.baseitemid , t_base_item.itemcode , t_base_item.itemname , t_base_item.formatno ,
				 t_base_item.unitid ,t_base_item.unitname ,
				 t_base_item.unitname ,
				 t_base_item.isbatch ,
				 t_base_item.fissnmanager,
				 
				 t_inventory_batch.batchid,	
				 t_inventory_batch.batchno,
				 case t_inventory_batch.dbno when 3 then fqty-fqtylock when 4 then fqty2-fqtylock end fqtyreal,
				 t_inventory_batch.fitemid, t_stock.fname,t_inventory_batch.dbno
	    FROM
	        t_base_item left join t_inventory_batch on t_base_item.itemcode=t_inventory_batch.itemcode
 left join t_stock on t_inventory_batch.fitemid=t_stock.fitemid
		
		where 
			 1=1
			<isNotEmpty prepend="AND" property="itemcode">
	             t_base_item.itemcode like ('%$itemcode$%') 
	    	</isNotEmpty>
		   	<isNotEmpty prepend="AND" property="itemname">
		         t_base_item.itemname like ('%$itemname$%') 
		    </isNotEmpty>
				
	</select>

<select id="BaseItem.getfitemid" resultMap="RM.BaseItem.getfitemid">
	select fitemid from t_base_item where itemcode=#itemcode#
</select>

    <select id="BaseItem.find.itemcode.in.itemStepInstructor" resultMap="RM.BaseItem.in.itemStepInstructor">
		select itemcode,baseitemid from t_base_item where baseitemid in ($baseitemids$)
	</select>
	
	<select id="BaseItem.findlistByIds" resultMap="RM.BaseItem">
	    select <include refid="BaseItem.columns"/>
	        from t_base_item 
	        where 
		        baseitemid in ($baseitemids$)
    </select>
	
	
	
	 <select id="BaseItem.material.assembly.scheme.findPage.count" resultClass="long"><!-- 物料装配方案 -->
   
        select 
        count(*)
        from t_base_item 
        left join t_area_pd
    	on t_base_item.baseitemid =t_area_pd.baseitemid
    		left join t_workarea
    	on t_area_pd.areaid =t_workarea.areaid
    	left join t_pd_nameplate on  t_base_item.baseitemid = t_pd_nameplate.baseitemid
        where 1=1  and t_base_item.itemproperty = 2	 and (t_base_item.itemcode like '081%' or t_base_item.itemcode like '080%' 
        or t_base_item.itemcode like '082%')	<include refid="BaseItem.findPage.and"/>
  
		  
    </select>
    
      <select id="BaseItem.material.assembly.scheme.findPage" resultMap="RM.BaseItem.materialAssembkyScheme">
    		SELECT 
    		t_base_item.baseitemid ,
        	t_base_item.itemcode ,
        	t_base_item.itemname ,
        	t_base_item.formatno ,
        	t_base_item.guideid,
        	t_base_item.craftid,
        	t_base_item.assembkyid,
        	t_base_item.crfis,
        	t_base_item.assis,
        	t_base_item.guideis,
        	t_workarea.areaname as areaName,
        	t_pd_nameplate.plateid plateid,
        	t_pd_nameplate.pnpid pnpid
        	
    	FROM 
    		t_base_item 
    		left join t_area_pd
    	on t_base_item.baseitemid =t_area_pd.baseitemid
    		left join t_workarea
    	on t_area_pd.areaid =t_workarea.areaid
    	
    	left join t_pd_nameplate on  t_base_item.baseitemid = t_pd_nameplate.baseitemid
    	
    	where 1=1  and  t_base_item.itemproperty = 2 and (t_base_item.itemcode like '081%' or t_base_item.itemcode like '080%' or t_base_item.itemcode like '082%')	
	   <isNotEmpty property="notTop">
	   	   and t_base_item.baseitemid not in(select $notTop$ t_base_item.baseitemid from t_base_item 
	   	   left join t_area_pd
    	on t_base_item.baseitemid =t_area_pd.baseitemid
    		left join t_workarea
    	on t_area_pd.areaid =t_workarea.areaid
    	
    	left join t_pd_nameplate on  t_base_item.baseitemid = t_pd_nameplate.baseitemid
	   	   
	   	  	where 1=1  and t_base_item.itemproperty = 2	 and (t_base_item.itemcode like '081%' or t_base_item.itemcode like '080%' or t_base_item.itemcode like '082%')
	   	  		<include refid="BaseItem.findPage.and"/>
	   	   <isNotEmpty property="sortColumns"> ORDER BY $sortColumns$	</isNotEmpty>) 
	   	</isNotEmpty>    
	   	<include refid="BaseItem.findPage.and"/>
    	<isNotEmpty property="sortColumns">
			ORDER BY $sortColumns$
		</isNotEmpty>
    </select>
    
    
    
    
    
    
    
    <select id="BaseItem.material.assembly.scheme.findPage.NEW.count" resultClass="long"><!-- 物料装配方案 新的查询-->
   
        select 
        count(*)
        from t_base_item 
        left join t_area_pd
    	on t_base_item.baseitemid =t_area_pd.baseitemid
    		left join t_workarea
    	on t_area_pd.areaid =t_workarea.areaid
    	left join t_pd_nameplate on  t_base_item.baseitemid = t_pd_nameplate.baseitemid
    	left join t_report_package on t_base_item.rpid = t_report_package.pid
        where 1=1  and t_base_item.itemproperty = 2	 and (t_base_item.itemcode like '081%' or t_base_item.itemcode like '080%' 
        or t_base_item.itemcode like '082%')	<include refid="BaseItem.findPage.and"/>
  			
		  
    </select>
    
      <select id="BaseItem.material.assembly.scheme.findPage.NEW" resultMap="RM.BaseItem.materialAssembkyScheme.NEW">
    		SELECT 
    		t_base_item.baseitemid ,
        	t_base_item.itemcode ,
        	t_base_item.itemname ,
        	t_base_item.formatno ,
        	t_base_item.guideid,
        	t_base_item.craftid,
        	t_base_item.assembkyid,
        	t_base_item.crfis,
        	t_base_item.assis,
        	t_base_item.guideis,
        	t_workarea.areaname as areaName,
        	t_area_pd.apid apid,
        	t_base_item.rpid,
        	t_report_package.fname fname
        	
    	FROM 
    		t_base_item 
    		left join t_area_pd
    	on t_base_item.baseitemid =t_area_pd.baseitemid
    		left join t_workarea
    	on t_area_pd.areaid =t_workarea.areaid
    	
    	left join t_pd_nameplate on  t_base_item.baseitemid = t_pd_nameplate.baseitemid
    	
    	left join t_report_package on t_base_item.rpid = t_report_package.pid
    	
    	where 1=1  and  t_base_item.itemproperty = 2 and (t_base_item.itemcode like '081%' or t_base_item.itemcode like '080%' or t_base_item.itemcode like '082%')	
	   <isNotEmpty property="notTop">
	   	   and t_base_item.baseitemid not in(select $notTop$ t_base_item.baseitemid from t_base_item 
	   	   left join t_area_pd
    	on t_base_item.baseitemid =t_area_pd.baseitemid
    		left join t_workarea
    	on t_area_pd.areaid =t_workarea.areaid
    	
    	left join t_pd_nameplate on  t_base_item.baseitemid = t_pd_nameplate.baseitemid
	   	 
	   	  left join t_report_package on t_base_item.rpid = t_report_package.pid 
	   	  	
	   	  	where 1=1  and t_base_item.itemproperty = 2	 and (t_base_item.itemcode like '081%' or t_base_item.itemcode like '080%' or t_base_item.itemcode like '082%')
	   	  		<include refid="BaseItem.findPage.and"/> group by t_base_item.baseitemid ,
        	t_base_item.itemcode ,
        	t_base_item.itemname ,
        	t_base_item.formatno ,
        	t_base_item.guideid,
        	t_base_item.craftid,
        	t_base_item.assembkyid,
        	t_base_item.crfis,
        	t_base_item.assis,
        	t_base_item.guideis,
        	areaName,apid,t_base_item.rpid,fname
	   	   <isNotEmpty property="sortColumns"> ORDER BY $sortColumns$	</isNotEmpty>) 
	   	</isNotEmpty>    
	   	<include refid="BaseItem.findPage.and"/>
	   	group by t_base_item.baseitemid ,
        	t_base_item.itemcode ,
        	t_base_item.itemname ,
        	t_base_item.formatno ,
        	t_base_item.guideid,
        	t_base_item.craftid,
        	t_base_item.assembkyid,
        	t_base_item.crfis,
        	t_base_item.assis,
        	t_base_item.guideis,
        	areaName,apid,t_base_item.rpid,fname
    	<isNotEmpty property="sortColumns">
			ORDER BY $sortColumns$
		</isNotEmpty>
    </select>
    
    
    
    
    
    
    <select id="BaseItem.find.data.for.guideid.all" resultMap="RM.BaseItem.find.guide.data"><!-- 查询装配记录 -->
	select baseitemid,itemcode,guideid,craftid from t_base_item where itemcode=#itemcode#
	</select>
    
    
    
     <select id="guideid.in.baseitem.find.Guide" resultMap="AssemblyGuide.RM.in.baseitem.data"><!-- 查询装配记录 -->
		select t_assembly_guide.guideid ,
        	t_assembly_guide.guidename ,
        	t_assembly_guide.createdate ,
        	t_assembly_guide.fexplain ,
        	t_assembly_guide.fversion 
        from  t_assembly_guide where guideid = #guideid#
	</select>
    
    <select id="ass.guideid.in.baseitem" resultMap="AssemblyGuideItem.RM.in.itembase">
    	 select t_assembly_guide_item.itemid ,
        	t_assembly_guide_item.guideid ,
        	t_assembly_guide_item.itemname ,
        	t_assembly_guide_item.fexplain 
	    
	        from t_assembly_guide_item 
	        where 
		        guideid = #guideid# 
    </select>
    
    
    <select id="BaseItem.findInKey.data" resultMap="RM.BaseItem.find.inItemKey">
		select 	t_base_item.itemcode ,
        	t_base_item.itemname ,
        	t_base_item.formatno ,
        	t_base_item.f_102 f102,t_base_item.itemproperty,t_base_item.topicid
        	from t_base_item where itemcode=#itemcode# 			
	</select>
	

	
	<select id="BaseItem.key.itemcode.findData.findPage.count" resultClass="long"><!-- 关键件列表用 -->
   
        select 
        count(*)
        from t_base_item 
        left join (select t_pd_key.itemcode  from t_pd_key where 1=1 
         <isNotEmpty prepend="AND" property="keycode">
	        	 t_pd_key.keycode like ('%$keycode$%')
	        </isNotEmpty>
        		group by itemcode)
         t_pd_key  on t_base_item.itemcode = t_pd_key.itemcode 
        where 1=1  and t_base_item.itemproperty = 2	 and (t_base_item.itemcode like '081%' or t_base_item.itemcode like '080%'
         or t_base_item.itemcode like '082%')
         <isNotEmpty prepend="AND" property="keycode">
	        	 t_base_item.itemcode = t_pd_key.itemcode 
	     </isNotEmpty>
         	<include refid="BaseItem.findPage.and"/>
  
		  
    </select>
    
      <select id="BaseItem.key.itemcode.findData.findPage" resultMap="RM.BaseItem.find.keyitemcode">
    		SELECT 
    		t_base_item.baseitemid ,
        	t_base_item.itemcode ,
        	t_base_item.itemname ,
        	t_base_item.formatno ,
        	t_pd_key.itemcode pdkey
        	
    	FROM 
    		t_base_item 
    		left join (select t_pd_key.itemcode  from t_pd_key 
    		where 1=1 
         <isNotEmpty prepend="AND" property="keycode">
	        	 t_pd_key.keycode like ('%$keycode$%')
	        </isNotEmpty>
    		group by itemcode) t_pd_key on t_base_item.itemcode = t_pd_key.itemcode 
    	where 1=1  and  t_base_item.itemproperty = 2 and (t_base_item.itemcode like '081%' or t_base_item.itemcode like '080%' 
    	or t_base_item.itemcode like '082%')
    	 <isNotEmpty prepend="AND" property="keycode">
	        	 t_base_item.itemcode = t_pd_key.itemcode 
	     </isNotEmpty>	
	   <isNotEmpty property="notTop">
	   	   and baseitemid not in(select $notTop$ baseitemid from t_base_item
	   	   left join (select t_pd_key.itemcode  from t_pd_key 
	   	   where 1=1 
         <isNotEmpty prepend="AND" property="keycode">
	        	 t_pd_key.keycode like ('%$keycode$%')
	        </isNotEmpty>
	   	   group by itemcode) t_pd_key  on t_base_item.itemcode = t_pd_key.itemcode  
	   	  	where 1=1  and t_base_item.itemproperty = 2	 and (t_base_item.itemcode like '081%' or t_base_item.itemcode like '080%' 
	   	  	or t_base_item.itemcode like '082%')
	   	  	 <isNotEmpty prepend="AND" property="keycode">
	        	 t_base_item.itemcode = t_pd_key.itemcode 
	   		  </isNotEmpty>
	   	  		<include refid="BaseItem.findPage.and"/>
	   	  	
	   	   <isNotEmpty property="sortColumns"> ORDER BY $sortColumns$	</isNotEmpty>) 
	   	</isNotEmpty>    
	   	<include refid="BaseItem.findPage.and"/>
    	<isNotEmpty property="sortColumns">
			ORDER BY $sortColumns$
		</isNotEmpty>
    </select>
    
    <select id="BaseItem.Trial.findPagebind.count" resultClass="long">
   
        select 
        count(*)
        from t_base_item 
		  left join t_pd_trail_tpl on t_base_item.itemcode = t_pd_trail_tpl.itemcode 
		  where 
		   1=1
	    	and t_base_item.itemcode 
	    	in( select itemcode from  t_base_item where  t_base_item.itemcode  like '080%' or t_base_item.itemcode like '081%' or t_base_item.itemcode like '082%')	
			<include refid="BaseItem.findPage.and"/>	
		  
    </select>
    
      <select id="BaseItem.Trial.findPagebind" resultMap="RM.BaseItem.Trial.findPagebind">
    SELECT 
t_base_item.baseitemid,t_base_item.itemcode,t_base_item.itemname,t_pd_trail_tpl.rid,t_base_item.formatno
    	FROM 
    		t_base_item 
    		left join t_pd_trail_tpl on t_base_item.itemcode = t_pd_trail_tpl.itemcode
    	where   
    	1=1
    	and t_base_item.itemcode 
	    	in( select itemcode from  t_base_item where  t_base_item.itemcode  like '080%' or t_base_item.itemcode like '081%' or t_base_item.itemcode like '082%')
	   <isNotEmpty property="notTop" >
	   	   and baseitemid not in(
	   	   select $notTop$ baseitemid 
	   	   from t_base_item
	   	   left join t_pd_trail_tpl on t_base_item.itemcode = t_pd_trail_tpl.itemcode
	   	   	where
	   	   	1=1
	    	and t_base_item.itemcode 
	    	in( select itemcode from  t_base_item where  t_base_item.itemcode  like '080%' or t_base_item.itemcode like '081%' or t_base_item.itemcode like '082%')
	   	   	<include refid="BaseItem.findPage.and"/>
	   	   <isNotEmpty property="sortColumns"> ORDER BY $sortColumns$	</isNotEmpty>) 
	   	</isNotEmpty>    
	   	<include refid="BaseItem.findPage.and"/>
    	<isNotEmpty property="sortColumns">
			ORDER BY $sortColumns$
		</isNotEmpty>
    </select>
    
     <select id="BaseItem.Trial.findPageUnbind.count" resultClass="long">
   
        select 
        count(*)
        from t_base_item
        left join t_pd_trail_tpl on t_base_item.itemcode = t_pd_trail_tpl.itemcode 
		  where 
		  1=1
		  <isNotEmpty property="isaddtrial" >
				and t_base_item.itemcode not in(
				select itemcode from t_pd_trail_tpl where tplid=#trialid#
				)
		    </isNotEmpty>
			<include refid="BaseItem.findPage.and"/>	
		  
    </select>
    
      <select id="BaseItem.Trial.findPageUnbind" resultMap="RM.BaseItem.Trial.findPagebind">
    SELECT 
    		t_base_item.baseitemid,t_base_item.itemcode,t_base_item.itemname,t_pd_trail_tpl.rid,t_base_item.formatno
    	FROM 
    		t_base_item 
    		left join t_pd_trail_tpl on t_base_item.itemcode = t_pd_trail_tpl.itemcode
    	where  
    	1=1
    		<isNotEmpty property="isaddtrial" >
				and t_base_item.itemcode not in(
				select itemcode from t_pd_trail_tpl where tplid=#trialid#
				)
		    </isNotEmpty>		
	   <isNotEmpty property="notTop" >
	   	   and baseitemid not in(
	   	   select $notTop$ baseitemid 
	   	   from t_base_item
	   	   left join t_pd_trail_tpl on t_base_item.itemcode = t_pd_trail_tpl.itemcode
	   	   	where 
	   	   	1=1
	   	   <isNotEmpty property="isaddtrial" >
				and t_base_item.itemcode not in(
				select itemcode from t_pd_trail_tpl where tplid=#trialid#
				)
		    </isNotEmpty>
	   	   	<include refid="BaseItem.findPage.and"/>
	   	   <isNotEmpty property="sortColumns"> ORDER BY $sortColumns$	</isNotEmpty>) 
	   	</isNotEmpty>    
	   	<include refid="BaseItem.findPage.and"/>
    	<isNotEmpty property="sortColumns">
			ORDER BY $sortColumns$
		</isNotEmpty>
    </select>
    
    
    <select id="BaseItem.findPage.serialNumber.management.count" resultClass="long"><!-- 序列号管理列表查询 -->
    
        select 
        count(*)
        from t_base_item
         left join t_inventory_batch on t_base_item.itemcode = t_inventory_batch.itemcode 
		    left join t_stock on t_inventory_batch.fitemid = t_stock.fitemid
    	where 1=1 and t_base_item.fissnmanager = 1 and (t_inventory_batch.fqty>0 or t_inventory_batch.fqty2>0 )
		<include refid="BaseItem.findPage.and"/>    
    </select>
	<select id="BaseItem.findPage.serialNumber.management" resultMap="RM.BaseItem.serialNum.management">
		    select t_base_item.baseitemid ,t_base_item.itemcode ,t_base_item.itemname ,t_base_item.formatno,t_base_item.fissnmanager,t_inventory_batch.fqty,t_inventory_batch.fqty2,
		    t_inventory_batch.dbno,t_stock.fname stockName,t_inventory_batch.fitemid
		    from t_base_item
		    left join t_inventory_batch on t_base_item.itemcode = t_inventory_batch.itemcode 
		    left join t_stock on t_inventory_batch.fitemid = t_stock.fitemid
		   where 1=1 and t_base_item.fissnmanager = 1 and (t_inventory_batch.fqty>0 or t_inventory_batch.fqty2>0 )	
		   <isNotEmpty property="notTop">
		   	   and baseitemid not in(select $notTop$ baseitemid from t_base_item 
		   	  left join t_inventory_batch on t_base_item.itemcode = t_inventory_batch.itemcode 
		    left join t_stock on t_inventory_batch.fitemid = t_stock.fitemid
		   where 1=1 and t_base_item.fissnmanager = 1 and (t_inventory_batch.fqty>0 or t_inventory_batch.fqty2>0 )	
				<include refid="BaseItem.findPage.and"/>
		   	   <isNotEmpty property="sortColumns"> ORDER BY $sortColumns$	</isNotEmpty>) 
		   	</isNotEmpty>  
		   	<include refid="BaseItem.findPage.and"/> 
	    	<isNotEmpty property="sortColumns">
				ORDER BY $sortColumns$
			</isNotEmpty>
			
	    </select>
    
    <select id="BaseItem.getentity.for.baseid" resultMap="BaseItem.getentity.result"><!-- 查询 -->
		select 	t_base_item.baseitemid,
			t_base_item.itemcode ,
        	t_base_item.itemname ,
        	t_base_item.formatno 
        
        	from t_base_item where t_base_item.baseitemid=#baseitemid# 			
	</select>

	 <select id="baseitem.platename.data.forSelect" resultMap="RM.PdNameplate.data.in.Baseitem"><!-- 查询 -->
		select 	t_pd_nameplate.pnpid ,
        	t_pd_nameplate.plateid ,
        	t_pd_nameplate.itemcode ,
        	t_pd_nameplate.baseitemid ,
        	t_nameplate.platename platename
        
        	from t_pd_nameplate left join t_nameplate on t_pd_nameplate.plateid=t_nameplate.plateid
        	where 1=1
        	<isNotEmpty prepend="AND" property="pnpid">
	             t_pd_nameplate.pnpid = #pnpid#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="plateid">
	             t_pd_nameplate.plateid = #plateid#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="itemcode">
	             t_pd_nameplate.itemcode = #itemcode#
	       </isNotEmpty>
	       
			<isNotEmpty prepend="AND" property="baseitemid">
	             t_pd_nameplate.baseitemid = #baseitemid#
	       </isNotEmpty>		
	</select>
	
	

     <select id="BaseItem.findPage.SN.count" resultClass="Long">
       select count(*)
	    from 
		t_icserial
		where 1=1
		<isNotEmpty prepend="AND" property="itemcode">
				itemcode=#itemcode#
			</isNotEmpty>		
			<isNotEmpty prepend="AND" property="itemsn">
				fserialnum =(#itemsn#)
			</isNotEmpty>	
     </select>
     
 <!--根据物料代码和序列号查询物料集合,第一查询  -->   
     <select id="BaseItem.findPage.SN" resultMap="RM.BaseItem.findPage.SN">
	    select 
		   t_icserial.itemcode
		   ,t_icserial.fserialnum itemsn
		   ,c.fqty
		   ,1 inputfqty
			<isEmpty property="createdateBegin">
		   	,CONVERT(varchar(50),'2000-01-01',120) createdateBegin
		   </isEmpty>
		   <isEmpty property="createdateEnd">
		   	,getdate() createdateEnd
		   </isEmpty>
		   <isNotEmpty property="createdateBegin">
		   ,#createdateBegin# createdateBegin
		   </isNotEmpty>
		   <isNotEmpty property="createdateEnd">
		   ,#createdateEnd# createdateEnd
		   </isNotEmpty>
		   
		   
	    from 
		t_icserial
				left join (
					select itemcode,batchno,sum(case dbno when 3 then fqty when 4 then fqty2 end  ) fqty
					from  t_inventory_batch 
					group by itemcode,batchno 
					) c on t_icserial.itemcode=c.itemcode 
		where 1=1
		
		  <isNotEmpty property="notTop" >
	   	   and serialid not in(
	   	   select $notTop$ serialid 
	   	   from t_icserial
		   	where 1=1
		   	   <isNotEmpty prepend="AND" property="itemcode">
				t_icserial.itemcode=#itemcode#
			</isNotEmpty>		
			<isNotEmpty prepend="AND" property="itemsn">
				t_icserial.fserialnum =(#itemsn#)
			</isNotEmpty>	
			
	   	   ) 
	   	</isNotEmpty> 
		
		<isNotEmpty prepend="AND" property="itemcode">
			t_icserial.itemcode=#itemcode#
		</isNotEmpty>		
		<isNotEmpty prepend="AND" property="itemsn">
			t_icserial.fserialnum =(#itemsn#)
		</isNotEmpty>	
		
		
		
    </select>
    
  
    
    
    
    
   <!--根据入库物料代码和序列号查询领料单,序列号入库的查询  --> 
    
    <select id="BaseItem.findpicking.SN" resultMap="RM.BaseItem.findpicking.SN">
	    select 
		     pickingid
		    ,fbillno
		    ,fdate
		    ,itemcode
		    ,1 fqty
	    from 
		v_pickingdetail_fbillno
		where 1=1
		<isNotEmpty prepend="AND" property="itemcode">
			itemcode=#itemcode#
		</isNotEmpty>		
		<isNotEmpty prepend="AND" property="itemsn">
			batchno in(#itemsn#)
		</isNotEmpty>		
		group by 
			pickingid
		    ,fbillno
		    ,fdate
		    ,itemcode
    </select>
    
    <!--由入库物料代码和序列号获取任务单,任务单包含入库单,入库单中有入库物料  -->
    <select id="BaseItem.findpicking.SN.findTask" resultMap="RM.BaseItem.findpicking.SN.findTask.Next">
	    select 
	    v_assembly_task_icmo.fbillno
	    ,v_assembly_task_icmo.fbillnoid
	    ,v_assembly_task_icmo.createdate
	    ,#itemsn# batchno
	    ,v_assembly_task_icmo.itemcode
	    ,t_base_item.isbatch
	    from v_assembly_task_icmo
	    left join t_base_item on v_assembly_task_icmo.itemcode=t_base_item.itemcode  
	    where v_assembly_task_icmo.fbillno in(
	    select 
		    fsourcebillno 
	    from 
		v_pickingdetail_fbillno
		where 1=1
		<isNotEmpty prepend="AND" property="itemcode">
			v_pickingdetail_fbillno.itemcode=#itemcode#
		</isNotEmpty>		
		<isNotEmpty prepend="AND" property="itemsn">
			v_pickingdetail_fbillno.batchno in(#itemsn#)
		</isNotEmpty>		
		group by fsourcebillno 
		)
		group by v_assembly_task_icmo.fbillno
	    ,v_assembly_task_icmo.fbillnoid
	    ,v_assembly_task_icmo.createdate
	    ,v_assembly_task_icmo.itemcode
	    ,t_base_item.isbatch
    </select>
    <!-- 质检单集合 -->
    <select id="BaseItem.findpicking.SN.findTask.findchecklist" resultMap="RM.BaseItem.findpicking.SN.findTask.findchecklist">
    	select qmid,fbillno,fbilldate from 
    	(select 
    		t_pd_qm.qmid
	    	,t_pd_qm.fbillno
	    	,t_pd_qm.fbilldate
	    	,t_pd_qm.ficmobillno
    	from t_pd_qm 
    	union all
	    	select 
	    		t_check_record.checkid qmid
		    	,t_check_record.fbillno
		    	,t_check_record.createtime fbilldate
		    	,t_icmo.fbillno ficmobillno
	    	from t_check_record left join t_icmo on t_check_record.workid=t_icmo.icmoid
	    union all
	    	 select 
				t_item_wait.waitid qmid
				,t_item_wait.reportno fbillno
				,t_item_wait.createdate fbilldate
				,t_item_wait.poorderno ficmobillno
			
			from t_item_wait where t_item_wait.poorderno is not null
	    	) c
    	where 1=1
    	<isNotEmpty prepend="AND" property="fbillno">
			c.ficmobillno=#fbillno#
		</isNotEmpty>
    	
    </select>
    
    
    <!-- 外购质检单集合 -->
    <select id="BaseItem.findpicking.buy.findTask.findchecklist" resultMap="RM.BaseItem.findpicking.SN.findTask.findchecklist">
    	select qmid,fbillno,fbilldate from 
    	( select 
				t_item_wait.waitid qmid
				,t_item_wait.reportno fbillno
				,t_item_wait.createdate fbilldate
				,t_item_wait.poorderno ficmobillno
				,t_item_wait.itemcode
			
			from t_item_wait where t_item_wait.poorderno is not null
	    	) c
    	where 1=1
    	<isNotEmpty prepend="AND" property="fbillno">
			c.ficmobillno=#fbillno#
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="itemcode">
			c.itemcode=#itemcode#
		</isNotEmpty>
    	
    	
    </select>
    
    
    
    
    <!-- 入库单集合,查询入库单和入库物料,及序列号 -->
    
    
    <select id="BaseItem.findpicking.SN.findTask.findPutstorage" resultMap="RM.BaseItem.findpicking.SN.findTask.findPutstorage">
    	select 
    		  c.finterid
    		 ,c.fbillno
    		 ,c.creatdate
    		 ,c.itemcode 
    	from 
    	
    	(	select
    		 t_putstorage.finterid
    		 ,t_putstorage.fbillno
    		 ,t_putstorage.creatdate
    		 ,t_putstorageentity.itemcode 
    		from t_putstorageentity 
		left join t_putstorage on t_putstorageentity.finterid= t_putstorage.finterid
		where 1=1
    	<isNotEmpty prepend="AND" property="fbillno">
			t_putstorageentity.poorderno =#fbillno#
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="batchno">
			t_putstorageentity.fbatchno =#batchno#
		</isNotEmpty>
		
		group by
		t_putstorage.finterid
    		 ,t_putstorage.fbillno
    		 ,t_putstorage.creatdate
    		 ,t_putstorageentity.itemcode 
		union all
		
		select 
				t_putstorage.finterid
    		 ,t_putstorage.fbillno
    		 ,t_putstorage.creatdate
    		 ,t_putstorageentity.itemcode
		from 
		t_putstorageentity 
		left join t_icserial on t_putstorageentity.entityid=t_icserial.finterid
		left join t_putstorage on t_putstorageentity.finterid=t_putstorage.finterid
		where 
		t_putstorageentity.poorderno like('%JiJia%') 
		and t_icserial.ftrantypeid=85
		<isNotEmpty prepend="AND" property="fbillno">
			t_putstorageentity.poorderno =#fbillno#
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="batchno">
			t_icserial.fserialnum =#batchno#
		</isNotEmpty>
		group by 
				t_putstorage.finterid
		    		 ,t_putstorage.fbillno
		    		 ,t_putstorage.creatdate
		    		 ,t_putstorageentity.itemcode
		) c
		
		
		
    </select>
    
    
    
    <!-- 外购入库单集合,查询入库单和入库物料,及序列号 -->
    <select id="BaseItem.findpicking.buy.findTask.findPutstorage" resultMap="RM.BaseItem.findpicking.SN.findTask.findPutstorage">
    		select
    		 t_putstorage.finterid
    		 ,t_putstorage.fbillno
    		 ,t_putstorage.creatdate
    		 ,t_putstorageentity.itemcode 
    		from t_putstorageentity 
		left join t_putstorage on t_putstorageentity.finterid= t_putstorage.finterid
		where 1=1
    	<isNotEmpty prepend="AND" property="fbillno">
			t_putstorageentity.poorderno =#fbillno#
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="batchno">
			t_putstorageentity.fbatchno =#batchno#
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="itemcode">
			t_putstorageentity.itemcode =#itemcode#
		</isNotEmpty>
		
		group by
		t_putstorage.finterid
    		 ,t_putstorage.fbillno
    		 ,t_putstorage.creatdate
    		 ,t_putstorageentity.itemcode 
		
    </select>
    
    
    
    
    <select id="BaseItem.findpicking.SN.findTask.findPutstorage.next" resultMap="RM.BaseItem.findpicking.SN.findTask.findPutstorage">
    		select
    		 t_putstorage.finterid
    		 ,t_putstorage.fbillno
    		 ,t_putstorage.creatdate
    		 ,t_putstorageentity.itemcode 
    		from t_putstorageentity 
		left join t_putstorage on t_putstorageentity.finterid= t_putstorage.finterid
		where 1=1
    	<isNotEmpty prepend="AND" property="fbillno">
			t_putstorageentity.poorderno =#fbillno#
		</isNotEmpty>
		group by
		t_putstorage.finterid
    		 ,t_putstorage.fbillno
    		 ,t_putstorage.creatdate
    		 ,t_putstorageentity.itemcode 
		
    </select>
    
    
    
    
    <!-- 序列号集合查询 -->
	<select id="BaseItem.findpicking.SN.findTask.findPutstorage.findSN" resultMap="RM.BaseItem.findpicking.SN.findTask.findPutstorage.findSN">
		select 
			fbatchno
		from t_putstorageentity
		where 1=1
		<isNotEmpty prepend="AND" property="itemcode">
			itemcode=#itemcode#
		</isNotEmpty> 
		<isNotEmpty prepend="AND" property="finterid">
			finterid=#finterid#
		</isNotEmpty> 
	</select>

    
    <select id="BaseItem.getitem.SN" resultMap="RM.BaseItem.getitem.SN">
    	select 
    	itemcode,#itemsn# itemsn  
    	from t_base_item
    	where 1=1
    	<isNotEmpty prepend="AND" property="itemcode">
    		itemcode=#itemcode#
    	</isNotEmpty>
    
    </select>
    <!-- 根据任务单物料,获取任务单的领料单 -->
    <select id="BaseItem.findpickingByFbillno.SN" resultMap="RM.BaseItem.findpickingByFbillno.SN">
        select 
        t_picking.pickingid
        ,t_picking.fbillno
        ,t_picking.fdate
		from 
		t_picking_detail left join t_picking 
		on t_picking_detail.pickingid=t_picking.pickingid
		where ficmobillno in(
					 select 
					    v_assembly_task_icmo.fbillno
					    
					    from v_assembly_task_icmo
					    where v_assembly_task_icmo.fbillno in(
					    select 
						    fsourcebillno 
					    from 
						v_pickingdetail_fbillno
						where 1=1
						<isNotEmpty prepend="AND" property="itemcode">
							itemcode=#itemcode#
						</isNotEmpty>		
						<isNotEmpty prepend="AND" property="itemsn">
							batchno in(#itemsn#)
						</isNotEmpty>		
						group by fsourcebillno 
						)
						group by v_assembly_task_icmo.fbillno		
		)
		group by t_picking.pickingid,t_picking.fbillno,t_picking.fdate
	    
    </select>
    
	<select id="BaseItem.findpicking.SN.findTaskitem" resultMap="RM.BaseItem.findpicking.SN.findTask">
	select 
			c.fbillno
			,c.fbillnoid
			,c.createdate
			,c.batchno
			,c.itemcode
			,c.isbatch
			
	 from 
	(	select 
			t_picking.fsourcebillno fbillno
			,v_assembly_task_icmo.fbillnoid fbillnoid
			,v_assembly_task_icmo.createdate createdate
			,t_picking.seqcode batchno
			,t_picking.itemcode
			,t_base_item.isbatch
			
		from t_picking
		left join v_assembly_task_icmo
		on t_picking.fsourcebillno=v_assembly_task_icmo.fbillno
		left join t_base_item on t_picking.itemcode=t_base_item.itemcode
		 where
		1=1
		<isNotEmpty prepend="AND" property="createdateBegin">
		 v_assembly_task_icmo.createdate &gt;= #createdateBegin#
		 </isNotEmpty>
  		<isNotEmpty prepend="AND" property="createdateEnd">
		 v_assembly_task_icmo.createdate &lt;= #createdateEnd#
		 </isNotEmpty>
		
		<isNotEmpty prepend="AND" property="itemcode">
		 t_picking.itemcode=#itemcode#
		 </isNotEmpty>
		 <isNotEmpty prepend="AND" property="itemsn">
		 t_picking.seqcode=#itemsn#
		 </isNotEmpty>
		group by 
		t_picking.fsourcebillno
		,v_assembly_task_icmo.fbillnoid
		,v_assembly_task_icmo.createdate
		,t_picking.itemcode
		,t_picking.seqcode
		,t_base_item.isbatch
		union all
		select 
			t_putstorageentity.poorderno fbillno
			,t_icmo.icmoid fbillnoid
			,t_icmo.createdate
			,t_icserial.fserialnum batchno
		 	,t_icmo.itemcode
			,t_base_item.isbatch
		from t_icserial 
		left join  t_putstorageentity   on t_putstorageentity.entityid=t_icserial.finterid
		left join t_icmo on  t_icmo.fbillno=t_putstorageentity.poorderno
		left join t_base_item on t_icmo.itemcode=t_base_item.itemcode
		
		where 
		t_putstorageentity.poorderno like('%JiJia%') 
		and t_icserial.ftrantypeid=85
		<isNotEmpty prepend="AND" property="createdateBegin">
		 t_icmo.createdate &gt;= #createdateBegin#
		 </isNotEmpty>
  		<isNotEmpty prepend="AND" property="createdateEnd">
		 t_icmo.createdate &lt;= #createdateEnd#
		 </isNotEmpty>
		<isNotEmpty prepend="AND" property="itemcode">
		 t_icmo.itemcode=#itemcode#
		 </isNotEmpty>
		 <isNotEmpty prepend="AND" property="itemsn">
		 t_icserial.fserialnum=#itemsn#
		 </isNotEmpty>	
			
			
		group by 	t_icmo.icmoid
			,t_putstorageentity.poorderno
			,t_icserial.fserialnum
			,t_icmo.createdate
			,t_icmo.itemcode
			,t_base_item.isbatch 
				
		) c
		
		
		
	</select>
    
    
    <!-- 批次管理的物料,查询任务单 -->
    <select id="BaseItem.findpicking.batch.findTaskitem" resultMap="RM.BaseItem.findpicking.batch.findTask">
		select 
			t_icmo.icmoid fbillnoid
			,t_icmo.fbillno fbillno
			,t_icmo.createdate
			,t_work_plan.batchno
			,t_icmo.itemcode	
			,t_base_item.isbatch
		from t_icmo 
		left join t_work_plan on t_icmo.fbillno=t_work_plan.fbillno
		left join t_base_item on t_icmo.itemcode=t_base_item.itemcode
		where  isdel!=-1 
		
 		<isNotEmpty prepend="AND" property="createdateBegin">
		 t_icmo.createdate &gt;= #createdateBegin#
		 </isNotEmpty>
  		<isNotEmpty prepend="AND" property="createdateEnd">
		 t_icmo.createdate &lt;= #createdateEnd#
		 </isNotEmpty>
 
		<isNotEmpty prepend="AND" property="itemcode">
		 t_icmo.itemcode=#itemcode#
		 </isNotEmpty>
		 <isNotEmpty prepend="AND" property="itemsn">
		 t_work_plan.batchno=#itemsn#
		 </isNotEmpty>
		
	</select>
    
    
    
    <select id="BaseItem.findpicking.SN.findTask.findpickinglist" resultMap="RM.BaseItem.findpicking.SN">
    		select
	    		t_picking.pickingid
	    		,t_picking.itemcode 
	    		,t_picking.fbillno
	    		,t_picking.fdate 
	    		,1 fqty
    		from t_picking
    			left join t_picking_detail  
				on t_picking.pickingid=t_picking_detail.pickingid   
    		where 
    		t_picking.fsourcebillno=#fbillno#
    		<isNotEmpty prepend="AND" property="batchno">
    		t_picking.seqcode=#batchno#
    		</isNotEmpty>
    		
    		and t_picking.fstatus=1
    		group by 	    		t_picking.pickingid
	    		,t_picking.itemcode 
	    		,t_picking.fbillno
	    		,t_picking.fdate 
    		 
    </select>
    
    <select id="BaseItem.findpicking.SN.findTask.findpickinglist.next" resultMap="RM.BaseItem.findpicking.SN">
    		select
	    		t_picking.pickingid
	    		,t_picking.itemcode 
	    		,t_picking.fbillno
	    		,t_picking.fdate 
	    		,1 fqty
    		from t_picking
    			left join t_picking_detail  
				on t_picking.pickingid=t_picking_detail.pickingid   
    		where 
    		t_picking.fsourcebillno=#fbillno#
    		<isNotEmpty prepend="AND" property="batchno">
    		t_picking_detail.batchno=#batchno#
    		</isNotEmpty>
    		
    		and t_picking.fstatus=1
    		group by 	    		t_picking.pickingid
	    		,t_picking.itemcode 
	    		,t_picking.fbillno
	    		,t_picking.fdate 
    		 
    </select>
    
    
    
    
    
    
    <select id="BaseItem.findpicking.batch.findTask.findpickinglist" resultMap="RM.BaseItem.findpicking.SN">
    		select
	    		t_picking.pickingid
	    		,t_picking.itemcode 
	    		,t_picking.fbillno
	    		,t_picking.fdate 
	    		,t_picking_detail.fqty
    		from t_picking
    			left join t_picking_detail  
				on t_picking.pickingid=t_picking_detail.pickingid   
    		where 
    		t_picking.fsourcebillno=#fbillno#
    		and t_picking.fstatus=1
    		 
    </select>
    
    
    
    
    <select id="BaseItem.findPage.batchno.count" resultClass="Long">
       
       select count(*) from (select 
		   itemcode
		, t_inventory_batch.batchno
	    from 
		t_inventory_batch
		where t_inventory_batch.batchno!=''
		<isNotEmpty prepend="AND" property="itemcode">
			itemcode=#itemcode#
		</isNotEmpty>		
		<isNotEmpty prepend="AND" property="itemsn">
			batchno =(#itemsn#)
		</isNotEmpty>	
		group by t_inventory_batch.batchno,t_inventory_batch.itemcode
		) c
    </select>
    
<!--根据物料代码和批次号查询物料集合,第一查询,批次号查询  -->   
     <select id="BaseItem.findPage.batchno" resultMap="RM.BaseItem.findPage.batch">
	    select 
		   t_inventory_batch.itemcode
		   ,t_inventory_batch.batchno itemsn
		   ,c.fqty
		   ,b.fqty inputfqty
		   <isEmpty property="createdateBegin">
		   	,CONVERT(varchar(50),'2000-01-01',120) createdateBegin
		   </isEmpty>
		   <isEmpty property="createdateEnd">
		   	,getdate() createdateEnd
		   </isEmpty>
		   <isNotEmpty property="createdateBegin">
		   ,#createdateBegin# createdateBegin
		   </isNotEmpty>
		   <isNotEmpty property="createdateEnd">
		   ,#createdateEnd# createdateEnd
		   </isNotEmpty>
		   
	    from 
		t_inventory_batch
		left join (
					select itemcode,batchno,sum(case dbno when 3 then fqty when 4 then fqty2 end  ) fqty
					from  t_inventory_batch 
					group by itemcode,batchno 
					) c on t_inventory_batch.itemcode=c.itemcode and t_inventory_batch.batchno=c.batchno
		left join	
		(select itemcode,fbatchno,sum(fqty) fqty
			from t_putstorageentity 
			group by itemcode,fbatchno ) b
			on c.itemcode=b.itemcode and c.batchno=b.fbatchno
		
		where t_inventory_batch.batchno!=''
		
		  <isNotEmpty property="notTop" >
	   	   and t_inventory_batch.batchno not in(
	   	   select $notTop$ t_inventory_batch.batchno  
	   	   from t_inventory_batch
		   	where t_inventory_batch.batchno!=''
		   	   <isNotEmpty prepend="AND" property="itemcode">
				t_inventory_batch.itemcode=#itemcode#
			</isNotEmpty>		
			<isNotEmpty prepend="AND" property="itemsn">
				t_inventory_batch.batchno  =(#itemsn#)
			</isNotEmpty>	
			
	   	   ) 
	   	</isNotEmpty> 
		
		<isNotEmpty prepend="AND" property="itemcode">
			t_inventory_batch.itemcode=#itemcode#
		</isNotEmpty>		
		<isNotEmpty prepend="AND" property="itemsn">
			t_inventory_batch.batchno =(#itemsn#)
		</isNotEmpty>	
		
		group by t_inventory_batch.batchno,t_inventory_batch.itemcode,c.fqty,b.fqty
		
    </select>    


<select id="BaseItem.findList.getbatch" resultMap="RM.BaseItem.findList.getbatch">
	select 
	itemcode
	,batchno itemsn 
	from t_inventory_batch 
	where batchno!='' 
	<isNotEmpty prepend="AND" property="itemcode">
	itemcode =#itemcode# 
	</isNotEmpty>
	<isNotEmpty prepend="AND" property="itemsn">
	batchno like ('%$itemsn$%')
	</isNotEmpty>
	
	group by itemcode,batchno		
</select>

<select id="BaseItem.findList.getSN" resultMap="RM.BaseItem.findList.getbatch">
	select 
	itemcode
	,fserialnum  itemsn
	 
	from t_icserial 
	where 1=1
	<isNotEmpty prepend="AND" property="itemcode">
	itemcode =#itemcode# 
	</isNotEmpty>
	<isNotEmpty prepend="AND" property="itemsn">
	fserialnum like ('%$itemsn$%')
	</isNotEmpty>
	group by itemcode,fserialnum 

</select>


<select id="BaseItem.getBaseFqty" resultMap="RM.BaseItem.getBaseFqty">
	select 
		t_base_item.itemcode,
		t_base_item.itemname,
		t_base_item.formatno,
		c.fqty
		from t_base_item
		left join 
		(select itemcode,(sum(fqty)+sum(fqty2)) fqty
 			from t_inventory_batch group by itemcode
		 ) c on t_base_item.itemcode=c.itemcode
		where t_base_item.itemcode=#itemcode#
</select>


 <select id="BaseItem.findPage.buy.batchno.count" resultClass="Long">
       
       select count(*) from (select 
		   itemcode
		, t_inventory_batch.batchno
	    from 
		t_inventory_batch
		where t_inventory_batch.batchno!=''
		<isNotEmpty prepend="AND" property="itemcode">
			itemcode=#itemcode#
		</isNotEmpty>		
		<isNotEmpty prepend="AND" property="itemsn">
			batchno =(#itemsn#)
		</isNotEmpty>	
		group by t_inventory_batch.batchno,t_inventory_batch.itemcode
		) c
    </select>
    
<!--外购根据物料代码和批次号查询物料集合,第一查询,批次号查询  -->   
     <select id="BaseItem.findPage.buy.batchno" resultMap="RM.BaseItem.findPage.buy.batchno">
	    select 
		   t_inventory_batch.itemcode
		   ,t_inventory_batch.batchno itemsn
		   ,c.fqty
		   ,b.fqty inputfqty
		   <isEmpty property="createdateBegin">
		   	,CONVERT(varchar(50),'2000-01-01',120) createdateBegin
		   </isEmpty>
		   <isEmpty property="createdateEnd">
		   	,getdate() createdateEnd
		   </isEmpty>
		   <isNotEmpty property="createdateBegin">
		   ,#createdateBegin# createdateBegin
		   </isNotEmpty>
		   <isNotEmpty property="createdateEnd">
		   ,#createdateEnd# createdateEnd
		   </isNotEmpty>
		   
	    from 
		t_inventory_batch
		left join (
					select itemcode,batchno,sum(case dbno when 3 then fqty when 4 then fqty2 end  ) fqty
					from  t_inventory_batch 
					group by itemcode,batchno 
					) c on t_inventory_batch.itemcode=c.itemcode and t_inventory_batch.batchno=c.batchno
		left join	
		(select itemcode,fbatchno,sum(fqty) fqty
			from t_putstorageentity 
			group by itemcode,fbatchno ) b
			on c.itemcode=b.itemcode and c.batchno=b.fbatchno
		
		where t_inventory_batch.batchno!=''
		
		  <isNotEmpty property="notTop" >
	   	   and t_inventory_batch.batchno not in(
	   	   select $notTop$ t_inventory_batch.batchno  
	   	   from t_inventory_batch
		   	where t_inventory_batch.batchno!=''
		   	   <isNotEmpty prepend="AND" property="itemcode">
				t_inventory_batch.itemcode=#itemcode#
			</isNotEmpty>		
			<isNotEmpty prepend="AND" property="itemsn">
				t_inventory_batch.batchno  =(#itemsn#)
			</isNotEmpty>	
			
	   	   ) 
	   	</isNotEmpty> 
		
		<isNotEmpty prepend="AND" property="itemcode">
			t_inventory_batch.itemcode=#itemcode#
		</isNotEmpty>		
		<isNotEmpty prepend="AND" property="itemsn">
			t_inventory_batch.batchno =(#itemsn#)
		</isNotEmpty>	
		
		group by t_inventory_batch.batchno,t_inventory_batch.itemcode,c.fqty,b.fqty
		
    </select>    
<!-- 外购物料第一查询END -->


<!-- 外购批次物料,任务单查询 -->
  <select id="BaseItem.findpicking.buy.batch.findTaskitem" resultMap="RM.BaseItem.findpicking.buy.batch.findTask">
	select 
		t_poorder.finterid fbillnoid
		,t_item_wait.poorderno fbillno
		,t_item_wait.itemcode
		,t_item_wait.batchno
		,t_poorder.fdate  createdate
		,t_base_item.isbatch
		
	from t_item_wait 
	left join t_poorder on t_item_wait.poorderno=t_poorder.fbillno
	left join t_base_item on t_item_wait.itemcode=t_base_item.itemcode
	
	where poorderno is not null
		 <isNotEmpty prepend="AND" property="createdateBegin">
		 t_poorder.fdate &gt;= #createdateBegin#
		 </isNotEmpty>
  		<isNotEmpty prepend="AND" property="createdateEnd">
		 t_poorder.fdate &lt;= #createdateEnd#
		 </isNotEmpty>
		<isNotEmpty prepend="AND" property="itemcode">
		 t_item_wait.itemcode=#itemcode#
		 </isNotEmpty>
		 <isNotEmpty prepend="AND" property="itemsn">
		 t_item_wait.batchno=#itemsn#
		 </isNotEmpty>
	group by t_poorder.finterid,t_item_wait.poorderno,t_item_wait.itemcode,t_item_wait.batchno,t_poorder.fdate,t_base_item.isbatch

		
	</select>

<select id="BaseItem.findSyncBeaseItemNum" resultClass="Long">
       select COUNT(k3item.fnumber) as countnum
		from AIS20120813194456.dbo.t_icitem as k3item 
		,AIS20120813194456.dbo.t_measureunit unit 
		where  not exists(select itemcode from t_base_item where k3item.fnumber=t_base_item.itemcode) and k3item.funitid=unit.fmeasureunitid
     </select>

  <select id="BaseItem.findPage.buy.SN.count" resultClass="Long">
       select count(*)
	    from 
		t_icserial
		where  t_icserial.ftrantypeid=71
		<isNotEmpty prepend="AND" property="itemcode">
				itemcode=#itemcode#
			</isNotEmpty>		
			<isNotEmpty prepend="AND" property="itemsn">
				fserialnum =(#itemsn#)
			</isNotEmpty>	
     </select>
     
 <!--外购根据物料代码和序列号查询物料集合,第一查询  -->   
     <select id="BaseItem.findPage.buy.SN" resultMap="RM.BaseItem.findPage.buy.SN">
	    select 
		   t_icserial.itemcode
		   ,t_icserial.fserialnum itemsn
		   ,c.fqty
		   ,1 inputfqty
			<isEmpty property="createdateBegin">
		   	,CONVERT(varchar(50),'2000-01-01',120) createdateBegin
		   </isEmpty>
		   <isEmpty property="createdateEnd">
		   	,getdate() createdateEnd
		   </isEmpty>
		   <isNotEmpty property="createdateBegin">
		   ,#createdateBegin# createdateBegin
		   </isNotEmpty>
		   <isNotEmpty property="createdateEnd">
		   ,#createdateEnd# createdateEnd
		   </isNotEmpty>
		   
		   
	    from 
		t_icserial
				left join (
					select itemcode,batchno,sum(case dbno when 3 then fqty when 4 then fqty2 end  ) fqty
					from  t_inventory_batch 
					group by itemcode,batchno 
					) c on t_icserial.itemcode=c.itemcode 
		where t_icserial.ftrantypeid=71
		
		  <isNotEmpty property="notTop" >
	   	   and serialid not in(
	   	   select $notTop$ serialid 
	   	   from t_icserial
		   	where t_icserial.ftrantypeid=71
		   	   <isNotEmpty prepend="AND" property="itemcode">
				t_icserial.itemcode=#itemcode#
			</isNotEmpty>		
			<isNotEmpty prepend="AND" property="itemsn">
				t_icserial.fserialnum =(#itemsn#)
			</isNotEmpty>	
			
	   	   ) 
	   	</isNotEmpty> 
		
		<isNotEmpty prepend="AND" property="itemcode">
			t_icserial.itemcode=#itemcode#
		</isNotEmpty>		
		<isNotEmpty prepend="AND" property="itemsn">
			t_icserial.fserialnum =(#itemsn#)
		</isNotEmpty>	
		
		
		
    </select>
 


	<select id="BaseItem.findpicking.buy.SN.findTaskitem" resultMap="RM.BaseItem.findpicking.buy.SN.findTask">
		select 
			t_poorder.fbillno
			,t_poorder.finterid fbillnoid
			,t_poorder.fdate createdate
			,#itemsn# batchno
			,#itemcode# itemcode
			,t_item_wait.orderid
			,t_item_wait.waitid
			,t_base_item.isbatch
		from 
		t_poorder
		left join t_item_wait on t_item_wait.poorderno=t_poorder.fbillno 
		
		left join 
			t_icserial on t_icserial.itemcode=t_item_wait.itemcode
		left join 
			t_base_item on t_base_item.itemcode=t_item_wait.itemcode
		
		
	where 1=1 and t_icserial.ftrantypeid=71
	 
		<isNotEmpty prepend="AND" property="createdateBegin">
		 t_poorder.fdate &gt;= #createdateBegin#
		 </isNotEmpty>
  		<isNotEmpty prepend="AND" property="createdateEnd">
		 t_poorder.fdate &lt;= #createdateEnd#
		 </isNotEmpty>
		 
		 <isNotEmpty prepend="AND" property="itemcode">
		 t_icserial.itemcode=#itemcode#
		 </isNotEmpty>
		 <isNotEmpty prepend="AND" property="itemsn">
		 t_icserial.fserialnum=#itemsn#
		 </isNotEmpty>
		
	</select>


<!-- 外购质检单集合 -->
    <select id="BaseItem.findpicking.buy.SN.findTask.findchecklist" resultMap="RM.BaseItem.findpicking.SN.findTask.findchecklist">
    	select 
    	t_item_wait.waitid qmid
    	,t_item_wait.reportno fbillno
    	,t_item_wait.createdate fbilldate 
    	from 
    	t_item_wait 
    	   where 1=1
    	<isNotEmpty prepend="AND" property="waitid">
			t_item_wait.waitid=#waitid#
		</isNotEmpty>
    	
    </select>
    

 <!-- 外购入库单集合,查询入库单和入库物料,及序列号 -->
    <select id="BaseItem.findpicking.buy.SN.findTask.findPutstorage" resultMap="RM.BaseItem.findpicking.SN.findTask.findPutstorage">
    		select
    		 t_putstorage.finterid
    		 ,t_putstorage.fbillno
    		 ,t_putstorage.creatdate
    		 ,t_putstorageentity.itemcode 
    		 
    		from t_putstorageentity 
		left join t_putstorage on t_putstorageentity.finterid= t_putstorage.finterid
		left join t_icserial on  t_icserial.finterid=t_putstorageentity.orderid
		where t_icserial.ftrantypeid=71 
			
    	<isNotEmpty prepend="AND" property="fbillno">
			t_putstorageentity.poorderno =#fbillno#
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="batchno">
			t_icserial.fserialnum =#batchno#
		</isNotEmpty>
		
		group by
		t_putstorage.finterid
    		 ,t_putstorage.fbillno
    		 ,t_putstorage.creatdate
    		 ,t_putstorageentity.itemcode 
		
    </select>


<select id="BaseItem.gettopicid" resultMap="RM.BaseItem.gettopicid">

	select topicid from t_base_item where t_base_item.itemcode=#itemcode# group by topicid

</select>

<select id="BaseItem.find.itembase.data.base" resultMap="RM.BaseItem.BaseItem.data.base"><!-- 查询 -->

	select guideid,guideis,itemcode,itemname,formatno
        from t_base_item where t_base_item.itemcode=#itemcode#

</select>



<select id="BaseItem.getIsbatch.Issn" resultMap="RM.BaseItem.getIsbatch.Issn">
	select 
			itemcode,isbatch,fissnmanager
        from 
        	t_base_item
        where
         	t_base_item.baseitemid=#baseitemid#
</select>

<select id="BaseItem.select.data.factoryReport" resultMap="ItemBase.data.factoryReport.data">
	select 
			itemname,formatno,fissnmanager,rpid,installdiagram,maintainpartdiagram
        from 
        	t_base_item
        where
         	t_base_item.itemcode=#itemcode#
</select>



<select id="BaseItem.findlist.findurl" resultMap="RM.BaseItem.findlist.findurl">
	select 
			itemcode,cc.furl url
        from 
        	t_base_item
        	left join t_report_package on t_base_item.rpid=  t_report_package.pid
        	left join (select t_package_item.pid,t_pd_report_template.furl from  t_package_item 
			        	left join t_pd_report_template on t_package_item.tplid=t_pd_report_template.tplid
        	) cc on t_report_package.pid=cc.pid
        where
         	t_base_item.itemcode=#itemcode#
         	
         	
</select>


<select id="BaseItem.getByTecsn" resultMap="RM.BaseItem.getByTecsn">

	select
			t_base_item.itemcode,
			t_base_item.formatno,
			t_base_item.f_119 f119,
			t_base_item.f_107 f107,
			t_base_item.f_106 f106,
			t_base_item.f_108 f108,
			t_base_item.f_116 f116,
		
			t_ICItemDesign.baseitemid,
			t_ICItemDesign.fdn,
			t_ICItemDesign.fpn,
			t_ICItemDesign.fpdname,
			t_ICItemDesign.fpdtype,
			t_ICItemDesign.fmaxip,
			t_ICItemDesign.fps,
			t_ICItemDesign.fipr,
			t_ICItemDesign.fbpu,
			t_ICItemDesign.fopr,
			t_ICItemDesign.fwd,
			t_ICItemDesign.fwds,
			t_ICItemDesign.fpds,
			t_ICItemDesign.fbody,
			t_ICItemDesign.fcg,
			t_ICItemDesign.structlen,
			t_ICItemDesign.allowpresure,
			t_ICItemDesign.structtype,
			t_ICItemDesign.fgas,
			t_ICItemDesign.otemprange,
			t_ICItemDesign.mindifference,
			t_ICItemDesign.chambermax,
			t_ICItemDesign.pressmax,
			t_ICItemDesign.setpressure,
			t_ICItemDesign.soverpressure,
			t_ICItemDesign.soverpressureval,
			t_ICItemDesign.sunderpressure,
			t_ICItemDesign.sunderpressureval,
			t_ICItemDesign.resptime,
			t_ICItemDesign.resetdifferent,
			
			t_ICItemDesign.oldfeatures,
			t_ICItemDesign.fheart,
			t_ICItemDesign.trip,
			t_ICItemDesign.cv,
			t_ICItemDesign.mfbody,
			t_ICItemDesign.allowdvalue,
			t_ICItemDesign.structure,
			t_ICItemDesign.voltage,
			t_ICItemDesign.protecttype,
			t_ICItemDesign.insignal ,
			t_ICItemDesign.fixed ,
			t_ICItemDesign.jdrank,
			t_ICItemDesign.basedvalue,
			t_ICItemDesign.returndvalue	,
			t_ICItemDesign.diearea,
			t_ICItemDesign.tripdvalue,
			
				orde.fbillno,
				orde.createtime,
				orde.changetime,
				orde.changeuser,
				orde.priority,
				orde.amount,
				orde.mininpressure,
				orde.maxinpressure,
				orde.minoutpressure,
				orde.maxoutpressure,
				orde.outpressure,
				orde.inpressure,
				orde.turnpressue,
				orde.blowpressure,
				orde.fclose,
				orde.unitname,
				orde.deleverydate,
				orde.status,
				orde.lastamount,
				orde.innum,
				orde.existednums,
				orde.making,
				orde.youtput,
				orde.cyclename,
				orde.ratio,
				orde.planednum,
				orde.lastinnum,
				orde.notes,
				orde.unitid,
				orde.morehighpressure,
				orde.morelowpressure,
				orde.ftaxprice,
				orde.fprice,
				orde.fallamount,
				orde.famount,
				orde.fcess,
				orde.ftaxamount,
				orde.fpricediscount,
				orde.fstockqty
			
			

	from t_base_item
		left join t_ICItemDesign on
		t_base_item.baseitemid=t_ICItemDesign.baseitemid
		left join 
			(select *from t_orders_product where fbillno=#orderfbillno# ) orde
			on orde.itemcode=t_base_item.itemcode
		
	where
		t_base_item.itemcode in(
		select top 1 itemcode from t_icserial where fserialnum=#itemsn#
		)

 





         	
         	
</select>


<select id="BaseItem.getByTecsnzj" resultMap="RM.BaseItem.getByTecsn">

	select
			t_base_item.itemcode,
			t_base_item.formatno,
			t_base_item.f_119 f119,
			t_base_item.f_107 f107,
			t_base_item.f_106 f106,
			t_base_item.f_108 f108,
			t_base_item.f_116 f116,
		
			t_ICItemDesign.baseitemid,
			t_ICItemDesign.fdn,
			t_ICItemDesign.fpn,
			t_ICItemDesign.fpdname,
			t_ICItemDesign.fpdtype,
			t_ICItemDesign.fmaxip,
			t_ICItemDesign.fps,
			t_ICItemDesign.fipr,
			t_ICItemDesign.fbpu,
			t_ICItemDesign.fopr,
			t_ICItemDesign.fwd,
			t_ICItemDesign.fwds,
			t_ICItemDesign.fpds,
			t_ICItemDesign.fbody,
			t_ICItemDesign.fcg,
			t_ICItemDesign.structlen,
			t_ICItemDesign.allowpresure,
			t_ICItemDesign.structtype,
			t_ICItemDesign.fgas,
			t_ICItemDesign.otemprange,
			t_ICItemDesign.mindifference,
			t_ICItemDesign.chambermax,
			t_ICItemDesign.pressmax,
			t_ICItemDesign.setpressure,
			t_ICItemDesign.soverpressure,
			t_ICItemDesign.soverpressureval,
			t_ICItemDesign.sunderpressure,
			t_ICItemDesign.sunderpressureval,
			t_ICItemDesign.resptime,
			t_ICItemDesign.resetdifferent,
			
			t_ICItemDesign.oldfeatures,
			t_ICItemDesign.fheart,
			t_ICItemDesign.trip,
			t_ICItemDesign.cv,
			t_ICItemDesign.mfbody,
			t_ICItemDesign.allowdvalue,
			t_ICItemDesign.structure,
			t_ICItemDesign.voltage,
			t_ICItemDesign.protecttype,
			t_ICItemDesign.insignal ,
			t_ICItemDesign.fixed ,
			t_ICItemDesign.jdrank,
			t_ICItemDesign.basedvalue,
			t_ICItemDesign.returndvalue	,
			t_ICItemDesign.diearea,
			t_ICItemDesign.tripdvalue,
			
				orde.fbillno,
				orde.createtime,
				orde.changetime,
				orde.changeuser,
				orde.priority,
				orde.amount,
				orde.mininpressure,
				orde.maxinpressure,
				orde.minoutpressure,
				orde.maxoutpressure,
				orde.outpressure,
				orde.inpressure,
				orde.turnpressue,
				orde.blowpressure,
				orde.fclose,
				orde.unitname,
				orde.deleverydate,
				orde.status,
				orde.lastamount,
				orde.innum,
				orde.existednums,
				orde.making,
				orde.youtput,
				orde.cyclename,
				orde.ratio,
				orde.planednum,
				orde.lastinnum,
				orde.notes,
				orde.unitid,
				orde.morehighpressure,
				orde.morelowpressure,
				orde.ftaxprice,
				orde.fprice,
				orde.fallamount,
				orde.famount,
				orde.fcess,
				orde.ftaxamount,
				orde.fpricediscount,
				orde.fstockqty
			
			

	from t_base_item
		left join t_ICItemDesign on
		t_base_item.baseitemid=t_ICItemDesign.baseitemid
		left join 
			(select *from t_orders_product where fbillno=#orderfbillno# ) orde
			on orde.itemcode=t_base_item.itemcode
		
	where
		t_base_item.itemcode =#itemcode#
         	
         	
</select>

<select id="BaseItem.select.entityList.date" resultMap="BaseItem.MR.select.update.datalist.result">
	select existdemand4,makingnums4,checkednum4,unchecknum4,sumdemand4 ,
			existdemand,makingnums,checkednum,unchecknum,sumdemand,baseitemid,planfqty,planfqty4
	from t_base_item
	where 1=1 and itemcode=#itemcode#
</select>

<update id="BaseItem.update.makingnums.data.select4" parameterClass="com.terrence.crm.dol.bean.BaseItem">
	update t_base_item 
	<dynamic prepend="SET">
	        <isNotEmpty prepend="," property="makingnums4">
	        	makingnums4=#makingnums4#
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="makingnums">
	        	makingnums=#makingnums#
	        </isNotEmpty>
	         <isNotEmpty prepend="," property="existdemand4">
	        	existdemand4=#existdemand4#
	        </isNotEmpty>
	         <isNotEmpty prepend="," property="existdemand">
	        	existdemand=#existdemand#
	        </isNotEmpty>
	         <isNotEmpty prepend="," property="checkednum4">
	        	checkednum4=#checkednum4#
	        </isNotEmpty>
	         <isNotEmpty prepend="," property="checkednum">
	        	checkednum=#checkednum#
	        </isNotEmpty>
	         <isNotEmpty prepend="," property="unchecknum4">
	        	unchecknum4=#unchecknum4#
	        </isNotEmpty>
	         <isNotEmpty prepend="," property="unchecknum">
	        	unchecknum=#unchecknum#
	        </isNotEmpty>
	        <isNotEmpty prepend="," property="sumdemand4">
	        	sumdemand4=#sumdemand4#
	        </isNotEmpty>
	         <isNotEmpty prepend="," property="sumdemand">
	        	sumdemand=#sumdemand#
	        </isNotEmpty>
	         <isNotEmpty prepend="," property="planfqty">
	        	planfqty=#planfqty#
	        </isNotEmpty>
	         <isNotEmpty prepend="," property="planfqty4">
	        	planfqty4=#planfqty4#
	        </isNotEmpty>
	  </dynamic>
	 where itemcode=#itemcode# and baseitemid = #baseitemid# 
</update>

<select id="BaseItem.findByItemcode" resultMap="RM.BaseItem.Page">
    select t_base_item.baseitemid ,t_base_item.itemcode ,t_base_item.itemname ,t_base_item.formatno ,t_base_item.itemproperty ,t_base_item.secinv ,
    t_base_item.youtput ,t_base_item.unitname ,t_base_item.ischeck,t_base_item.fqtymin ,t_base_item.isdeduct ,t_base_item.refercost ,
       t_base_item.checkednum ,t_base_item.unchecknum ,t_base_item.existdemand,t_base_item.forecast ,t_base_item.isbatch ,t_base_item.isbarcode,t_base_item.fissnmanager  ,t_base_item.bomstatus  ,
       t_process_cycle.cyclename ,v_invnetory_batch.sqty fqty,v_invnetory_batch.sqty2 fqty2,t_admin.adminName,t_supplier.fname
    from t_base_item left join t_process_cycle on t_base_item.cycleid=t_process_cycle.cycleid left join v_invnetory_batch on
    t_base_item.itemcode=v_invnetory_batch.itemcode  left join t_admin on t_base_item.responsible = t_admin.adminId left join t_supplier
    on t_base_item.supplierid = t_supplier.supplierid
   where t_base_item.itemcode=#itemcode# and t_base_item.deleted=0
	
</select>

<!-- 取装配任务单在制品量-->
<select id="BaseItem.getPlanParam.Assembly" resultMap="RM.BaseItem.Param">
	select isnull(youtput,0) youtput,t_process_cycle.cyclename,t_process_cycle.ratio,0 secinv,t_base_item.itemcode,
	isnull(fqty,0) fqty,isnull(icmo.making,0) makingnums,isnull(icmoed.planednum,0) existednums,isnull(planednum,0) planednum 
	from t_base_item 
	<!-- 库存 -->
	left join (select sum(fqty) fqty,itemcode from t_inventory_batch group by itemcode) t_inventory
	on t_base_item.itemcode=t_inventory.itemcode 
	<!-- 采购周期 -->
	left join t_process_cycle on isnull(t_base_item.cycleid,5)=t_process_cycle.cycleid
	<!-- 在途数量（订单已审但未下推） -->
	left join (select t_poorderentry.itemcode,sum(t_poorderentry.fqty) making from t_poorder left join t_poorderentry on   t_poorder.finterid= t_poorderentry.finterid  where ispush!=1 and fstatus=1 group by t_poorderentry.itemcode) icmo 
	on t_base_item.itemcode=icmo.itemcode
	left join
	<!-- 已有需求（申请单：未审核完成之前的+订单：未下推的也就是ispush!=1） -->
	(select tab1.itemcode,sum(tab1.amount) planednum from (select t_porequestentry.itemcode,t_porequestentry.amount amount from t_porequest left join t_porequestentry on   t_porequest.finterid= t_porequestentry.finterid  where fstatus!=1 union all select t_poorderentry.itemcode,t_poorderentry.fqty amount from t_poorder left join t_poorderentry on   t_poorder.finterid= t_poorderentry.finterid  where ispush!=1 ) tab1 group by tab1.itemcode) icmoed 
	on t_base_item.itemcode=icmoed.itemcode 
	where t_base_item.itemcode=#itemcode# and t_base_item.deleted=0
</select>

<!-- <select id="BaseItem.getPlanParam.Assembly" resultMap="RM.BaseItem.Param">
	select isnull(youtput,0) youtput,t_process_cycle.cyclename,t_process_cycle.ratio,isnull(t_base_item.secinv,0) secinv,t_base_item.itemcode
	,isnull(fqty,0)+isnull(fqty2,0) fqty,isnull(icmo.making,0) makingnums,isnull(existdemand,0) existednums,isnull(planednum,0) planednum from t_base_item 
	left join (select sum(fqty) fqty,sum(fqty2) fqty2,itemcode from t_inventory_batch group by itemcode) t_inventory
	on t_base_item.itemcode=t_inventory.itemcode left join t_process_cycle on isnull(t_base_item.cycleid,5)=t_process_cycle.cycleid
	left join (select sum(demand) making,itemcode from t_assembly_task where status =1 group by itemcode) icmo on t_base_item.itemcode=icmo.itemcode
	left join(select sum(demand) planednum,itemcode from t_assembly_task where status=0 group by itemcode) icmoed on t_base_item.itemcode=icmoed.itemcode 
	 where t_base_item.itemcode=#itemcode# and t_base_item.deleted=0
	
</select> -->

<!--投料单中根据物料编码查询物料信息-->
<select id="BaseItem.getBaseItem.Callslip" resultMap="RM.BaseItem.Callslip">
	select top 10 t_base_item.itemcode,t_base_item.itemname,t_base_item.formatno,t_base_item.unitname from t_base_item 
    <!-- left join t_inventory_batch tib on t_base_item.itemcode = tib.itemcode --> 
	where t_base_item.deleted=0
	<isNotEmpty prepend="AND" property="itemcode">
			t_base_item.itemcode like ('%$itemcode$%')
	</isNotEmpty>
	
</select>
<!--采购申请单中根据物料编码查询物料信息-->
<select id="BaseItem.getBaseItem.Porequest" resultMap="RM.BaseItem.Porequest">
	select itemcode,itemname,f_102,f_101,unitname,formatno,t_base_item.supplierid,t_supplier.fname
	from t_base_item
    left join
        t_supplier 
            on t_base_item.supplierid  = t_supplier.supplierid 
    left join
        t_admin 
            on t_base_item.responsible = t_admin.adminId 
    left  join
        t_stock 
            on t_base_item.storage = t_stock.fitemid
	where t_base_item.deleted=0
	<isNotEmpty prepend="AND" property="itemcode">
			t_base_item.itemcode =#itemcode#
	</isNotEmpty>
	
</select>
<!-- 系统订单物料列表查询 -->
<select id="BaseItem.findListInfo" resultMap="RM.BaseItem.Detail1">
		SELECT top 10
    		<include refid="BaseItem.columns1"/>
	        from t_base_item
	        where 1=1 and t_base_item.detail=1
		<include refid="BaseItem.findPage.and"/>
		<isNotEmpty property="sortColumns">
			ORDER BY $sortColumns$
		</isNotEmpty>
</select>
<!-- 系统订单中通过物料代码查找物料信息 -->
<select id="BaseItem.getItemInfoByFNumber" resultMap="RM.BaseItem.Detail1">
  select <include refid="BaseItem.columns1"/>
      from t_base_item
      where t_base_item.itemcode = '$itemcode$'
  
</select>
<!--发货通知单中根据物料编码查询物料信息-->
<select id="BaseItem.getBaseItem.Seoutstock" resultMap="RM.BaseItem.Seoutstock">
	select baseitemid,itemcode,itemname,f_102,f_101,unitname,formatno,t_measureunit.fitemid unitid
	from t_base_item
	left join t_measureunit
	on t_base_item.unitname=t_measureunit.fname
	where t_base_item.deleted=0
	<isNotEmpty prepend="AND" property="itemcode">
			t_base_item.itemcode =#itemcode#
	</isNotEmpty>

</select>
 <select id="BaseItem.findItem.StoreRoom" resultMap="RM.BaseItem.findItem.porequest"><!--销售出库单中用  -->
    	select  t_base_item.baseitemid ,t_base_item.itemcode ,t_base_item.itemname ,t_base_item.formatno ,t_base_item.f_102,t_base_item.unitname,
    		t_base_item.forderprice,t_base_item.ftaxrate,t_base_item.f_101,t_base_item.responsible,t_base_item.supplierid,t_supplier.fname,t_admin.adminName,
    		t_base_item.unitid,t_base_item.isbatch,t_base_item.storage,t_base_item.fissnmanager,t_stock.fname stockName,t_base_item.fsaleprice,t_base_item.deptid,t_department.teamname
    		 
    		from t_base_item left join t_supplier on t_base_item.supplierid = t_supplier.supplierid
    		left join t_admin on t_base_item.responsible = t_admin.adminId 
    		left join t_stock  on t_base_item.storage = t_stock.fitemid 
    		left join t_department on t_base_item.deptid=t_department.teamid
    		where 1 = 1
    		<isNotEmpty prepend="AND" property="itemcode"> t_base_item.itemcode  = #itemcode# </isNotEmpty>
    </select>
    <!--查询常州系统中有且ERP上不存在的物料（不包括目录）-->
	<select id="BaseItem.getdifferentItems" resultMap="RM.BaseItem.DifferentItems">
		select baseitemid from t_item_diff
	</select>
	    
</sqlMap>


 